<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="./storage.js" charset="utf-8"></script>
    <style media="screen">
      *{
        margin:0px;
        padding:0px;
        list-style:none;
      }
      .modal{
        position:absolute;
        left:0px;
        top:0px;
        background:rgba(0,0,0,0.3);
        width:100%;
        height:0;
        opacity:0;
        transition:opacity 1s linear 0s;

        overflow:hidden;

      }
      .from{
        width:300px;
        height:120px;
        border:1px solid #ccc;
        background:white;
        margin:150px auto;
      }
      .from div{
        height:40px;
        line-height:40px;
        text-align:center;
      }

      .change{
        opacity:1;
        height:100%;
      }
    </style>
  </head>
  <body>

    <p>您已经登录</p>

    <div class="modal">
      <div class="from">
        <from>
          <div>用户名：<input type="text"></div>
          <div>密码: <input type="password" name="" value=""></div>
          <div>
            <button>确定</button>
            <button>取消</button>
          </div>
        </from>
      </div>
    </div>

  </body>
</html>
<script type="text/javascript">

  // 读取本地缓存，如果有user这个东西，那么算已经登录，如果没有的话，那么弹出登录框
  var cunchu = output();

  // 因为本地没有这个东西，所以这里读取输出为null
  // data就是undefined
  // console.log(Boolean(cunchu.getData('user',data=>console.log(data))));

  // 判断本地是否有这个东西
  if(!cunchu.getData('user',data=>console.log(data))){

      var modal = document.getElementsByClassName('modal')[0];


      setTimeout(function(){
        modal.className = 'modal change';
      },100);

  }

  // display none的元素，无法进行过度，动画和部分计时器内容
  // 这是一个页面加载bug，
  // 所有的页面效果，都是为了维护用户的体验，不是为了好看

</script>
