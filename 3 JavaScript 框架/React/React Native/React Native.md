```
é¡µé¢çš„ç›®å½•ç»“æ„ï¼š

add - é¡µé¢æ–‡ä»¶å¤¹

  components - é¡µé¢å­ç»„ä»¶æ–‡ä»¶å¤¹

  icons - é¡µé¢å›¾ç‰‡æ–‡ä»¶å¤¹

  pages - é¡µé¢è·³è½¬åˆ°ç‹¬ç«‹çš„å­é¡µé¢æ–‡ä»¶å¤¹

  â€¦â€¦ - å…¶ä»–æ–‡ä»¶å¤¹å¯è‡ªè¡Œå®šä¹‰

  index.js - å½“å‰é¡µé¢çš„ä¸»é¡µ
```


ã€ `2019` å¹´ `3` æœˆ `26` æ—¥ã€‘æ•´ç†è‡ª [ã€ `React Native` ä¸­æ–‡ç½‘ `0.59` ã€‘](https://reactnative.cn/docs/getting-started.html)

---


# å…¥é—¨åŸºç¡€

![å›¾ç‰‡](https://media.giphy.com/media/13WZniThXy0hSE/giphy.gif)

## æ­å»ºå¼€å‘ç¯å¢ƒ

> æœ¬æ–‡åªè®²è¿° `windows 10` çš„ç¯å¢ƒæ­å»ºï¼Œè¦äº†è§£å…¶ä»–ç³»ç»Ÿä¸‹çš„ç¯å¢ƒæ­å»ºï¼Œè¯·ç§»æ­¥[ã€å®˜æ–¹æ–‡æ¡£ï¼šæ­å»ºå¼€å‘ç¯å¢ƒã€‘](https://reactnative.cn/docs/getting-started/)

> å¦‚æœé˜…è¯»å®Œæœ¬æ–‡æ¡£åè¿˜ç¢°åˆ°å¾ˆå¤šç¯å¢ƒæ­å»ºçš„é—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®ä½ è¿˜å¯ä»¥å†çœ‹çœ‹ç”±æœ¬ç«™æä¾›çš„ç¯å¢ƒæ­å»ºè§†é¢‘æ•™ç¨‹ï¼š

* [ã€`macOS iOS`ã€‘](https://ke.qq.com/webcourse/index.html#course_id=197101&term_id=100233637&taid=1220865928921581&vid=a1417i5op7k)

* [ã€`macOS Android`ã€‘](https://ke.qq.com/webcourse/index.html#course_id=197101&term_id=100233637&taid=1220870223888877&vid=z1417kmxask)

* [ã€`windows Android`ã€‘](https://ke.qq.com/webcourse/index.html#course_id=197101&term_id=100233637&taid=1220874518856173&vid=d1417tgg1ez)

* [ã€`windows` ç¯å¢ƒæ­å»ºæ–‡å­—æ•™ç¨‹ã€‘](http://bbs.reactnative.cn/topic/10)

* ä»¥åŠ[ã€å¸¸è§é—®é¢˜ã€‘](http://bbs.reactnative.cn/topic/130)

> æ³¨æ„ï¼šè§†é¢‘æ•™ç¨‹æˆ–è€…å…¶ä»–ç½‘ç»œä¸Šçš„åšå®¢å’Œæ–‡ç« å¯èƒ½å’Œæœ¬æ–‡æ¡£æœ‰æ‰€å‡ºå…¥ï¼Œè¯·ä»¥æœ€æ–°ç‰ˆæœ¬çš„æœ¬æ–‡æ¡£æ‰€è¿°ä¸ºå‡†ï¼

### å®‰è£…ä¾èµ–

å¿…é¡»å®‰è£…çš„ä¾èµ–æœ‰ï¼š

* `Node.js`

  `Node.js` çš„ç‰ˆæœ¬å¿…é¡»é«˜äº `8.3` ï¼Œæ¨è `8.5` çš„ç¨³å®šç‰ˆæœ¬

  å®‰è£…å®Œ `Node` åå»ºè®®è®¾ç½® `npm` é•œåƒä»¥åŠ é€Ÿåé¢çš„è¿‡ç¨‹ï¼ˆæˆ–ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰

  > æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ `cnpm` ï¼Œ`cnpm` å®‰è£…çš„æ¨¡å—è·¯å¾„æ¯”è¾ƒå¥‡æ€ªï¼Œ`packager` ä¸èƒ½æ­£å¸¸è¯†åˆ«ï¼

  ```
  npm config set registry https://registry.npm.taobao.org --global

  npm config set disturl https://npm.taobao.org/dist --global
  ```

* `React Native` å‘½ä»¤è¡Œå·¥å…·

* `Python2`

  `Python` çš„ç‰ˆæœ¬å¿…é¡»ä¸º `2.x`ï¼ˆä¸æ”¯æŒ `3.x` ï¼‰ï¼Œæ¨è `2.7` çš„ç‰ˆæœ¬

* `JDK`

  `JDK` çš„ç‰ˆæœ¬å¿…é¡»æ˜¯ `1.8`ï¼ˆç›®å‰ä¸æ”¯æŒ `1.9` åŠæ›´é«˜ç‰ˆæœ¬ï¼‰ï¼Œå¹¶ä¸”[ã€é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼šwin10ã€‘](https://jingyan.baidu.com/article/db55b609fa946e4ba20a2f56.html)

  > æ³¨æ„ï¼Œè¿™é‡Œä¸æ˜¯è¦æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€å®šè¦[ã€ `1.8` ç‰ˆæœ¬çš„ã€‘](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

* `Android Studio`

  æ³¨æ„ï¼šè™½ç„¶ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ç¼–è¾‘å™¨æ¥å¼€å‘åº”ç”¨ï¼ˆç¼–å†™ `JavaScript` ä»£ç ï¼‰ï¼Œä½†ä½ ä»ç„¶å¿…é¡»å®‰è£… `Android Studio` æ¥è·å¾—ç¼–è¯‘ `Android` åº”ç”¨æ‰€éœ€çš„å·¥å…·å’Œç¯å¢ƒ

### `React Native` å‘½ä»¤è¡Œå·¥å…·

> [ã€ `Yarn` ã€‘](https://yarnpkg.com/zh-Hant/) æ˜¯ `Facebook` æä¾›çš„æ›¿ä»£ `npm` çš„å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿ `node` æ¨¡å—çš„ä¸‹è½½

`React Native` å‘½ä»¤è¡Œå·¥å…· ç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ï¼ˆ `packager` ï¼‰ç­‰ä»»åŠ¡

```
npm install -g yarn react-native-cli
```

å®‰è£…å®Œ `yarn` ååŒç†ä¹Ÿè¦è®¾ç½®é•œåƒæºï¼š

```
yarn config set registry https://registry.npm.taobao.org --global

yarn config set disturl https://npm.taobao.org/dist --global
```

> å®‰è£…å®Œ `yarn` ä¹‹åå°±å¯ä»¥ç”¨ `yarn` ä»£æ›¿ `npm` äº†ï¼Œä¾‹å¦‚ç”¨ `yarn` ä»£æ›¿ `npm install` å‘½ä»¤ï¼Œç”¨ `yarn add` æŸç¬¬ä¸‰æ–¹åº“åä»£æ›¿ `npm install` æŸç¬¬ä¸‰æ–¹åº“å

### `Android` å¼€å‘ç¯å¢ƒ

> è¯·æ³¨æ„ï¼ï¼ï¼å›½å†…ç”¨æˆ·å¿…é¡»å¿…é¡»å¿…é¡»æœ‰ç¨³å®šçš„ç¿»å¢™å·¥å…·ï¼Œå¦åˆ™åœ¨ä¸‹è½½ã€å®‰è£…ã€é…ç½®è¿‡ç¨‹ä¸­ä¼šä¸æ–­é­é‡é“¾æ¥è¶…æ—¶æˆ–æ–­å¼€ï¼Œæ— æ³•è¿›è¡Œå¼€å‘å·¥ä½œ

#### å®‰è£… `Android Studio`

* é¦–å…ˆ[ã€ä¸‹è½½ `Android Studio` ã€‘](https://developer.android.com/studio/index.html)å¹¶æ‰“å¼€ï¼Œå›½å†…ç”¨æˆ·å¯èƒ½æ— æ³•æ‰“å¼€å®˜æ–¹é“¾æ¥ï¼Œè¯· **`è‡ªè¡Œä½¿ç”¨æœç´¢å¼•æ“æœç´¢`** å¯ç”¨çš„ä¸‹è½½é“¾æ¥

* è¿›å…¥å®‰è£…ç•Œé¢åé€‰æ‹© `Custom` é€‰é¡¹ï¼Œç¡®ä¿é€‰ä¸­äº†ä»¥ä¸‹å‡ é¡¹ï¼š

  * `Android SDK`
  * `Android SDK Platform`
  * `Performance (Intel Â® HAXM)` [ã€ `AMD` å¤„ç†å™¨çœ‹è¿™é‡Œã€‘](https://android-developers.googleblog.com/2018/07/android-emulator-amd-processor-hyper-v.html)
  * `Android Virtual Device`

* ç„¶åç‚¹å‡» `Next` æ¥å®‰è£…é€‰ä¸­çš„ç»„ä»¶

  * å¦‚æœé€‰æ‹©æ¡†æ˜¯ç°çš„ï¼Œä½ ä¹Ÿå¯ä»¥å…ˆè·³è¿‡ï¼Œç¨åå†æ¥å®‰è£…è¿™äº›ç»„ä»¶

å®‰è£…å®Œæˆåï¼Œçœ‹åˆ°æ¬¢è¿ç•Œé¢æ—¶ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹é¢çš„æ“ä½œäº†

#### å®‰è£… `Android SDK`

> `Android Studio` é»˜è®¤ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ `Android SDK`

ç›®å‰ç¼–è¯‘ `React Native` åº”ç”¨éœ€è¦çš„æ˜¯ `Android 9 (Pie)` ç‰ˆæœ¬çš„ `SDK`

* æ³¨æ„ `SDK` ç‰ˆæœ¬ä¸ç­‰äºç»ˆç«¯ç³»ç»Ÿç‰ˆæœ¬ï¼Œ`React Native` ç›®å‰æ”¯æŒ `Android 4.1` ä»¥ä¸Šè®¾å¤‡

* ä½ å¯ä»¥åœ¨ `Android Studio` çš„ `SDK Manager` ä¸­é€‰æ‹©å®‰è£…å„ç‰ˆæœ¬çš„ `SDK`

  * ä½ å¯ä»¥åœ¨ `Android Studio` çš„æ¬¢è¿ç•Œé¢ä¸­æ‰¾åˆ° `SDK Manager`

  * ç‚¹å‡» `Configure` ï¼Œç„¶åå°±èƒ½çœ‹åˆ° `SDK Manager`

![å›¾ç‰‡](https://reactnative.cn/docs/assets/GettingStartedAndroidStudioWelcomeWindows.png)

  * `SDK Manager` è¿˜å¯ä»¥åœ¨ `Android Studio` çš„ `Preferences` èœå•ä¸­æ‰¾åˆ°

    * å…·ä½“è·¯å¾„æ˜¯ `Appearance & Behavior` â†’ `System Settings` â†’ `Android SDK`

* åœ¨ `SDK Manager` ä¸­é€‰æ‹© `SDK Platforms` é€‰é¡¹å¡ï¼Œç„¶ååœ¨å³ä¸‹è§’å‹¾é€‰ `Show Package Details`

  * å±•å¼€ `Android 9 (Pie) `é€‰é¡¹ï¼Œç¡®ä¿å‹¾é€‰äº†ä¸‹é¢è¿™äº›ç»„ä»¶ï¼ˆé‡ç”³ä½ å¿…é¡»ä½¿ç”¨ç¨³å®šçš„ç¿»å¢™å·¥å…·ï¼Œå¦åˆ™å¯èƒ½éƒ½çœ‹ä¸åˆ°è¿™ä¸ªç•Œé¢ï¼‰ï¼š

    * `Android SDK Platform 28`

    * `Intel x86 Atom_64 System Image`

      å®˜æ–¹æ¨¡æ‹Ÿå™¨é•œåƒæ–‡ä»¶ï¼Œä½¿ç”¨éå®˜æ–¹æ¨¡æ‹Ÿå™¨ä¸éœ€è¦å®‰è£…æ­¤ç»„ä»¶

* ç„¶åç‚¹å‡» `SDK Tools` é€‰é¡¹å¡ï¼ŒåŒæ ·å‹¾ä¸­å³ä¸‹è§’çš„ `Show Package Details`

  * å±•å¼€ `Android SDK Build-Tools` é€‰é¡¹ï¼Œç¡®ä¿é€‰ä¸­äº† `React Native` æ‰€å¿…é¡»çš„ `28.0.3` ç‰ˆæœ¬

  * ä½ å¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªå…¶ä»–ç‰ˆæœ¬

* æœ€åç‚¹å‡» `Apply` æ¥ä¸‹è½½å’Œå®‰è£…è¿™äº›ç»„ä»¶

#### é…ç½® `ANDROID_HOME` ç¯å¢ƒå˜é‡

> `React Native` éœ€è¦é€šè¿‡ç¯å¢ƒå˜é‡æ¥äº†è§£ä½ çš„ `Android SDK` è£…åœ¨ä»€ä¹ˆè·¯å¾„ï¼Œä»è€Œæ­£å¸¸è¿›è¡Œç¼–è¯‘

æ‰“å¼€ `æ§åˆ¶é¢æ¿` -> `ç³»ç»Ÿå’Œå®‰å…¨` -> `ç³»ç»Ÿ` -> `é«˜çº§ç³»ç»Ÿè®¾ç½®` -> `é«˜çº§` -> `ç¯å¢ƒå˜é‡` -> `æ–°å»º` ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `ANDROID_HOME` çš„ç¯å¢ƒå˜é‡ï¼ˆç³»ç»Ÿæˆ–ç”¨æˆ·å˜é‡å‡å¯ï¼‰ï¼ŒæŒ‡å‘ä½ çš„ `Android SDK` æ‰€åœ¨çš„ç›®å½•ï¼ˆå…·ä½“çš„è·¯å¾„å¯èƒ½å’Œä¸‹å›¾ä¸ä¸€è‡´ï¼Œè¯·è‡ªè¡Œç¡®è®¤ï¼‰ï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/GettingStartedAndroidEnvironmentVariableANDROID_HOME.png)

`SDK` é»˜è®¤æ˜¯å®‰è£…åœ¨ä¸‹é¢çš„ç›®å½•ï¼š

```
c:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk
```

> ä½ å¯ä»¥åœ¨ `Android Studio` çš„ `Preferences` èœå•ä¸­æŸ¥çœ‹ `SDK` çš„çœŸå®è·¯å¾„ï¼Œå…·ä½“æ˜¯ `Appearance & Behavior` â†’ `System Settings` â†’ `Android SDK`

> ä½ éœ€è¦å…³é—­ç°æœ‰çš„å‘½ä»¤ç¬¦æç¤ºçª—å£ç„¶åé‡æ–°æ‰“å¼€ï¼Œè¿™æ ·æ–°çš„ç¯å¢ƒå˜é‡æ‰èƒ½ç”Ÿæ•ˆ

#### æ·»åŠ ç›®å½•åˆ°ç¯å¢ƒå˜é‡ `Path` ä¸­

æ‰“å¼€ `æ§åˆ¶é¢æ¿` -> `ç³»ç»Ÿå’Œå®‰å…¨` -> `ç³»ç»Ÿ` -> `é«˜çº§ç³»ç»Ÿè®¾ç½®` -> `é«˜çº§` -> `ç¯å¢ƒå˜é‡` ï¼Œé€‰ä¸­ `Path` å˜é‡ï¼Œç„¶åç‚¹å‡» `ç¼–è¾‘`

* ç‚¹å‡» `æ–°å»º` ç„¶åæŠŠ `platform-tools` ç›®å½•è·¯å¾„æ·»åŠ è¿›å»

* æ­¤ç›®å½•çš„é»˜è®¤è·¯å¾„ä¸ºï¼š

```
c:\Users\ä½ çš„ç”¨æˆ·å\AppData\Local\Android\Sdk\platform-tools
```

### åˆ›å»ºæ–°é¡¹ç›®

ä½¿ç”¨ `React Native` å‘½ä»¤è¡Œå·¥å…·æ¥åˆ›å»ºä¸€ä¸ªåä¸º `AwesomeProject` çš„æ–°é¡¹ç›®ï¼š

```
react-native init AwesomeProject
```

* ä½ å¯ä»¥ä½¿ç”¨ `--version` å‚æ•°ï¼ˆæ³¨æ„æ˜¯ä¸¤ä¸ªæ ï¼‰åˆ›å»ºæŒ‡å®šç‰ˆæœ¬çš„é¡¹ç›®

  * ä¾‹å¦‚ `react-native init MyApp --version 0.44.3`

  * æ³¨æ„ç‰ˆæœ¬å·å¿…é¡»ç²¾ç¡®åˆ°ä¸¤ä¸ªå°æ•°ç‚¹

> `Windows` ç”¨æˆ·è¯·æ³¨æ„ï¼Œè¯·ä¸è¦åœ¨æŸäº›æƒé™æ•æ„Ÿçš„ç›®å½•ä¾‹å¦‚ `System32` ç›®å½•ä¸­ `init` é¡¹ç›®ï¼›ä¼šæœ‰å„ç§æƒé™é™åˆ¶å¯¼è‡´ä¸èƒ½è¿è¡Œï¼

å¦‚æœä½ æ˜¯æƒ³æŠŠ React Native é›†æˆåˆ°ç°æœ‰çš„åŸç”Ÿé¡¹ç›®ä¸­ï¼Œåˆ™æ­¥éª¤å®Œå…¨ä¸åŒï¼Œ[è¯·å‚è€ƒé›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨](https://reactnative.cn/docs/integration-with-existing-apps)

### å‡†å¤‡ `Android` è®¾å¤‡

ä½ éœ€è¦å‡†å¤‡ä¸€å° `Android` è®¾å¤‡æ¥è¿è¡Œ `React Native Android` åº”ç”¨

**`é‡è¦æç¤º!!!`** è¯·å°½é‡ä½¿ç”¨çœŸæœºæµ‹è¯•ï¼Œä½¿ç”¨ `USB` è¿æ¥ç”µè„‘ï¼Œå¹¶åœ¨è®¾ç½®é‡Œæ‰“å¼€ `USBè°ƒè¯•` é€‰é¡¹ï¼ŒåŠ `USBå®‰è£…` é€‰é¡¹ï¼Œå¦‚æœä½ æœ‰çš„è¯ï¼Œä½†å°ç±³æ‰‹æœºè¯·ä¸€å®šè¦æ‰“å¼€ `USBå®‰è£…` é€‰é¡¹

* è¿™é‡Œæ‰€æŒ‡çš„è®¾å¤‡æ—¢å¯ä»¥æ˜¯çœŸæœºï¼Œä¹Ÿå¯ä»¥æ˜¯æ¨¡æ‹Ÿå™¨

  > åé¢æˆ‘ä»¬æ‰€æœ‰çš„æ–‡æ¡£é™¤éç‰¹åˆ«è¯´æ˜ï¼Œå¹¶ä¸åŒºåˆ†çœŸæœºæˆ–è€…æ¨¡æ‹Ÿå™¨

* `Android` å®˜æ–¹æä¾›äº†åä¸º `Android Virtual Device`ï¼ˆç®€ç§° `AVD` ï¼‰çš„æ¨¡æ‹Ÿå™¨

  * æ­¤å¤–è¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹æä¾›çš„æ¨¡æ‹Ÿå™¨å¦‚ `Genymotion` ã€`BlueStack` ç­‰

    * ä¸€èˆ¬æ¥è¯´å®˜æ–¹æ¨¡æ‹Ÿå™¨å…è´¹ã€åŠŸèƒ½å®Œæ•´ï¼Œä½†æ€§èƒ½è¾ƒå·®

    * ç¬¬ä¸‰æ–¹æ¨¡æ‹Ÿå™¨æ€§èƒ½è¾ƒå¥½ï¼Œä½†å¯èƒ½éœ€è¦ä»˜è´¹ï¼Œæˆ–å¸¦æœ‰å¹¿å‘Š

#### ä½¿ç”¨ `Android` çœŸæœº

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `Android` çœŸæœºæ¥ä»£æ›¿æ¨¡æ‹Ÿå™¨è¿›è¡Œå¼€å‘ï¼Œåªéœ€ç”¨ usb æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘ï¼Œç„¶åéµç…§[ã€åœ¨è®¾å¤‡ä¸Šè¿è¡Œã€‘](https://reactnative.cn/docs/running-on-device)è¿™ç¯‡æ–‡æ¡£çš„è¯´æ˜æ“ä½œå³å¯

#### ä½¿ç”¨ `Android` æ¨¡æ‹Ÿå™¨

ä½ å¯ä»¥ä½¿ç”¨ `Android Studio` æ‰“å¼€é¡¹ç›®ä¸‹çš„ `Android` ç›®å½•ï¼Œç„¶åå¯ä»¥ä½¿ç”¨ `AVD Manager` æ¥æŸ¥çœ‹å¯ç”¨çš„è™šæ‹Ÿè®¾å¤‡ï¼Œå®ƒçš„å›¾æ ‡çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/GettingStartedAndroidStudioAVD.png)

* å¦‚æœä½ åˆšåˆšæ‰å®‰è£… `Android Studio` ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡

* ç‚¹å‡» `Create Virtual Device...` ï¼Œç„¶åé€‰æ‹©æ‰€éœ€çš„è®¾å¤‡ç±»å‹å¹¶ç‚¹å‡» `Next` ï¼Œç„¶åé€‰æ‹© `Pie API Level 28 image`

  * è¯·ä¸è¦è½»æ˜“ç‚¹å‡» `Android Studio` ä¸­å¯èƒ½å¼¹å‡ºçš„å»ºè®®æ›´æ–°é¡¹ç›®ä¸­æŸä¾èµ–é¡¹çš„å»ºè®®ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ— æ³•è¿è¡Œ

  * å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… `HAXM`ï¼ˆ `Intel` è™šæ‹Ÿç¡¬ä»¶åŠ é€Ÿé©±åŠ¨ï¼‰ï¼Œåˆ™å…ˆç‚¹å‡» `Install HAXM` æˆ–æ˜¯æŒ‰[ã€è¿™ç¯‡æ–‡æ¡£è¯´æ˜ã€‘](https://software.intel.com/en-us/android/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-windows)æ¥è¿›è¡Œå®‰è£…

* ç„¶åç‚¹å‡» `Next` å’Œ `Finish` æ¥å®Œæˆè™šæ‹Ÿè®¾å¤‡çš„åˆ›å»º

ç°åœ¨ä½ åº”è¯¥å¯ä»¥ç‚¹å‡»è™šæ‹Ÿè®¾å¤‡æ—çš„ç»¿è‰²ä¸‰è§’æŒ‰é’®æ¥å¯åŠ¨å®ƒäº†ï¼Œå¯åŠ¨å®Œåæˆ‘ä»¬å¯ä»¥å°è¯•è¿è¡Œåº”ç”¨

#### ç¼–è¯‘å¹¶è¿è¡Œ `React Native` åº”ç”¨

ç¡®ä¿ä½ å…ˆè¿è¡Œäº†æ¨¡æ‹Ÿå™¨æˆ–è€…è¿æ¥äº†çœŸæœºï¼Œç„¶ååœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­è¿è¡Œ `react-native run-android` ï¼š

```
cd AwesomeProject
react-native run-android
```

å¦‚æœé…ç½®æ²¡æœ‰é—®é¢˜ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°åº”ç”¨è‡ªåŠ¨å®‰è£…åˆ°è®¾å¤‡ä¸Šå¹¶å¼€å§‹è¿è¡Œ

> æ³¨æ„ï¼šç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éœ€è¦ä¸‹è½½å¤§é‡ç¼–è¯‘ä¾èµ–ï¼Œè€—æ—¶å¯èƒ½æ•°ååˆ†é’Ÿ

> æ­¤è¿‡ç¨‹ä¸¥é‡ä¾èµ–ç¨³å®šçš„ç¿»å¢™å·¥å…·ï¼Œå¦åˆ™å°†é¢‘ç¹é­é‡é“¾æ¥è¶…æ—¶å’Œæ–­å¼€ï¼Œå¯¼è‡´æ— æ³•è¿è¡Œ

å¦‚æœä½ çš„è®¾å¤‡çš„ `Android` ç‰ˆæœ¬ä½äº `5.0` ï¼Œåˆ™å¯èƒ½åœ¨è¿è¡Œæ—¶çœ‹åˆ°çº¢å±ï¼Œè¯·é˜…è¯»[ã€åœ¨è®¾å¤‡ä¸Šè¿è¡Œã€‘](https://reactnative.cn/docs/running-on-device)è¿™ç¯‡æ–‡æ¡£æ¥æŒ‰ç…§æ­¥éª¤è§£å†³

![å›¾ç‰‡](https://reactnative.cn/docs/assets/GettingStartedAndroidSuccessWindows.png)

* `react-native run-android` åªæ˜¯è¿è¡Œåº”ç”¨çš„æ–¹å¼ä¹‹ä¸€

* ä½ ä¹Ÿå¯ä»¥åœ¨ `Android Studio` æˆ–æ˜¯ `Nuclide` ä¸­ç›´æ¥è¿è¡Œåº”ç”¨

> å»ºè®®åœ¨ `run-android` æˆåŠŸåå†å°è¯•ä½¿ç”¨ `Android Studio` å¯åŠ¨

* ä¸¤æ¬¡æé†’ï¼šè¯·ä¸è¦è½»æ˜“ç‚¹å‡» `Android Studio` ä¸­å¯èƒ½å¼¹å‡ºçš„å»ºè®®æ›´æ–°é¡¹ç›®ä¸­æŸä¾èµ–é¡¹çš„å»ºè®®ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ— æ³•è¿è¡Œ

* å¦‚æœä½ æ— æ³•æ­£å¸¸è¿è¡Œï¼Œé‡åˆ°å¥‡å¥‡æ€ªæ€ªçš„çº¢å±é”™è¯¯ï¼Œå…ˆå›å¤´ä»”ç»†å¯¹ç…§æ–‡æ¡£æ£€æŸ¥ï¼Œç„¶åå¯ä»¥çœ‹çœ‹è®ºå›çš„[ã€æ±‚åŠ©ä¸“åŒºã€‘](http://bbs.reactnative.cn/category/4)

  * ä¸åŒæ—¶æœŸä¸åŒç‰ˆæœ¬å¯èƒ½ä¼šç¢°åˆ°ä¸åŒçš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨è®ºå›ä¸­åŠæ—¶è§£ç­”æ›´æ–°

* è¯·æ³¨æ„ï¼šåƒä¸‡ä¸è¦æ‰§è¡Œ `bundle` å‘½ä»¤ï¼Œé‚£æ ·ä¼šå¯¼è‡´ä»£ç å®Œå…¨æ— æ³•åˆ·æ–°

#### ä¿®æ”¹é¡¹ç›®

ç°åœ¨ä½ å·²ç»æˆåŠŸè¿è¡Œäº†é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å°è¯•åŠ¨æ‰‹æ”¹ä¸€æ”¹äº†ï¼š

* ä½¿ç”¨ä½ å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ `App.js` å¹¶éšä¾¿æ”¹ä¸Šå‡ è¡Œ

* æŒ‰ä¸¤ä¸‹ `R` é”®ï¼Œæˆ–æ˜¯åœ¨å¼€å‘è€…èœå•ä¸­é€‰æ‹© `Reload JS` ï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ çš„æœ€æ–°ä¿®æ”¹

#### å®Œæˆäº†ï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸè¿è¡Œå¹¶ä¿®æ”¹äº†ä½ çš„ç¬¬ä¸€ä¸ª React Native åº”ç”¨

![å›¾ç‰‡](https://reactnative.cn/docs/assets/GettingStartedCongratulations.png)

### æ¥ä¸‹æ¥ï¼Ÿ

* è¯•ç€åœ¨å¼€å‘è€…èœå•ä¸­æ‰“å¼€ `Live Reload` ï¼Œç°åœ¨ä½ åªè¦ä¸€ä¿å­˜ä»£ç åº”ç”¨å°±ä¼šè‡ªåŠ¨å®Œæ•´åˆ·æ–°

* å¦‚æœä½ æƒ³æŠŠ `React Native` é›†æˆåˆ°ç°æœ‰çš„åŸç”Ÿé¡¹ç›®ä¸­ï¼Œåˆ™è¯·å‚è€ƒ[ã€é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨ã€‘](https://reactnative.cn/docs/integration-with-existing-apps)

å¦‚æœä½ æƒ³ä»å¤´å¼€å§‹å­¦ä¹  `React Native` å¼€å‘ï¼Œå¾€ä¸‹ç¿»é˜…ä»ä¸‹ä¸€èŠ‚å¼€å§‹å°±å¯ä»¥äº†

## ç¤ºä¾‹æ•™ç¨‹ï¼š`Hello World`

> `React Native` çœ‹èµ·æ¥å¾ˆåƒ `React` ï¼Œåªä¸è¿‡å…¶åŸºç¡€ç»„ä»¶æ˜¯åŸç”Ÿç»„ä»¶è€Œé `web` ç»„ä»¶

è¦ç†è§£ `React Native` åº”ç”¨çš„åŸºæœ¬ç»“æ„ï¼Œé¦–å…ˆéœ€è¦äº†è§£ä¸€äº›åŸºæœ¬çš„ `React` çš„æ¦‚å¿µï¼Œæ¯”å¦‚ `JSX` è¯­æ³•ã€ç»„ä»¶ã€`state` çŠ¶æ€ä»¥åŠ `props` å±æ€§

### `Hello World`

æ ¹æ®å†å²æ‚ ä¹…çš„ `ä¼ ç»Ÿ` ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å†™ä¸€ä¸ª `Hello, world!` ï¼š

```jsx
import React, { Component } from 'react';
import { Text, View } from 'react-native';

export default class HelloWorldApp extends Component {
  render() {
    return (
      <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>
        <Text>Hello, world!</Text>
      </View>
    )
  }
}
```

* ä½ å¯ä»¥æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åç”¨ä¸Šé¢çš„ä»£ç è¦†ç›–ä½ çš„ `App.js` æ–‡ä»¶ï¼Œç„¶åè¿è¡Œçœ‹çœ‹

  ```
  Hello, world!
  ```

* é‚£è¿™æ®µä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

  åˆçœ‹è¿™æ®µä»£ç ï¼Œå¯èƒ½è§‰å¾—å¹¶ä¸åƒ `JavaScript` ï¼›æ²¡é”™ï¼Œè¿™å°±æ˜¯ `æœªæ¥` çš„ `JavaScript`

  * é¦–å…ˆä½ éœ€è¦äº†è§£ `ES2015` ï¼ˆä¹Ÿå«ä½œ `ES6` ï¼‰â€”â€”è¿™æ˜¯ä¸€å¥—å¯¹ `JavaScript` çš„è¯­æ³•æ”¹è¿›çš„å®˜æ–¹æ ‡å‡†

  * `React Native` å†…ç½®äº†å¯¹ `ES2015` æ ‡å‡†çš„æ”¯æŒï¼Œä½ å¯ä»¥æ”¾å¿ƒä½¿ç”¨è€Œæ— éœ€æ‹…å¿ƒå…¼å®¹æ€§é—®é¢˜

  * å¦‚æœä½ ä¸ç†Ÿæ‚‰ `ES2015` çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹[é˜®ä¸€å³°è€å¸ˆçš„ä¹¦](http://es6.ruanyifeng.com/)ï¼Œè¿˜æœ‰è®ºå›çš„è¿™ç¯‡[æ€»ç»“](http://bbs.reactnative.cn/topic/15)

* ç¤ºä¾‹ä¸­çš„è¿™ä¸€è¡Œ `<View><Text>Hello world!</Text></View>` ææ€•å¾ˆå¤šäººçœ‹èµ·æ¥ä¹Ÿè§‰å¾—é™Œç”Ÿ

  * è¿™å«åš `JSX` ï¼Œæ˜¯ä¸€ç§åœ¨ `JavaScript` ä¸­åµŒå…¥ `XML` ç»“æ„çš„è¯­æ³•

  * å¾ˆå¤šä¼ ç»Ÿçš„åº”ç”¨æ¡†æ¶ä¼šè®¾è®¡è‡ªæœ‰çš„æ¨¡æ¿è¯­æ³•ï¼Œè®©ä½ åœ¨ç»“æ„æ ‡è®°ä¸­åµŒå…¥ä»£ç 

  * `React` åå…¶é“è€Œè¡Œä¹‹ï¼Œè®¾è®¡çš„ `JSX` è¯­æ³•å´æ˜¯è®©ä½ åœ¨ä»£ç ä¸­åµŒå…¥ç»“æ„æ ‡è®°

  * åˆçœ‹èµ·æ¥ï¼Œè¿™ç§å†™æ³•å¾ˆåƒ `web` ä¸Šçš„ `HTML` ï¼Œåªä¸è¿‡ä½¿ç”¨çš„å¹¶ä¸æ˜¯ `web` ä¸Šå¸¸è§çš„æ ‡ç­¾å¦‚ `<div>` æˆ–æ˜¯ `<span>` ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ `React Native` çš„ç»„ä»¶

* ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œä½¿ç”¨çš„æ˜¯å†…ç½®çš„ `<Text>` ç»„ä»¶ï¼Œå®ƒä¸“é—¨ç”¨æ¥æ˜¾ç¤ºæ–‡æœ¬ï¼Œè€Œ `<View>` å°±ç±»ä¼¼ `html` ä¸­çš„ `div` æˆ–æ˜¯ `span` è¿™æ ·çš„å®¹å™¨

### ç»„ä»¶

> ä¸ŠèŠ‚çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º `HelloWorldApp` çš„æ–°çš„ç»„ä»¶ï¼ˆ `Component` ï¼‰

* ä¸€ä¸ª `App` çš„æœ€ç»ˆç•Œé¢ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å„å¼å„æ ·çš„ç»„ä»¶çš„ç»„åˆ

* ç»„ä»¶æœ¬èº«ç»“æ„å¯ä»¥éå¸¸ç®€å•

  * å”¯ä¸€å¿…é¡»çš„å°±æ˜¯åœ¨ `render` æ–¹æ³•ä¸­è¿”å›ä¸€äº›ç”¨äºæ¸²æŸ“ç»“æ„çš„ `JSX` è¯­å¥

### å°ç»“

å¯ä»¥çœ‹çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚äº›çš„[ã€`ç”µå½±åˆ—è¡¨`ã€‘](https://reactnative.cn/docs/sample-application-movies)ä¾‹å­

## `Props` å±æ€§

> å¤§å¤šæ•°ç»„ä»¶åœ¨åˆ›å»ºæ—¶å°±å¯ä»¥ä½¿ç”¨å„ç§å‚æ•°æ¥è¿›è¡Œå®šåˆ¶ï¼›ç”¨äºå®šåˆ¶çš„è¿™äº›å‚æ•°å°±ç§°ä¸º `props` å±æ€§

ä»¥å¸¸è§çš„åŸºç¡€ç»„ä»¶ `Image` ä¸ºä¾‹ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªå›¾ç‰‡æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªåä¸º `source` çš„ `prop` æ¥æŒ‡å®šè¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„åœ°å€ï¼Œä»¥åŠä½¿ç”¨åä¸º `style` çš„ `prop` æ¥æ§åˆ¶å…¶å°ºå¯¸

```jsx
import React, { Component } from 'react';
import { Image } from 'react-native';

export default class Bananas extends Component {
  render() {
    let pic = {
      uri: 'https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg'
    };
    return (
      <Image source={pic} style={{width: 193, height: 110}} />
    );
  }
}
```

> æ³¨æ„ï¼šåœ¨ `iOS` ä¸Šä½¿ç”¨ `http` é“¾æ¥çš„å›¾ç‰‡åœ°å€å¯èƒ½ä¸ä¼šæ˜¾ç¤ºï¼Œå‚è§è¿™ç¯‡[è¯´æ˜ä¿®æ”¹](https://segmentfault.com/a/1190000002933776)

è¯·æ³¨æ„ `{pic}` å¤–å›´æœ‰ä¸€å±‚æ‹¬å·ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ‹¬å·æ¥æŠŠ `pic` è¿™ä¸ªå˜é‡åµŒå…¥åˆ° `JSX` è¯­å¥ä¸­

* æ‹¬å·çš„æ„æ€æ˜¯æ‹¬å·å†…éƒ¨ä¸ºä¸€ä¸ª `JavaScript` å˜é‡æˆ–è¡¨è¾¾å¼ï¼Œéœ€è¦æ‰§è¡Œåå–å€¼

* æˆ‘ä»¬å¯ä»¥æŠŠä»»æ„åˆæ³•çš„ `JavaScript` è¡¨è¾¾å¼é€šè¿‡æ‹¬å·åµŒå…¥åˆ° `JSX` è¯­å¥ä¸­

è‡ªå®šä¹‰çš„ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ `props` ï¼š

* é€šè¿‡åœ¨ä¸åŒçš„åœºæ™¯ä½¿ç”¨ä¸åŒçš„å±æ€§å®šåˆ¶ï¼Œå¯ä»¥å°½é‡æé«˜è‡ªå®šä¹‰ç»„ä»¶çš„å¤ç”¨èŒƒç•´

* åªéœ€åœ¨ `render` å‡½æ•°ä¸­å¼•ç”¨ `this.props` ï¼Œç„¶åæŒ‰éœ€å¤„ç†å³å¯

```jsx
import React, { Component } from 'react';
import { Text, View } from 'react-native';

class Greeting extends Component {
  render() {
    return (
      <View style={{alignItems: 'center'}}>
        <Text>Hello {this.props.name}!</Text>
      </View>
    );
  }
}

export default class LotsOfGreetings extends Component {
  render() {
    return (
      <View style={{alignItems: 'center'}}>
        <Greeting name='Rexxar' />
        <Greeting name='Jaina' />
        <Greeting name='Valeera' />
      </View>
    );
  }
}
```

* æˆ‘ä»¬åœ¨ `Greeting` ç»„ä»¶ä¸­å°† `name` ä½œä¸ºä¸€ä¸ªå±æ€§æ¥å®šåˆ¶ï¼Œè¿™æ ·å¯ä»¥å¤ç”¨è¿™ä¸€ç»„ä»¶æ¥åˆ¶ä½œå„ç§ä¸åŒçš„ `é—®å€™è¯­`

  * ä¸Šé¢çš„ä¾‹å­æŠŠ `Greeting` ç»„ä»¶å†™åœ¨ `JSX` è¯­å¥ä¸­ï¼Œç”¨æ³•å’Œå†…ç½®ç»„ä»¶å¹¶æ— äºŒè‡´

* ä¸Šé¢çš„ä¾‹å­å‡ºç°äº†ä¸€æ ·æ–°çš„åä¸º `View` çš„ç»„ä»¶

  * `View` å¸¸ç”¨ä½œå…¶ä»–ç»„ä»¶çš„å®¹å™¨ï¼Œæ¥å¸®åŠ©æ§åˆ¶å¸ƒå±€å’Œæ ·å¼

ä»…ä»…ä½¿ç”¨ `props` å’ŒåŸºç¡€çš„ `Text` ã€`Image` ä»¥åŠ `View` ç»„ä»¶ï¼Œä½ å°±å·²ç»è¶³ä»¥ç¼–å†™å„å¼å„æ ·çš„ `UI` ç»„ä»¶äº†

## `State` çŠ¶æ€

æˆ‘ä»¬ä½¿ç”¨ä¸¤ç§æ•°æ®æ¥æ§åˆ¶ä¸€ä¸ªç»„ä»¶ï¼š

* `props`

  * å®ƒåœ¨çˆ¶ç»„ä»¶ä¸­æŒ‡å®šï¼Œè€Œä¸”ä¸€ç»æŒ‡å®šï¼Œåœ¨è¢«æŒ‡å®šçš„ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­åˆ™ä¸å†æ”¹å˜

* `state`

  * å¯¹äºéœ€è¦æ”¹å˜çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `state`

  * ä¸€èˆ¬æ¥è¯´ï¼Œä½ éœ€è¦åœ¨ `constructor` ä¸­åˆå§‹åŒ– `state` ï¼Œç„¶ååœ¨éœ€è¦ä¿®æ”¹æ—¶è°ƒç”¨ `setState` æ–¹æ³•

    * è¿™æ˜¯ `ES6` çš„å†™æ³•ï¼Œæ—©æœŸçš„å¾ˆå¤š `ES5` çš„ä¾‹å­ä½¿ç”¨çš„æ˜¯ `getInitialState` æ–¹æ³•æ¥åˆå§‹åŒ– `state` ï¼Œè¿™ä¸€åšæ³•ä¼šé€æ¸è¢«æ·˜æ±°

å‡å¦‚æˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€æ®µä¸åœé—ªçƒçš„æ–‡å­—

* æ–‡å­—å†…å®¹æœ¬èº«åœ¨ç»„ä»¶åˆ›å»ºæ—¶å°±å·²ç»æŒ‡å®šå¥½äº†ï¼Œæ‰€ä»¥æ–‡å­—å†…å®¹åº”è¯¥æ˜¯ä¸€ä¸ª `prop`

* è€Œæ–‡å­—çš„æ˜¾ç¤ºæˆ–éšè—çš„çŠ¶æ€ï¼ˆå¿«é€Ÿçš„æ˜¾éšåˆ‡æ¢å°±äº§ç”Ÿäº†é—ªçƒçš„æ•ˆæœï¼‰åˆ™æ˜¯éšç€æ—¶é—´å˜åŒ–çš„ï¼Œå› æ­¤è¿™ä¸€çŠ¶æ€åº”è¯¥å†™åˆ° `state` ä¸­

```jsx
import React, { Component } from 'react';
import { Text, View } from 'react-native';

class Blink extends Component {
  constructor(props) {
    super(props);
    this.state = { isShowingText: true };

    // æ¯1000æ¯«ç§’å¯¹showTextçŠ¶æ€åšä¸€æ¬¡å–åæ“ä½œ
    setInterval(() => {
      this.setState( previousState => {
        return { isShowingText: !previousState.isShowingText };
      });
    }, 1000);
  }

  render() {
    // æ ¹æ®å½“å‰showTextçš„å€¼å†³å®šæ˜¯å¦æ˜¾ç¤ºtextå†…å®¹
    if (!this.state.isShowingText) {
      return null;
    }

    return (
      <Text>{this.props.text}</Text>
    );
  }
}

export default class BlinkApp extends Component {
  render() {
    return (
      <View>
        <Blink text='I love to blink' />
        <Blink text='Yes blinking is so great' />
        <Blink text='Why did they ever take this out of HTML' />
        <Blink text='Look at me look at me look at me' />
      </View>
    );
  }
}
```

å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šåœ¨å®šæ—¶å™¨å‡½æ•°ï¼ˆ `setInterval` ã€`setTimeout` ç­‰ï¼‰ä¸­æ¥æ“ä½œ `state`

* å…¸å‹çš„åœºæ™¯æ˜¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ–°æ•°æ®ï¼Œæˆ–è€…åœ¨ç”¨æˆ·è¾“å…¥æ•°æ®ä¹‹å

* ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº› `çŠ¶æ€å®¹å™¨` æ¯”å¦‚[ã€ `Redux` ã€‘](http://redux.js.org/index.html)æ¥ç»Ÿä¸€ç®¡ç†æ•°æ®æµ

æ¯æ¬¡è°ƒç”¨ `setState` æ—¶ï¼Œ`BlinkApp` éƒ½ä¼šé‡æ–°æ‰§è¡Œ `render` æ–¹æ³•é‡æ–°æ¸²æŸ“

* è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®šæ—¶å™¨æ¥ä¸åœè°ƒç”¨ `setState` ï¼Œäºæ˜¯ç»„ä»¶å°±ä¼šéšç€æ—¶é—´å˜åŒ–ä¸åœåœ°é‡æ–°æ¸²æŸ“

> `State` çš„å·¥ä½œåŸç†å’Œ `React.js` å®Œå…¨ä¸€è‡´ï¼Œæ‰€ä»¥å¯¹äºå¤„ç† `state` çš„ä¸€äº›æ›´æ·±å…¥çš„ç»†èŠ‚ï¼Œä½ å¯ä»¥å‚é˜… [ã€ `React.Component API` ã€‘](https://reactjs.org/docs/react-component.html#setstate)

è¿™é‡Œæç¤ºä¸€äº›åˆå­¦è€…åº”è¯¥ç‰¢è®°çš„è¦ç‚¹ï¼š

* ä¸€åˆ‡ç•Œé¢å˜åŒ–éƒ½æ˜¯ `çŠ¶æ€ state å˜åŒ–`

* `state` çš„ä¿®æ”¹å¿…é¡»é€šè¿‡ `setState()` æ–¹æ³•

  * `this.state.likes = 100`

    è¿™æ ·çš„ç›´æ¥èµ‹å€¼ä¿®æ”¹æ˜¯æ— æ•ˆçš„ï¼

  * `setState` æ˜¯ä¸€ä¸ª `merge` åˆå¹¶æ“ä½œï¼Œåªä¿®æ”¹æŒ‡å®šå±æ€§ï¼Œä¸å½±å“å…¶ä»–å±æ€§

  * `setState` æ˜¯å¼‚æ­¥æ“ä½œï¼Œä¿®æ”¹ä¸ä¼šé©¬ä¸Šç”Ÿæ•ˆ

## æ ·å¼

åœ¨ `React Native` ä¸­ï¼Œä½ å¹¶ä¸éœ€è¦å­¦ä¹ ä»€ä¹ˆç‰¹æ®Šçš„è¯­æ³•æ¥å®šä¹‰æ ·å¼

* æˆ‘ä»¬ä»ç„¶æ˜¯ä½¿ç”¨ `JavaScript` æ¥å†™æ ·å¼

* æ‰€æœ‰çš„æ ¸å¿ƒç»„ä»¶éƒ½æ¥å—åä¸º `style` çš„å±æ€§

* è¿™äº›æ ·å¼ååŸºæœ¬ä¸Šæ˜¯éµå¾ªäº† `web` ä¸Šçš„ `CSS` çš„å‘½å

  * åªæ˜¯æŒ‰ç…§ `JavaScript` çš„è¯­æ³•è¦æ±‚ä½¿ç”¨äº† `é©¼å³°å‘½åæ³•`

  * ä¾‹å¦‚å°† `background-color` æ”¹ä¸º `backgroundColor`

`style` å±æ€§å¯ä»¥æ˜¯ä¸€ä¸ªæ™®é€šçš„ `JavaScript` å¯¹è±¡

* è¿™æ˜¯æœ€ç®€å•çš„ç”¨æ³•ï¼Œå› è€Œåœ¨ç¤ºä¾‹ä»£ç ä¸­å¾ˆå¸¸è§

* ä½ è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„

  * åœ¨æ•°ç»„ä¸­ä½ç½®å±…åçš„æ ·å¼å¯¹è±¡æ¯”å±…å‰çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œè¿™æ ·ä½ å¯ä»¥é—´æ¥å®ç°æ ·å¼çš„ç»§æ‰¿

* å®é™…å¼€å‘ä¸­ç»„ä»¶çš„æ ·å¼ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ `StyleSheet.create` æ¥é›†ä¸­å®šä¹‰ç»„ä»¶çš„æ ·å¼

```jsx
import React, { Component } from 'react';
import { AppRegistry, StyleSheet, Text, View } from 'react-native';

export default class LotsOfStyles extends Component {
  render() {
    return (
      <View>
        <Text style={styles.red}>just red</Text>
        <Text style={styles.bigBlue}>just bigBlue</Text>
        <Text style={[styles.bigBlue, styles.red]}>bigBlue, then red</Text>
        <Text style={[styles.red, styles.bigBlue]}>red, then bigBlue</Text>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  bigBlue: {
    color: 'blue',
    fontWeight: 'bold',
    fontSize: 30,
  },
  red: {
    color: 'red',
  },
});
```

* å¸¸è§çš„åšæ³•æ˜¯æŒ‰é¡ºåºå£°æ˜å’Œä½¿ç”¨ `style` å±æ€§ï¼Œä»¥å€Ÿé‰´ `CSS` ä¸­çš„ `å±‚å ` åšæ³•

  * å³åå£°æ˜çš„å±æ€§ä¼šè¦†ç›–å…ˆå£°æ˜çš„åŒåå±æ€§

* æ–‡æœ¬çš„æ ·å¼å®šä¹‰è¯·å‚é˜…[ã€ `Text` ç»„ä»¶çš„æ–‡æ¡£ã€‘](https://reactnative.cn/docs/text)

## è®¾å®šç»„ä»¶çš„å°ºå¯¸

> ç»„ä»¶çš„é«˜åº¦å’Œå®½åº¦å†³å®šäº†å…¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å°ºå¯¸

### æŒ‡å®šå®½é«˜

æœ€ç®€å•çš„ç»™ç»„ä»¶è®¾å®šå°ºå¯¸çš„æ–¹å¼å°±æ˜¯åœ¨æ ·å¼ä¸­æŒ‡å®šå›ºå®šçš„ `width` å’Œ `height`

> `React Native` ä¸­çš„å°ºå¯¸éƒ½æ˜¯æ— å•ä½çš„ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸è®¾å¤‡åƒç´ å¯†åº¦æ— å…³çš„é€»è¾‘åƒç´ ç‚¹

```jsx
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

export default class FixedDimensionsBasics extends Component {
  render() {
    return (
      <View>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 100, height: 100, backgroundColor: 'skyblue'}} />
        <View style={{width: 150, height: 150, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
}
```

* è¿™æ ·ç»™ç»„ä»¶è®¾ç½®å°ºå¯¸ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å¼ï¼Œæ¯”å¦‚è¦æ±‚åœ¨ä¸åŒå°ºå¯¸çš„å±å¹•ä¸Šéƒ½æ˜¾ç¤ºæˆä¸€æ ·çš„å¤§å°

### å¼¹æ€§ï¼ˆ `Flex` ï¼‰å®½é«˜

> åœ¨ç»„ä»¶æ ·å¼ä¸­ä½¿ç”¨ `flex` å¯ä»¥ä½¿å…¶åœ¨å¯åˆ©ç”¨çš„ç©ºé—´ä¸­åŠ¨æ€åœ°æ‰©å¼ æˆ–æ”¶ç¼©

ä¸€èˆ¬è€Œè¨€æˆ‘ä»¬ä¼šä½¿ç”¨ `flex:1` æ¥æŒ‡å®šæŸä¸ªç»„ä»¶æ‰©å¼ ä»¥æ’‘æ»¡æ‰€æœ‰å‰©ä½™çš„ç©ºé—´

* å¦‚æœæœ‰å¤šä¸ªå¹¶åˆ—çš„å­ç»„ä»¶ä½¿ç”¨äº† `flex:1` ï¼Œåˆ™è¿™äº›å­ç»„ä»¶ä¼šå¹³åˆ†çˆ¶å®¹å™¨ä¸­å‰©ä½™çš„ç©ºé—´

* å¦‚æœè¿™äº›å¹¶åˆ—çš„å­ç»„ä»¶çš„ `flex` å€¼ä¸ä¸€æ ·ï¼Œåˆ™è°çš„å€¼æ›´å¤§ï¼Œè°å æ®å‰©ä½™ç©ºé—´çš„æ¯”ä¾‹å°±æ›´å¤§

  * å³å æ®å‰©ä½™ç©ºé—´çš„æ¯”ç­‰äºå¹¶åˆ—ç»„ä»¶é—´ `flex` å€¼çš„æ¯”

> `æ³¨æ„`ï¼šç»„ä»¶èƒ½å¤Ÿæ’‘æ»¡å‰©ä½™ç©ºé—´çš„å‰ææ˜¯å…¶çˆ¶å®¹å™¨çš„å°ºå¯¸ä¸ä¸ºé›¶

å¦‚æœçˆ¶å®¹å™¨æ—¢æ²¡æœ‰å›ºå®šçš„ `width` å’Œ `height` ï¼Œä¹Ÿæ²¡æœ‰è®¾å®š `flex` ï¼Œåˆ™çˆ¶å®¹å™¨çš„å°ºå¯¸ä¸º `é›¶`

* å…¶å­ç»„ä»¶å¦‚æœä½¿ç”¨äº† `flex` ï¼Œä¹Ÿæ˜¯æ— æ³•æ˜¾ç¤ºçš„

```jsx
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

export default class FlexDimensionsBasics extends Component {
  render() {
    return (
      // è¯•è¯•å»æ‰çˆ¶Viewä¸­çš„`flex: 1`
      // åˆ™çˆ¶Viewä¸å†å…·æœ‰å°ºå¯¸ï¼Œå› æ­¤å­ç»„ä»¶ä¹Ÿæ— æ³•å†æ’‘å¼€
      // ç„¶åå†ç”¨`height: 300`æ¥ä»£æ›¿çˆ¶Viewçš„`flex: 1`è¯•è¯•çœ‹ï¼Ÿ
      <View style={{flex: 1}}>
        <View style={{flex: 1, backgroundColor: 'powderblue'}} />
        <View style={{flex: 2, backgroundColor: 'skyblue'}} />
        <View style={{flex: 3, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
}
```

## ä½¿ç”¨ `Flexbox` å¸ƒå±€

> æˆ‘ä»¬åœ¨ `React Native` ä¸­ä½¿ç”¨ `flexbox` è§„åˆ™æ¥æŒ‡å®šæŸä¸ªç»„ä»¶çš„å­å…ƒç´ çš„å¸ƒå±€ï¼›`Flexbox` å¯ä»¥åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸Šæä¾›ä¸€è‡´çš„å¸ƒå±€ç»“æ„

ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨ `flexDirection` ã€`alignItems` å’Œ `justifyContent` ä¸‰ä¸ªæ ·å¼å±æ€§å°±å·²ç»èƒ½æ»¡è¶³å¤§å¤šæ•°å¸ƒå±€éœ€æ±‚

* è¿™é‡Œæœ‰ä¸€ä»½[ã€ç®€æ˜“å¸ƒå±€å›¾è§£ã€‘](http://weibo.com/1712131295/CoRnElNkZ?ref=collection&type=comment)ï¼Œå¯ä»¥ç»™ä½ ä¸€ä¸ªå¤§æ¦‚çš„å°è±¡

* `React Native` ä¸­çš„ `Flexbox` çš„å·¥ä½œåŸç†å’Œ `web` ä¸Šçš„ `CSS` åŸºæœ¬ä¸€è‡´ï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨å°‘è®¸å·®å¼‚

  * é¦–å…ˆæ˜¯é»˜è®¤å€¼ä¸åŒï¼š

    * `flexDirection` çš„é»˜è®¤å€¼æ˜¯ `column` è€Œä¸æ˜¯ `row`

  * `flex` åªèƒ½æŒ‡å®šä¸€ä¸ªæ•°å­—å€¼

### `Flex Direction`

> åœ¨ç»„ä»¶çš„ `style` ä¸­æŒ‡å®š `flexDirection` å¯ä»¥å†³å®šå¸ƒå±€çš„ä¸»è½´

å­å…ƒç´ æ˜¯åº”è¯¥æ²¿ç€æ°´å¹³è½´( `row` )æ–¹å‘æ’åˆ—ï¼Œè¿˜æ˜¯æ²¿ç€ç«–ç›´è½´( `column` )æ–¹å‘æ’åˆ—å‘¢ï¼Ÿ

* é»˜è®¤å€¼æ˜¯ç«–ç›´è½´( `column` )æ–¹å‘

```jsx
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

export default class FlexDirectionBasics extends Component {
  render() {
    return (
      // å°è¯•æŠŠ`flexDirection`æ”¹ä¸º`column`çœ‹çœ‹
      <View style={{flex: 1, flexDirection: 'row'}}>
        <View style={{width: 50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'skyblue'}} />
        <View style={{width: 50, height: 50, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
}
```

### `Justify Content`

> åœ¨ç»„ä»¶çš„ `style` ä¸­æŒ‡å®š `justifyContent` å¯ä»¥å†³å®šå…¶å­å…ƒç´ æ²¿ç€ä¸»è½´çš„æ’åˆ—æ–¹å¼

å­å…ƒç´ æ˜¯åº”è¯¥é è¿‘ä¸»è½´çš„èµ·å§‹ç«¯è¿˜æ˜¯æœ«å°¾æ®µåˆ†å¸ƒå‘¢ï¼Ÿ

äº¦æˆ–åº”è¯¥å‡åŒ€åˆ†å¸ƒï¼Ÿ

å¯¹åº”çš„è¿™äº›å¯é€‰é¡¹æœ‰ï¼š

* `flex-start`
* `center`
* `flex-end`
* `space-around`
* `space-between`
* `space-evenly` ã€æ…ç”¨ï¼Œå…¼å®¹æ€§è¾ƒå·®ã€‘

### `Align Items`

> åœ¨ç»„ä»¶çš„ `style` ä¸­æŒ‡å®š `alignItems` å¯ä»¥å†³å®šå…¶å­å…ƒç´ æ²¿ç€æ¬¡è½´ï¼ˆä¸ä¸»è½´å‚ç›´çš„è½´ï¼Œæ¯”å¦‚è‹¥ä¸»è½´æ–¹å‘ä¸º `row` ï¼Œåˆ™æ¬¡è½´æ–¹å‘ä¸º `column` ï¼‰çš„æ’åˆ—æ–¹å¼

å­å…ƒç´ æ˜¯åº”è¯¥é è¿‘æ¬¡è½´çš„èµ·å§‹ç«¯è¿˜æ˜¯æœ«å°¾æ®µåˆ†å¸ƒå‘¢ï¼Ÿ

äº¦æˆ–åº”è¯¥å‡åŒ€åˆ†å¸ƒï¼Ÿ

å¯¹åº”çš„è¿™äº›å¯é€‰é¡¹æœ‰ï¼š

* `flex-start`
* `center`
* `flex-end`
* `stretch`

> æ³¨æ„ï¼šè¦ä½¿ `stretch` é€‰é¡¹ç”Ÿæ•ˆçš„è¯ï¼Œå­å…ƒç´ åœ¨æ¬¡è½´æ–¹å‘ä¸Šä¸èƒ½æœ‰å›ºå®šçš„å°ºå¯¸

ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼šåªæœ‰å°†å­å…ƒç´ æ ·å¼ä¸­çš„ `width: 50` å»æ‰ä¹‹åï¼Œ`alignItems: 'stretch'` æ‰èƒ½ç”Ÿæ•ˆ

```jsx
import React, { Component } from 'react';
import { AppRegistry, View } from 'react-native';

export default class AlignItemsBasics extends Component {
  render() {
    return (
      // å°è¯•æŠŠ`alignItems`æ”¹ä¸º`flex-start`çœ‹çœ‹
      // å°è¯•æŠŠ`justifyContent`æ”¹ä¸º`flex-end`çœ‹çœ‹
      // å°è¯•æŠŠ`flexDirection`æ”¹ä¸º`row`çœ‹çœ‹
      <View style={{
        flex: 1,
        flexDirection: 'row',
        justifyContent: 'center',
        // alignItems: 'stretch',
      }}>
        <View style={{width:50, height: 50, backgroundColor: 'powderblue'}} />
        <View style={{width:20, height: 50, backgroundColor: 'skyblue'}} />
        <View style={{height: 100, backgroundColor: 'steelblue'}} />
      </View>
    );
  }
}
```

å¯¹äºå¸ƒå±€æœ‰å½±å“çš„å®Œæ•´æ ·å¼åˆ—è¡¨è®°å½•åœ¨[ã€è¿™ç¯‡æ–‡æ¡£ä¸­ã€‘](https://reactnative.cn/docs/layout-props)

## å¤„ç†æ–‡æœ¬è¾“å…¥

`TextInput` æ˜¯ä¸€ä¸ªå…è®¸ç”¨æˆ·è¾“å…¥æ–‡æœ¬çš„åŸºç¡€ç»„ä»¶ï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§ï¼š

* `onChangeText` å±æ€§

  æ­¤å±æ€§æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ­¤å‡½æ•°ä¼šåœ¨æ–‡æœ¬å˜åŒ–æ—¶è¢«è°ƒç”¨

* `onSubmitEditing` å±æ€§

  ä¼šåœ¨æ–‡æœ¬è¢«æäº¤åï¼ˆç”¨æˆ·æŒ‰ä¸‹è½¯é”®ç›˜ä¸Šçš„æäº¤é”®ï¼‰è°ƒç”¨

å‡å¦‚æˆ‘ä»¬è¦å®ç°å½“ç”¨æˆ·è¾“å…¥æ—¶ï¼Œå®æ—¶å°†å…¶ä»¥å•è¯ä¸ºå•ä½ç¿»è¯‘ä¸ºå¦ä¸€ç§æ–‡å­—

* æˆ‘ä»¬å‡è®¾è¿™å¦ä¸€ç§æ–‡å­—æ¥è‡ªæŸä¸ªåƒè´§æ˜Ÿçƒï¼Œåªæœ‰ä¸€ä¸ªå•è¯ï¼šğŸ•

* æ‰€ä»¥ `Hello there Bob` å°†ä¼šè¢«ç¿»è¯‘ä¸º ğŸ•ğŸ•ğŸ•

```jsx
import React, { Component } from 'react';
import { AppRegistry, Text, TextInput, View } from 'react-native';

export default class PizzaTranslator extends Component {
  constructor(props) {
    super(props);
    this.state = {text: ''};
  }

  render() {
    return (
      <View style={{padding: 10}}>
        <TextInput
          style={{height: 40}}
          placeholder="è¯·è¾“å…¥äº›æ–‡å­—"
          onChangeText={(text) => this.setState({text})}
        />
        <Text style={{padding: 10, fontSize: 42}}>
          {this.state.text.split(' ').map((word) => word && 'ğŸ•').join(' ')}
        </Text>
      </View>
    );
  }
}
```

* åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬æŠŠ `text` ä¿å­˜åˆ° `state` ä¸­ï¼Œå› ä¸ºå®ƒä¼šéšç€æ—¶é—´å˜åŒ–

æ–‡æœ¬è¾“å…¥æ–¹é¢è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ä¸œè¥¿è¦å¤„ç†ï¼š

* æ¯”å¦‚ä½ å¯èƒ½æƒ³è¦åœ¨ç”¨æˆ·è¾“å…¥çš„æ—¶å€™è¿›è¡ŒéªŒè¯ï¼Œåœ¨ `React` ä¸­çš„å—é™ç»„ä»¶ä¸€èŠ‚ä¸­æœ‰ä¸€äº›è¯¦ç»†çš„ç¤ºä¾‹

  * æ³¨æ„ `react` ä¸­çš„ `onChange` å¯¹åº”çš„æ˜¯ `React Native` ä¸­çš„ `onChangeText`

* æ­¤å¤–ä½ è¿˜éœ€è¦çœ‹çœ‹[ã€ `TextInput` çš„æ–‡æ¡£ã€‘](https://reactnative.cn/docs/textinput)

`TextInput` å¯èƒ½æ˜¯å¤©ç„¶å…·æœ‰ `åŠ¨æ€çŠ¶æ€` çš„æœ€ç®€å•çš„ç»„ä»¶äº†

## å¤„ç†è§¦æ‘¸äº‹ä»¶

> ç§»åŠ¨åº”ç”¨ä¸Šçš„ç”¨æˆ·äº¤äº’åŸºæœ¬é  `æ‘¸`

è¿™ä¸ª `æ‘¸` ä¹Ÿæ˜¯æœ‰å„ç§å§¿åŠ¿çš„ï¼š

* åœ¨ä¸€ä¸ªæŒ‰é’®ä¸Šç‚¹å‡»
* åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸Šæ»‘åŠ¨
* æˆ–æ˜¯åœ¨ä¸€ä¸ªåœ°å›¾ä¸Šç¼©æ”¾

`React Native` æä¾›äº†å¯ä»¥å¤„ç†å¸¸è§è§¦æ‘¸æ‰‹åŠ¿ï¼ˆä¾‹å¦‚ç‚¹å‡»æˆ–æ»‘åŠ¨ï¼‰çš„ç»„ä»¶ï¼Œ ä»¥åŠå¯ç”¨äºè¯†åˆ«æ›´å¤æ‚çš„æ‰‹åŠ¿çš„å®Œæ•´çš„[æ‰‹åŠ¿å“åº”ç³»ç»Ÿ](https://reactnative.cn/docs/handling-touches/gesturerespondersystem.md)

### æ˜¾ç¤ºä¸€ä¸ªç®€å•çš„æŒ‰é’®

`Button` æ˜¯ä¸€ä¸ªç®€å•çš„è·¨å¹³å°çš„æŒ‰é’®ç»„ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€ç¤ºä¾‹ï¼š

```jsx
<Button
  onPress={() => {
    Alert.alert("ä½ ç‚¹å‡»äº†æŒ‰é’®ï¼");
  }}
  title="ç‚¹æˆ‘ï¼"
/>
```

* ä¸Šé¢è¿™æ®µä»£ç ä¼šåœ¨ `iOS` ä¸Šæ¸²æŸ“ä¸€ä¸ªè“è‰²çš„æ ‡ç­¾çŠ¶æŒ‰é’®ï¼Œåœ¨ `Android` ä¸Šåˆ™ä¼šæ¸²æŸ“ä¸€ä¸ªè“è‰²åœ†è§’çŸ©å½¢å¸¦ç™½å­—çš„æŒ‰é’®

* ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¼šè°ƒç”¨ `onPress` å‡½æ•°ï¼Œå…·ä½“ä½œç”¨å°±æ˜¯æ˜¾ç¤ºä¸€ä¸ª `alert` å¼¹å‡ºæ¡†

* ä½ è¿˜å¯ä»¥æŒ‡å®š `color` å±æ€§æ¥ä¿®æ”¹æŒ‰é’®çš„é¢œè‰²

![å›¾ç‰‡](https://reactnative.cn/docs/assets/Button.png)

è¯•è¯•ä¸‹é¢è¿™ä¸ªä½¿ç”¨Buttonçš„ä¾‹å­ï¼š

```jsx
import React, { Component } from 'react';
import { Alert, AppRegistry, Button, StyleSheet, View } from 'react-native';

export default class ButtonBasics extends Component {
  _onPressButton() {
    Alert.alert('You tapped the button!')
  }

  render() {
    return (
      <View style={styles.container}>
        <View style={styles.buttonContainer}>
          <Button
            onPress={this._onPressButton}
            title="Press Me"
          />
        </View>
        <View style={styles.buttonContainer}>
          <Button
            onPress={this._onPressButton}
            title="Press Me"
            color="#841584"
          />
        </View>
        <View style={styles.alternativeLayoutButtonContainer}>
          <Button
            onPress={this._onPressButton}
            title="This looks great!"
          />
          <Button
            onPress={this._onPressButton}
            title="OK!"
            color="#841584"
          />
        </View>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
   flex: 1,
   justifyContent: 'center',
  },
  buttonContainer: {
    margin: 20
  },
  alternativeLayoutButtonContainer: {
    margin: 20,
    flexDirection: 'row',
    justifyContent: 'space-between'
  }
})

// skip this line if using Create React Native App
AppRegistry.registerComponent('AwesomeProject', () => ButtonBasics);
```

### `Touchable` ç³»åˆ—ç»„ä»¶

> è¿™ä¸ªç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„

å¦‚æœå®ƒçš„å¤–è§‚å¹¶ä¸æ€ä¹ˆæ­é…ä½ çš„è®¾è®¡ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨ `TouchableOpacity` æˆ–æ˜¯ `TouchableNativeFeedback` ç»„ä»¶æ¥å®šåˆ¶è‡ªå·±æ‰€éœ€è¦çš„æŒ‰é’®

* è§†é¢‘æ•™ç¨‹[ã€å¦‚ä½•åˆ¶ä½œä¸€ä¸ªæŒ‰é’®ã€‘](http://v.youku.com/v_show/id_XMTQ5OTE3MjkzNg==.html?f=26822355&from=y1.7-1.3)è®²è¿°äº†å®Œæ•´çš„è¿‡ç¨‹

* æˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨ `github.com` ç½‘ç«™ä¸Šæœç´¢ `react native button` æ¥çœ‹çœ‹ç¤¾åŒºå…¶ä»–äººçš„ä½œå“

å…·ä½“ä½¿ç”¨å“ªç§ç»„ä»¶ï¼Œå–å†³äºä½ å¸Œæœ›ç»™ç”¨æˆ·ä»€ä¹ˆæ ·çš„è§†è§‰åé¦ˆï¼š

* ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨[ã€ `TouchableHighlight` ã€‘](https://reactnative.cn/docs/touchablehighlight)æ¥åˆ¶ä½œæŒ‰é’®æˆ–è€…é“¾æ¥

  * æ³¨æ„æ­¤ç»„ä»¶çš„èƒŒæ™¯ä¼šåœ¨ç”¨æˆ·æ‰‹æŒ‡æŒ‰ä¸‹æ—¶å˜æš—

* åœ¨ `Android` ä¸Šè¿˜å¯ä»¥ä½¿ç”¨[ã€ `TouchableNativeFeedback` ã€‘](https://reactnative.cn/docs/touchablenativefeedback)ï¼Œå®ƒä¼šåœ¨ç”¨æˆ·æ‰‹æŒ‡æŒ‰ä¸‹æ—¶å½¢æˆç±»ä¼¼å¢¨æ°´æ¶Ÿæ¼ªçš„è§†è§‰æ•ˆæœ

* [ã€ `TouchableOpacity` ã€‘](https://reactnative.cn/docs/touchableopacity)ä¼šåœ¨ç”¨æˆ·æ‰‹æŒ‡æŒ‰ä¸‹æ—¶é™ä½æŒ‰é’®çš„é€æ˜åº¦ï¼Œè€Œä¸ä¼šæ”¹å˜èƒŒæ™¯çš„é¢œè‰²

* å¦‚æœä½ æƒ³åœ¨å¤„ç†ç‚¹å‡»äº‹ä»¶çš„åŒæ—¶ä¸æ˜¾ç¤ºä»»ä½•è§†è§‰åé¦ˆï¼Œåˆ™éœ€è¦ä½¿ç”¨[ã€ `TouchableWithoutFeedback` ã€‘](https://reactnative.cn/docs/touchablewithoutfeedback)

* æŸäº›åœºæ™¯ä¸­ä½ å¯èƒ½éœ€è¦æ£€æµ‹ç”¨æˆ·æ˜¯å¦è¿›è¡Œäº†é•¿æŒ‰æ“ä½œ

  * å¯ä»¥åœ¨ä¸Šé¢åˆ—å‡ºçš„ä»»æ„ç»„ä»¶ä¸­ä½¿ç”¨ `onLongPress` å±æ€§æ¥å®ç°

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹ï¼š

```jsx
import React, { Component } from 'react';
import { Alert, AppRegistry, Platform, StyleSheet, Text, TouchableHighlight, TouchableOpacity, TouchableNativeFeedback, TouchableWithoutFeedback, View } from 'react-native';

export default class Touchables extends Component {
  _onPressButton() {
    Alert.alert('You tapped the button!')
  }

  _onLongPressButton() {
    Alert.alert('You long-pressed the button!')
  }


  render() {
    return (
      <View style={styles.container}>
        <TouchableHighlight onPress={this._onPressButton} underlayColor="white">
          <View style={styles.button}>
            <Text style={styles.buttonText}>TouchableHighlight</Text>
          </View>
        </TouchableHighlight>
        <TouchableOpacity onPress={this._onPressButton}>
          <View style={styles.button}>
            <Text style={styles.buttonText}>TouchableOpacity</Text>
          </View>
        </TouchableOpacity>
        <TouchableNativeFeedback
            onPress={this._onPressButton}
            background={Platform.OS === 'android' ? TouchableNativeFeedback.SelectableBackground() : ''}>
          <View style={styles.button}>
            <Text style={styles.buttonText}>TouchableNativeFeedback</Text>
          </View>
        </TouchableNativeFeedback>
        <TouchableWithoutFeedback
            onPress={this._onPressButton}
            >
          <View style={styles.button}>
            <Text style={styles.buttonText}>TouchableWithoutFeedback</Text>
          </View>
        </TouchableWithoutFeedback>
        <TouchableHighlight onPress={this._onPressButton} onLongPress={this._onLongPressButton} underlayColor="white">
          <View style={styles.button}>
            <Text style={styles.buttonText}>Touchable with Long Press</Text>
          </View>
        </TouchableHighlight>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    paddingTop: 60,
    alignItems: 'center'
  },
  button: {
    marginBottom: 30,
    width: 260,
    alignItems: 'center',
    backgroundColor: '#2196F3'
  },
  buttonText: {
    padding: 20,
    color: 'white'
  }
})
```

## ä½¿ç”¨æ»šåŠ¨è§†å›¾

> `ScrollView` æ˜¯ä¸€ä¸ªé€šç”¨çš„å¯æ»šåŠ¨çš„å®¹å™¨ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥å¤šä¸ªç»„ä»¶å’Œè§†å›¾ï¼Œè€Œä¸”è¿™äº›ç»„ä»¶å¹¶ä¸éœ€è¦æ˜¯åŒç±»å‹çš„

`ScrollView` ä¸ä»…å¯ä»¥å‚ç›´æ»šåŠ¨ï¼Œè¿˜èƒ½æ°´å¹³æ»šåŠ¨ï¼ˆé€šè¿‡ `horizontal` å±æ€§æ¥è®¾ç½®ï¼‰

* ä¸‹é¢çš„ç¤ºä¾‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ªå‚ç›´æ»šåŠ¨çš„ `ScrollView` ï¼Œå…¶ä¸­è¿˜æ··æ‚äº†å›¾ç‰‡å’Œæ–‡å­—ç»„ä»¶

```jsx
import React, { Component } from 'react';
import { AppRegistry, ScrollView, Image, Text } from 'react-native';

export default class IScrolledDownAndWhatHappenedNextShockedMe extends Component {
  render() {
      return (
        <ScrollView>
          <Text style={{fontSize:96}}>Scroll me plz</Text>
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Text style={{fontSize:96}}>If you like</Text>
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Text style={{fontSize:96}}>Scrolling down</Text>
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Text style={{fontSize:96}}>What's the best</Text>
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Text style={{fontSize:96}}>Framework around?</Text>
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Image source={{uri: "https://facebook.github.io/react-native/img/favicon.png", width: 64, height: 64}} />
          <Text style={{fontSize:80}}>React Native</Text>
        </ScrollView>
    );
  }
}
```

* å¯ä»¥å°†æ»šåŠ¨è§†å›¾é…ç½®ä¸ºå…è®¸ä½¿ç”¨æ»‘åŠ¨ï¼Œé€šè¿‡ `pagingabled` å±æ€§åœ¨è§†å›¾ä¸­è¿›è¡Œåˆ†é¡µ

  * åœ¨è§†å›¾ä¹‹é—´æ°´å¹³æ»‘åŠ¨ä¹Ÿå¯ä»¥ä½¿ç”¨ `viewpagerandroid` ç»„ä»¶åœ¨ `Android` ä¸Šå®ç°

* å¸¦æœ‰å•ä¸ªé¡¹ç›®çš„æ»šåŠ¨è§†å›¾å¯ç”¨äºå…è®¸ç”¨æˆ·ç¼©æ”¾å†…å®¹

  * è®¾ç½® `MaximumZoomScale` å’Œ `MinimumZoomScale` é“å…·ï¼Œæ‚¨çš„ç”¨æˆ·å°†èƒ½å¤Ÿä½¿ç”¨æ”¶ç¼©å’Œå±•å¼€æ‰‹åŠ¿æ¥æ”¾å¤§å’Œç¼©å°

`ScrollView` é€‚åˆç”¨æ¥æ˜¾ç¤ºæ•°é‡ä¸å¤šçš„æ»šåŠ¨å…ƒç´ 

* æ”¾ç½®åœ¨ `ScrollView` ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œå“ªæ€•æœ‰äº›ç»„ä»¶å› ä¸ºå†…å®¹å¤ªé•¿è¢«æŒ¤å‡ºäº†å±å¹•å¤–

* å¦‚æœä½ éœ€è¦æ˜¾ç¤ºè¾ƒé•¿çš„æ»šåŠ¨åˆ—è¡¨ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨åŠŸèƒ½å·®ä¸å¤šä½†æ€§èƒ½æ›´å¥½çš„ `FlatList` ç»„ä»¶

## ä½¿ç”¨é•¿åˆ—è¡¨

`React Native` æä¾›äº†å‡ ä¸ªé€‚ç”¨äºå±•ç¤ºé•¿åˆ—è¡¨æ•°æ®çš„ç»„ä»¶ï¼Œä¸€èˆ¬è€Œè¨€æˆ‘ä»¬ä¼šé€‰ç”¨ï¼š

* `FlatList`

* `SectionList`

### `FlatList` ç»„ä»¶

ç”¨äºæ˜¾ç¤ºä¸€ä¸ªå‚ç›´çš„æ»šåŠ¨åˆ—è¡¨ï¼Œå…¶ä¸­çš„å…ƒç´ ä¹‹é—´ç»“æ„è¿‘ä¼¼è€Œä»…æ•°æ®ä¸åŒ

* `FlatList` æ›´é€‚äºé•¿åˆ—è¡¨æ•°æ®ï¼Œä¸”å…ƒç´ ä¸ªæ•°å¯ä»¥å¢åˆ 

  * å’Œ `ScrollView` ä¸åŒçš„æ˜¯ï¼Œ`FlatList` å¹¶ä¸ç«‹å³æ¸²æŸ“æ‰€æœ‰å…ƒç´ ï¼Œè€Œæ˜¯ä¼˜å…ˆæ¸²æŸ“å±å¹•ä¸Šå¯è§çš„å…ƒç´ 

* `FlatList` ç»„ä»¶å¿…é¡»çš„ä¸¤ä¸ªå±æ€§æ˜¯ï¼š

  * `data`

    `data` æ˜¯åˆ—è¡¨çš„æ•°æ®æº

  * `renderItem`

    `renderItem` ä»æ•°æ®æºä¸­é€ä¸ªè§£ææ•°æ®ï¼Œç„¶åè¿”å›ä¸€ä¸ªè®¾å®šå¥½æ ¼å¼çš„ç»„ä»¶æ¥æ¸²æŸ“

ä¸‹é¢çš„ä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ `FlatList` ï¼Œå¹¶é¢„è®¾äº†ä¸€äº›æ¨¡æ‹Ÿæ•°æ®ï¼š

* é¦–å…ˆæ˜¯åˆå§‹åŒ– `FlatList` æ‰€éœ€çš„ `data` ï¼Œå…¶ä¸­çš„æ¯ä¸€é¡¹ï¼ˆè¡Œï¼‰æ•°æ®ä¹‹åéƒ½åœ¨ `renderItem` ä¸­è¢«æ¸²æŸ“æˆäº† `Text` ç»„ä»¶ï¼Œæœ€åæ„æˆæ•´ä¸ª `FlatList`

```jsx
import React, { Component } from 'react';
import { FlatList, StyleSheet, Text, View } from 'react-native';

export default class FlatListBasics extends Component {
  render() {
    return (
      <View style={styles.container}>
        <FlatList
          data={[
            {key: 'Devin'},
            {key: 'Jackson'},
            {key: 'James'},
            {key: 'Joel'},
            {key: 'John'},
            {key: 'Jillian'},
            {key: 'Jimmy'},
            {key: 'Julie'},
          ]}
          renderItem={({item}) => <Text style={styles.item}>{item.key}</Text>}
        />
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
   flex: 1,
   paddingTop: 22
  },
  item: {
    padding: 10,
    fontSize: 18,
    height: 44,
  }
})
```

å¦‚æœè¦æ¸²æŸ“çš„æ˜¯ä¸€ç»„éœ€è¦åˆ†ç»„çš„æ•°æ®ï¼Œä¹Ÿè®¸è¿˜å¸¦æœ‰åˆ†ç»„æ ‡ç­¾çš„ï¼Œé‚£ä¹ˆ `SectionList` å°†æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼š

```jsx
import React, { Component } from 'react';
import { SectionList, StyleSheet, Text, View } from 'react-native';

export default class SectionListBasics extends Component {
  render() {
    return (
      <View style={styles.container}>
        <SectionList
          sections={[
            {title: 'D', data: ['Devin']},
            {title: 'J', data: ['Jackson', 'James', 'Jillian', 'Jimmy', 'Joel', 'John', 'Julie']},
          ]}
          renderItem={({item}) => <Text style={styles.item}>{item}</Text>}
          renderSectionHeader={({section}) => <Text style={styles.sectionHeader}>{section.title}</Text>}
          keyExtractor={(item, index) => index}
        />
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
   flex: 1,
   paddingTop: 22
  },
  sectionHeader: {
    paddingTop: 2,
    paddingLeft: 10,
    paddingRight: 10,
    paddingBottom: 2,
    fontSize: 14,
    fontWeight: 'bold',
    backgroundColor: 'rgba(247,247,247,1.0)',
  },
  item: {
    padding: 10,
    fontSize: 18,
    height: 44,
  },
})
```

## ç½‘ç»œ

> å¾ˆå¤šç§»åŠ¨åº”ç”¨éƒ½éœ€è¦ä»è¿œç¨‹åœ°å€ä¸­è·å–æ•°æ®æˆ–èµ„æº

ä½ å¯èƒ½éœ€è¦ç»™æŸä¸ª `REST API` å‘èµ· `POST` è¯·æ±‚ä»¥æäº¤ç”¨æˆ·æ•°æ®ï¼Œåˆæˆ–è€…å¯èƒ½ä»…ä»…éœ€è¦ä»æŸä¸ªæœåŠ¡å™¨ä¸Šè·å–ä¸€äº›é™æ€å†…å®¹ï¼Œæ–°æ‰‹å¯ä»¥å¯¹ç…§è¿™ä¸ª[ã€ç®€çŸ­çš„è§†é¢‘æ•™ç¨‹ã€‘](http://v.youku.com/v_show/id_XMTUyNTEwMTA5Ng==.html)åŠ æ·±ç†è§£

### ä½¿ç”¨ `Fetch`

> `React Native` æä¾›äº†å’Œ `web` æ ‡å‡†ä¸€è‡´çš„ `Fetch API` ï¼Œç”¨äºæ»¡è¶³å¼€å‘è€…è®¿é—®ç½‘ç»œçš„éœ€æ±‚

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ `XMLHttpRequest` (å³ä¿—ç§°çš„ `ajax` )æˆ–æ˜¯å…¶ä»–çš„ç½‘ç»œ `API` ï¼Œé‚£ä¹ˆ `Fetch` ç”¨èµ·æ¥å°†ä¼šç›¸å½“å®¹æ˜“ä¸Šæ‰‹

* è¿™ç¯‡æ–‡æ¡£åªä¼šåˆ—å‡º `Fetch` çš„åŸºæœ¬ç”¨æ³•ï¼Œå¹¶ä¸ä¼šè®²è¿°å¤ªå¤šç»†èŠ‚

* ä½ å¯ä»¥ä½¿ç”¨ä½ å–œæ¬¢çš„æœç´¢å¼•æ“å»æœç´¢ `fetch api` å…³é”®å­—ä»¥äº†è§£æ›´å¤šä¿¡æ¯

#### å‘èµ·è¯·æ±‚

è¦ä»ä»»æ„åœ°å€è·å–å†…å®¹çš„è¯ï¼Œåªéœ€ç®€å•åœ°å°†ç½‘å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `fetch` æ–¹æ³•å³å¯ï¼ˆ `fetch` è¿™ä¸ªè¯æœ¬èº«ä¹Ÿå°±æ˜¯è·å–çš„æ„æ€ï¼‰ï¼š

```jsx
fetch('https://mywebsite.com/mydata.json');
```

* `Fetch` è¿˜æœ‰å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨æ¥å®šåˆ¶ `HTTP` è¯·æ±‚ä¸€äº›å‚æ•°ï¼š

  * ä½ å¯ä»¥æŒ‡å®š `header` å‚æ•°

  * æˆ–æ˜¯æŒ‡å®šä½¿ç”¨ `POST` æ–¹æ³•

  * åˆæˆ–æ˜¯æäº¤æ•°æ®ç­‰ç­‰

```jsx
fetch('https://mywebsite.com/endpoint/', {
  method: 'POST',
  headers: {
    Accept: 'application/json',
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    firstParam: 'yourValue',
    secondParam: 'yourOtherValue',
  }),
});
```

* æäº¤æ•°æ®çš„æ ¼å¼å…³é”®å–å†³äº `headers` ä¸­çš„ `Content-Type`

  * `Content-Type` æœ‰å¾ˆå¤šç§ï¼Œå¯¹åº” `body` çš„æ ¼å¼ä¹Ÿæœ‰åŒºåˆ«

  * åˆ°åº•åº”è¯¥é‡‡ç”¨ä»€ä¹ˆæ ·çš„ `Content-Type` å–å†³äºæœåŠ¡å™¨ç«¯ï¼Œæ‰€ä»¥è¯·å’ŒæœåŠ¡å™¨ç«¯çš„å¼€å‘äººå‘˜æ²Ÿé€šç¡®å®šæ¸…æ¥š

* å¸¸ç”¨çš„ `Content-Type` é™¤äº†ä¸Šé¢çš„ `application/json` ï¼Œè¿˜æœ‰ä¼ ç»Ÿçš„ç½‘é¡µè¡¨å•å½¢å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

```jsx
fetch('https://mywebsite.com/endpoint/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
  },
  body: 'key1=value1&key2=value2',
});
```

* å¯ä»¥å‚è€ƒ[ã€ `Fetch` è¯·æ±‚æ–‡æ¡£ã€‘](https://developer.mozilla.org/en-US/docs/Web/API/Request)æ¥æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å‚æ•°

> æ³¨æ„ï¼šä½¿ç”¨ Chrome è°ƒè¯•ç›®å‰æ— æ³•è§‚æµ‹åˆ° React Native ä¸­çš„ç½‘ç»œè¯·æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„[ã€ `react-native-debugger` ã€‘](https://github.com/jhen0409/react-native-debugger)æ¥è¿›è¡Œè§‚æµ‹

#### å¤„ç†æœåŠ¡å™¨çš„å“åº”æ•°æ®

> å‰é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•å‘èµ·è¯·æ±‚ï¼›ä½†å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ è¿˜éœ€è¦å¤„ç†æœåŠ¡å™¨å›å¤çš„æ•°æ®

ç½‘ç»œè¯·æ±‚å¤©ç„¶æ˜¯ä¸€ç§å¼‚æ­¥æ“ä½œï¼ˆåŒæ ·çš„è¿˜æœ‰ `asyncstorage` ï¼‰ï¼š

* æ— è®ºåœ¨è¯­æ³•å±‚é¢æ€ä¹ˆæŠ˜è…¾ï¼Œå®ƒä»¬çš„å¼‚æ­¥æœ¬è´¨æ˜¯æ— æ³•å˜æ›´çš„

* å¼‚æ­¥çš„æ„æ€æ˜¯ä½ åº”è¯¥è¶è¿™ä¸ªæ—¶é—´å»åšç‚¹åˆ«çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ˜¾ç¤º `loading` ï¼Œè€Œä¸æ˜¯è®©ç•Œé¢å¡ä½å‚»ç­‰

`Fetch` æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª `Promise` ï¼Œè¿™ç§æ¨¡å¼å¯ä»¥ç®€åŒ–å¼‚æ­¥é£æ ¼çš„ä»£ç ï¼ˆè¯‘æ³¨ï¼šå¦‚æœä½ ä¸äº†è§£ `promise` ï¼Œå»ºè®®ä½¿ç”¨æœç´¢å¼•æ“è¡¥è¯¾ï¼‰ï¼š

```jsx
function getMoviesFromApiAsync() {
  return fetch('https://facebook.github.io/react-native/movies.json')
    .then((response) => response.json())
    .then((responseJson) => {
      return responseJson.movies;
    })
    .catch((error) => {
      console.error(error);
    });
}
```

ä½ ä¹Ÿå¯ä»¥åœ¨ `React Native` åº”ç”¨ä¸­ä½¿ç”¨ `ES2017` æ ‡å‡†ä¸­çš„`async/await` è¯­æ³•ï¼š

```jsx
// æ³¨æ„è¿™ä¸ªæ–¹æ³•å‰é¢æœ‰asyncå…³é”®å­—
async function getMoviesFromApi() {
  try {
    // æ³¨æ„è¿™é‡Œçš„awaitè¯­å¥ï¼Œå…¶æ‰€åœ¨çš„å‡½æ•°å¿…é¡»æœ‰asyncå…³é”®å­—å£°æ˜
    let response = await fetch(
      'https://facebook.github.io/react-native/movies.json',
    );
    let responseJson = await response.json();
    return responseJson.movies;
  } catch (error) {
    console.error(error);
  }
}
```

åˆ«å¿˜äº† `catch` ä½ `fetch` å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦åˆ™å‡ºé”™æ—¶ä½ å¯èƒ½çœ‹ä¸åˆ°ä»»ä½•æç¤ºï¼š

```jsx
import React from 'react';
import { FlatList, ActivityIndicator, Text, View  } from 'react-native';

export default class FetchExample extends React.Component {

  constructor(props){
    super(props);
    this.state ={ isLoading: true}
  }

  componentDidMount(){
    return fetch('https://facebook.github.io/react-native/movies.json')
      .then((response) => response.json())
      .then((responseJson) => {

        this.setState({
          isLoading: false,
          dataSource: responseJson.movies,
        }, function(){

        });

      })
      .catch((error) =>{
        console.error(error);
      });
  }



  render(){

    if(this.state.isLoading){
      return(
        <View style={{flex: 1, padding: 20}}>
          <ActivityIndicator/>
        </View>
      )
    }

    return(
      <View style={{flex: 1, paddingTop:20}}>
        <FlatList
          data={this.state.dataSource}
          renderItem={({item}) => <Text>{item.title}, {item.releaseYear}</Text>}
          keyExtractor={(item, index) => item.id}
        />
      </View>
    );
  }
}
```

> é»˜è®¤æƒ…å†µä¸‹ï¼Œ`iOS` ä¼šé˜»æ­¢æ‰€æœ‰é `https` çš„è¯·æ±‚ï¼šå¦‚æœä½ è¯·æ±‚çš„æ¥å£æ˜¯ `http` åè®®ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦æ·»åŠ ä¸€ä¸ª `App Transport Security` çš„ä¾‹å¤–ï¼Œè¯¦ç»†å¯å‚è€ƒ[ã€è¿™ç¯‡å¸–å­ã€‘](https://segmentfault.com/a/1190000002933776)

#### ä½¿ç”¨å…¶ä»–çš„ç½‘ç»œåº“

`React Native` ä¸­å·²ç»å†…ç½®äº† `XMLHttpRequest API` (ä¹Ÿå°±æ˜¯ä¿—ç§°çš„ `ajax` )

* ä¸€äº›åŸºäº `XMLHttpRequest` å°è£…çš„ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä¾‹å¦‚ `frisbee` æˆ–æ˜¯ `axios` ç­‰

* ä½†æ³¨æ„ä¸èƒ½ä½¿ç”¨ `jQuery` ï¼Œå› ä¸º `jQuery` ä¸­è¿˜ä½¿ç”¨äº†å¾ˆå¤šæµè§ˆå™¨ä¸­æ‰æœ‰è€Œ `React Native` ä¸­æ²¡æœ‰çš„ä¸œè¥¿

  * æ‰€ä»¥ä¹Ÿä¸æ˜¯æ‰€æœ‰ `web` ä¸­çš„ `ajax` åº“éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨

```jsx
var request = new XMLHttpRequest();
request.onreadystatechange = (e) => {
  if (request.readyState !== 4) {
    return;
  }

  if (request.status === 200) {
    console.log('success', request.responseText);
  } else {
    console.warn('error');
  }
};

request.open('GET', 'https://mywebsite.com/endpoint/');
request.send();
```

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®‰å…¨æœºåˆ¶ä¸ç½‘é¡µç¯å¢ƒæœ‰æ‰€ä¸åŒï¼šåœ¨åº”ç”¨ä¸­ä½ å¯ä»¥è®¿é—®ä»»ä½•ç½‘ç«™ï¼Œæ²¡æœ‰è·¨åŸŸçš„é™åˆ¶

### `WebSocket` æ”¯æŒ

`React Native` è¿˜æ”¯æŒ `WebSocket` ï¼Œè¿™ç§åè®®å¯ä»¥åœ¨å•ä¸ª `TCP` è¿æ¥ä¸Šæä¾›å…¨åŒå·¥çš„é€šä¿¡ä¿¡é“

```jsx
var ws = new WebSocket('ws://host.com/path');

ws.onopen = () => {
  // connection opened
  ws.send('something'); // send a message
};

ws.onmessage = (e) => {
  // a message was received
  console.log(e.data);
};

ws.onerror = (e) => {
  // an error occurred
  console.log(e.message);
};

ws.onclose = (e) => {
  // connection closed
  console.log(e.code, e.reason);
};
```

### è·å–å’ŒåŸºäº `cookie` çš„èº«ä»½éªŒè¯çš„å·²çŸ¥é—®é¢˜

> ä»¥ä¸‹é€‰é¡¹å½“å‰ä¸ä½¿ç”¨ `fetch` ï¼š

* `redirect:manual`
* `credentials:omit`

> åœ¨ `Android` ä¸Šä½¿ç”¨ç›¸åŒåç§°çš„å¤´æ–‡ä»¶åªä¼šå¯¼è‡´å‡ºç°æœ€æ–°çš„å¤´æ–‡ä»¶

* [ã€è¿™é‡Œã€‘](https://github.com/facebook/react-native/issues/18837#issuecomment-398779994)å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆ

> åŸºäº `cookie` çš„èº«ä»½éªŒè¯å½“å‰ä¸ç¨³å®š

* æ‚¨å¯ä»¥æŸ¥çœ‹[ã€è¿™é‡Œã€‘](https://github.com/facebook/react-native/issues/23185)æå‡ºçš„ä¸€äº›é—®é¢˜

> è‡³å°‘åœ¨ `iOS` ä¸Šï¼Œå½“é€šè¿‡ `302` é‡å®šå‘æ—¶ï¼Œå¦‚æœå­˜åœ¨ `set cookie` å¤´ï¼Œåˆ™ `cookie` è®¾ç½®ä¸æ­£ç¡®

* ç”±äºæ— æ³•æ‰‹åŠ¨å¤„ç†é‡å®šå‘ï¼Œå› æ­¤å¦‚æœé‡å®šå‘æ˜¯è¿‡æœŸä¼šè¯çš„ç»“æœï¼Œåˆ™å¯èƒ½å¯¼è‡´å‡ºç°æ— é™è¯·æ±‚çš„æƒ…å†µ

## ç¤ºä¾‹æ•™ç¨‹ï¼šç”µå½±åˆ—è¡¨

### ç®€ä»‹

åœ¨æœ¬ç¤ºä¾‹æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œå¯ä»¥ä»ç”µå½±æ•°æ®åº“ä¸­å–å¾—æœ€è¿‘æ­£åœ¨ä¸Šæ˜ çš„ `25` éƒ¨ç”µå½±ï¼Œå¹¶åœ¨ä¸€ä¸ª `FlatList` ä¸­å±•ç¤ºå‡ºæ¥

### å‡†å¤‡å·¥ä½œ

`React Native` éœ€è¦ä¸€äº›åŸºç¡€çš„é…ç½®å·¥ä½œï¼Œä½ å¯ä»¥å‚è€ƒ[ã€å¼€å§‹ä½¿ç”¨ `React Native` ã€‘](https://reactnative.cn/docs/getting-started)æ¥è¿›è¡Œ

* åœ¨æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶éƒ½å·²ç»å®‰è£…å®Œæ¯•åï¼Œè¯·åˆ›å»ºä¸€ä¸ª `React Native` å·¥ç¨‹å’Œæˆ‘ä»¬ä¸€èµ·å¼€å§‹è¿™æ¬¡ç¤ºä¾‹ï¼š

  ```
  react-native init SampleAppMovies
  ```

  * è¿™ä¸ªå‘½ä»¤ä¼šåˆå§‹åŒ–ä¸€ä¸ªå·¥ç¨‹

  * ä¸‹è½½ React Native çš„æ‰€æœ‰æºä»£ç å’Œä¾èµ–åŒ…

  * æœ€ååœ¨ `SampleAppMovies/iOS/SampleAppMovies.xcodeproj` å’Œ `SampleAppMovies/android/app` ä¸‹åˆ†åˆ«åˆ›å»ºä¸€ä¸ªæ–°çš„ `XCode` å·¥ç¨‹( `iOS` )å’Œä¸€ä¸ª `gradle` å·¥ç¨‹( `Android` )

### å¼€å‘

#### æƒ³å¼€å‘ `iOS` ç‰ˆæœ¬

ä½ ç°åœ¨å¯ä»¥åœ¨ `XCode` ä¸­æ‰“å¼€åˆšåˆšåˆ›å»ºçš„å·¥ç¨‹( `SampleAppMovies/iOS/SampleAppMovies.xcodeproj` )ï¼Œç„¶ååªè¦æŒ‰ä¸‹ `âŒ˜+R` å°±å¯ä»¥æ„å»ºå¹¶è¿è¡Œ

* è¿™ä¸ªæ“ä½œä¼šåŒæ—¶æ‰“å¼€ä¸€ä¸ªç”¨äºå®ç°åŠ¨æ€ä»£ç åŠ è½½çš„ `Node` æœåŠ¡ï¼ˆ `React Packager` ï¼‰

* æ‰€ä»¥æ¯å½“ä½ ä¿®æ”¹ä»£ç ï¼Œä½ åªéœ€è¦åœ¨æ¨¡æ‹Ÿå™¨ä¸­æŒ‰ä¸‹ `âŒ˜+R` ï¼Œè€Œæ— éœ€é‡æ–°åœ¨ `XCode` ä¸­ç¼–è¯‘

#### æƒ³å¼€å‘ `Android` ç‰ˆæœ¬

å…ˆè¿æ¥ä½ çš„è®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œç„¶ååœ¨ `SampleAppMovies` ç›®å½•ä¸‹è¿è¡Œ `react-native run-android` ï¼Œå°±ä¼šæ„å»ºå·¥ç¨‹

* æ³¨æ„ï¼šåœ¨ç¬¬ä¸€æ¬¡æ„å»ºä¸­ä¼šè”ç½‘ä¸‹è½½å¾ˆå¤šä¾èµ–ï¼Œè€—æ—¶è¾ƒé•¿ï¼›åœ¨å›½å†…çš„è¯åŠ¡å¿…ä½¿ç”¨ç¨³å®šçš„ `XX` å·¥å…·ï¼Œå¦åˆ™ä¼šä¸€ç›´å¤±è´¥

* è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨å®‰è£…åˆ°ä½ çš„æ¨¡æ‹Ÿå™¨æˆ–è€…è®¾å¤‡ï¼ŒåŒæ—¶å¯åŠ¨ç”¨äºå®ç°åŠ¨æ€ä»£ç åŠ è½½çš„ `Node` æœåŠ¡

* å½“ä½ ä¿®æ”¹ä»£ç ä¹‹åï¼Œä½ éœ€è¦æ‰“å¼€æ‘‡ä¸€æ‘‡èœå•

  * æ‘‡ä¸€ä¸‹è®¾å¤‡ï¼Œæˆ–è€…æŒ‰ä¸‹è®¾å¤‡çš„ `Menu` é”®ï¼Œæˆ–è€…åœ¨æ¨¡æ‹Ÿå™¨ä¸ŠæŒ‰ä¸‹ `F2` æˆ– `Page Up` ï¼Œ`Genymotion` æŒ‰ä¸‹ `âŒ˜+M`

* ç„¶ååœ¨èœå•ä¸­ç‚¹å‡» `Reload JS`

### `Hello World`

`react-native init` å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªæŒ‡å®šåå­—çš„åº”ç”¨ï¼Œæˆ‘ä»¬åˆšæ‰è¾“å…¥çš„å‘½ä»¤å°±åˆ›å»ºäº†ä¸€ä¸ªåä¸º `SampleAppMovies` çš„åº”ç”¨

* è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ `Hello World` åº”ç”¨

* ä½ å¯ä»¥ç¼–è¾‘ `App.js` æ¥åšä¸€äº›æ”¹åŠ¨ï¼Œç„¶ååœ¨æ¨¡æ‹Ÿå™¨ä¸­æŒ‰ `âŒ˜+R` æ¥çœ‹åˆ°ä¿®æ”¹çš„ç»“æœ

### æ¨¡æ‹Ÿæ•°æ®

> è¯‘æ³¨ï¼šæœ¬æ–‡çš„ç¤ºä¾‹ä»£ç ä½¿ç”¨äº† `ES6` è¯­æ³•ï¼Œå¯èƒ½å’Œå…¶ä»–æ–‡æ¡£å†™æ³•ä¸ä¸€è‡´

`React Native` ä» `0.18` ä¹‹åï¼Œæ–°å»ºé¡¹ç›®é»˜è®¤å·²ç»é‡‡ç”¨äº† `ES6` è¯­æ³•ï¼Œæ•…æˆ‘ä»¬æ¨èä¸ç†Ÿæ‚‰ `ES6` ä¸ `ES5` åŒºåˆ«çš„æœ‹å‹å…ˆè¯»è¯»[ã€è¿™ç¯‡æ–‡ç« ã€‘](http://bbs.reactnative.cn/topic/15)ï¼Œå¦å¤–è¿˜å¯ä»¥çœ‹çœ‹[ã€é˜®ä¸€å³°è€å¸ˆçš„ä¹¦ã€‘](http://es6.ruanyifeng.com/)

> åœ¨æˆ‘ä»¬çœŸæ­£ä» `Rotten Tomatoes` (è¯‘æ³¨ï¼šä¸€ä¸ªå›½å¤–çš„ç”µå½±ç¤¾åŒº)æŠ“å–æ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ¶é€ ä¸€äº›æ¨¡æ‹Ÿæ•°æ®æ¥ç»ƒä¸€ç»ƒæ‰‹

åœ¨ `Facebook` æˆ‘ä»¬é€šå¸¸åœ¨ `JavaScript` æ–‡ä»¶çš„å¼€å¤´ï¼Œç´§è·Ÿç€ `import` è¯­å¥ä¹‹åå£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œä¸è¿‡è¿™ä¸é‡è¦ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ `App.js` çš„ä»»æ„ä½ç½®ï¼š

```jsx
var MOCKED_MOVIES_DATA = [
  {
    title: "æ ‡é¢˜",
    year: "2015",
    posters: { thumbnail: "http://i.imgur.com/UePbdph.jpg" }
  }
];
```

* è¯‘æ³¨ï¼šåœ¨ `iOS` ä¸Šä½¿ç”¨ `http` é“¾æ¥çš„å›¾ç‰‡åœ°å€å¯èƒ½ä¸ä¼šæ˜¾ç¤ºï¼Œå‚è§[ã€è¿™ç¯‡è¯´æ˜ä¿®æ”¹ã€‘](https://segmentfault.com/a/1190000002933776)

* ä» `Android9` å¼€å§‹ï¼Œä¹Ÿä¼šé»˜è®¤é˜»æ­¢ `http` è¯·æ±‚ï¼Œè¯·å‚è€ƒ[ã€ç›¸å…³é…ç½®ã€‘](https://blog.csdn.net/qq_40347548/article/details/86766932)

#### å±•ç°ä¸€ä¸ªç”µå½±

æˆ‘ä»¬æ¥ä¸‹æ¥è¦å±•ç°ä¸€ä¸ªç”µå½±ï¼Œç»˜åˆ¶å®ƒçš„æ ‡é¢˜ã€å¹´ä»½ã€ä»¥åŠç¼©ç•¥å›¾ï¼ˆè¯‘æ³¨ï¼šè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬é€šå¸¸ä¼šå«åš **æ¸²æŸ“ / `render`** ï¼Œåé¢æˆ‘ä»¬éƒ½ä¼šç”¨ **`æ¸²æŸ“`** è¿™ä¸ªè¯ï¼‰

* æ¸²æŸ“ç¼©ç•¥å›¾éœ€è¦ç”¨åˆ° `Image` ç»„ä»¶ï¼Œæ‰€ä»¥æŠŠ `Image` æ·»åŠ åˆ°å¯¹ `React` çš„ `import` åˆ—è¡¨ä¸­ï¼š

  ```jsx
  import React, { Component } from "react";
  import { Image, StyleSheet, Text, View } from "react-native";
  ```

* ç„¶åä¿®æ”¹ä¸€ä¸‹ `render` å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢åˆ›å»ºçš„æ¨¡æ‹Ÿæ•°æ®æ¸²æŸ“å‡ºæ¥

  ```jsx
  render() {
    var movie = MOCKED_MOVIES_DATA[0];
    return (
      <View style={styles.container}>
        <Text>{movie.title}</Text>
        <Text>{movie.year}</Text>
        <Image source={{uri: movie.posters.thumbnail}} />
      </View>
    );
  }
  ```

* æŒ‰ä¸‹ `âŒ˜+R` æˆ–è€… `Reload JS` ï¼Œç°åœ¨ä½ åº”è¯¥èƒ½çœ‹åˆ°æ–‡å­— `Title` å’Œ `2015` ï¼Œä½†ç°åœ¨ `Image` ç»„ä»¶æ²¡æ¸²æŸ“ä»»ä½•ä¸œè¥¿ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸ºå›¾ç‰‡æŒ‡å®šæˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„å®½å’Œé«˜

  * è¿™é€šè¿‡æ ·å¼æ¥å®ç°

  * å½“æˆ‘ä»¬ä¿®æ”¹æ ·å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥æ¸…ç†æ‰æˆ‘ä»¬ä¸å†ä½¿ç”¨çš„æ ·å¼

  ```jsx
  var styles = StyleSheet.create({
    container: {
      flex: 1,
      justifyContent: "center",
      alignItems: "center",
      backgroundColor: "#F5FCFF"
    },
    thumbnail: {
      width: 53,
      height: 81
    }
  });
  ```

* ç„¶åæŠŠå®ƒåº”ç”¨åˆ° `Image` ç»„ä»¶ä¸Š

  ```jsx
  <Image source={{ uri: movie.posters.thumbnail }} style={styles.thumbnail} />
  ```

* æŒ‰ä¸‹ `âŒ˜+R` æˆ–è€… `Reload JS` ï¼Œç°åœ¨å›¾ç‰‡åº”è¯¥å¯ä»¥è¢«æ¸²æŸ“å‡ºæ¥äº†

![å›¾ç‰‡](https://reactnative.cn/img/TutorialMock.png)

![å›¾ç‰‡](https://reactnative.cn/img/TutorialMock2.png)

#### æ·»åŠ æ ·å¼

ç°åœ¨æˆ‘ä»¬å·²ç»æˆåŠŸçš„æŠŠæˆ‘ä»¬çš„æ•°æ®æ¸²æŸ“å‡ºæ¥äº†ï¼Œä¸‹é¢è®©æˆ‘ä»¬æŠŠå®ƒå¼„çš„æ›´å¥½çœ‹ä¸€äº›

* æˆ‘æƒ³æŠŠæ–‡å­—æ”¾åœ¨å›¾ç‰‡çš„å³è¾¹ï¼Œç„¶åæŠŠæ ‡é¢˜å¼„çš„å¤§ä¸€äº›ï¼Œå¹¶ä¸”æ°´å¹³å±…ä¸­ï¼š

  ```
  +---------------------------------+
  |+-------++----------------------+|
  ||       ||        æ ‡é¢˜          ||
  || å›¾ç‰‡  ||                      ||
  ||       ||        å¹´ä»½          ||
  |+-------++----------------------+|
  +---------------------------------+
  ```

* æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ª `container` æ¥å®ç°ä¸€ä¸ªæ°´å¹³å¸ƒå±€å†…åµŒå¥—ä¸€ä¸ªå‚ç›´å¸ƒå±€

  ```jsx
  return (
    <View style={styles.container}>
      <Image source={{ uri: movie.posters.thumbnail }} style={styles.thumbnail} />
      <View style={styles.rightContainer}>
        <Text style={styles.title}>{movie.title}</Text>
        <Text style={styles.year}>{movie.year}</Text>
      </View>
    </View>
  );
  ```

  * å’Œä¹‹å‰ç›¸æ¯”å¹¶æ²¡æœ‰å¤ªå¤šå˜åŒ–ï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ª `container` æ¥åŒ…è£…æ–‡å­—ï¼Œç„¶åæŠŠå®ƒç§»åˆ°äº† `Image` çš„åé¢ï¼ˆå› ä¸ºä»–ä»¬æœ€ç»ˆåœ¨å›¾ç‰‡çš„å³è¾¹ï¼‰

* ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹æ ·å¼è¦æ€ä¹ˆæ”¹ï¼š

  ```jsx
  container: {
    flex: 1,
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#F5FCFF',
  },
  ```

  * åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬ç”¨äº†ä¸€å¥ `flexDirection: 'row'` æ¥è®©æˆ‘ä»¬çš„ä¸»å®¹å™¨çš„æˆå‘˜ä»å·¦åˆ°å³æ¨ªå‘å¸ƒå±€ï¼Œè€Œéé»˜è®¤çš„ä»ä¸Šåˆ°ä¸‹çºµå‘å¸ƒå±€

* ç°åœ¨æˆ‘ä»¬å¾€ `style` å¯¹è±¡é‡Œå¢åŠ å¦ä¸€ä¸ªæ ·å¼ï¼š

  ```jsx
  rightContainer: {
    flex: 1,
  },
  ```

  * è¿™å¥è¯çš„ä½œç”¨æ˜¯è®© `rightContainer` åœ¨çˆ¶å®¹å™¨ä¸­å æ® `Image` ä¹‹å¤–å‰©ä¸‹çš„å…¨éƒ¨ç©ºé—´

  * å¦‚æœä½ è¿˜ä¸æ˜¯å¾ˆç†è§£çš„è¯ï¼Œä½ å¯ä»¥å¾€ `rightContainer` é‡Œå¢åŠ ä¸€ä¸ª `backgroundColor` çœ‹ä¸€çœ‹ï¼Œç„¶åå†å»æ‰ `flex:1` å¯¹æ¯”ä¸€ä¸‹

  * ä½ ä¼šå‘ç°å»æ‰è¿™ä¸€å¥åï¼Œå®¹å™¨ä¼šå˜æˆèƒ½å®¹çº³å®ƒå­©å­çš„æœ€å°å¤§å°

* ç»™æ–‡å­—æ·»åŠ æ ·å¼å°±ç®€å•çš„å¤šäº†ï¼š

  ```jsx
  title: {
    fontSize: 20,
    marginBottom: 8,
    textAlign: 'center',
  },
  year: {
    textAlign: 'center',
  },
  ```

* å†æŒ‰ä¸€æ¬¡ `âŒ˜+R` æˆ–è€… `Reload JS` æ¥çœ‹çœ‹æœ€æ–°çš„ç»“æœ

![å›¾ç‰‡](https://reactnative.cn/img/TutorialStyledMock.png)

![å›¾ç‰‡](https://reactnative.cn/img/TutorialStyledMock2.png)

> æˆ‘ä»¬ç”¨çš„æ˜¯ `Flexbox` æ¥å¸ƒå±€ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥è¯»è¯»[ã€è¿™ç¯‡æ–‡ç« ã€‘](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

### æ‹‰å–çœŸæ­£çš„æ•°æ®

> ä» `Rotten Tomatoes` çš„ `API` æ‹‰å–æ•°æ®å’Œå­¦ä¹  `React Native` å¹¶æ²¡æœ‰ä»€ä¹ˆç›´æ¥å…³ç³»ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç›´æ¥è·³è¿‡æœ¬èŠ‚

æŠŠä¸‹é¢çš„å¸¸é‡æ”¾åˆ°æ–‡ä»¶çš„æœ€å¼€å¤´ï¼ˆé€šå¸¸åœ¨ `import` ä¸‹é¢ï¼‰æ¥åˆ›å»ºæˆ‘ä»¬è¯·æ±‚æ•°æ®æ‰€éœ€çš„åœ°å€å¸¸é‡ `REQUEST_URL`

```jsx
/**
 * ä¸ºäº†é¿å…éªšæ‰°ï¼Œæˆ‘ä»¬ç”¨äº†ä¸€ä¸ªæ ·ä¾‹æ•°æ®æ¥æ›¿ä»£ Rotten Tomatoes çš„ API è¯·æ±‚ï¼Œè¿™ä¸ªæ ·ä¾‹æ•°æ®æ”¾åœ¨ React Native çš„ Github åº“ä¸­
 * å½“ç„¶ï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œè¿™ä¸ªåœ°å€å¯èƒ½å›½å†…è®¿é—®ä¹Ÿæ¯”è¾ƒå›°éš¾
 */
var REQUEST_URL =
  "https://raw.githubusercontent.com/facebook/react-native/0.51-stable/docs/MoviesExample.json";
```

* é¦–å…ˆåœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªåˆå§‹çš„ `null` çŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡ `this.state.movies == null` æ¥åˆ¤æ–­æˆ‘ä»¬çš„æ•°æ®æ˜¯ä¸æ˜¯å·²ç»è¢«æŠ“å–åˆ°äº†

* æˆ‘ä»¬åœ¨æœåŠ¡å™¨å“åº”è¿”å›çš„æ—¶å€™æ‰§è¡Œ `this.setState({movies: moviesData})` æ¥æ”¹å˜è¿™ä¸ªçŠ¶æ€

* æŠŠä¸‹é¢è¿™æ®µä»£ç æ”¾åˆ°æˆ‘ä»¬çš„ `React` ç±»çš„ `render` å‡½æ•°ä¹‹å‰ï¼ˆä¸‹é¢æ³¨é‡Šä¸­çš„ `ç»‘å®šæ“ä½œ` ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ª[ã€çŸ­è§†é¢‘æ•™ç¨‹ã€‘](http://v.youku.com/v_show/id_XMTgyNzM0NjQzMg==.html)ï¼‰ï¼š

  ```jsx
  constructor(props) {
    super(props);   // è¿™ä¸€å¥ä¸èƒ½çœç•¥ï¼Œç…§æŠ„å³å¯
    this.state = {
      movies: null,  // è¿™é‡Œæ”¾ä½ è‡ªå·±å®šä¹‰çš„ state å˜é‡åŠåˆå§‹å€¼
    };
    // åœ¨ ES6 ä¸­ï¼Œå¦‚æœåœ¨è‡ªå®šä¹‰çš„å‡½æ•°é‡Œä½¿ç”¨äº† this å…³é”®å­—ï¼Œåˆ™éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œï¼Œå¦åˆ™ this çš„æŒ‡å‘ä¸å¯¹
    // åƒä¸‹é¢è¿™è¡Œä»£ç ä¸€æ ·ï¼Œåœ¨ constructor ä¸­ä½¿ç”¨ bind æ˜¯å…¶ä¸­ä¸€ç§åšæ³•ï¼ˆè¿˜æœ‰ä¸€äº›å…¶ä»–åšæ³•ï¼Œå¦‚ä½¿ç”¨ç®­å¤´å‡½æ•°ç­‰ï¼‰
    this.fetchData = this.fetchData.bind(this);
  }
  ```

* ç»„ä»¶åŠ è½½å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®

  * `componentDidMount` æ˜¯ `React` ç»„ä»¶çš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå®ƒä¼šåœ¨ç»„ä»¶åˆšåŠ è½½å®Œæˆçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œä»¥åä¸ä¼šå†è¢«è°ƒç”¨

  * `React` ä¸­çš„å„ç§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¯·[ã€å‚é˜…æ­¤æ–‡æ¡£ã€‘](http://facebook.github.io/react/docs/component-specs.html)

  ```jsx
  componentDidMount() {
    this.fetchData();
  }
  ```

* ç°åœ¨æˆ‘ä»¬æ¥ä¸ºç»„ä»¶æ·»åŠ  `fetchData` å‡½æ•°

  * ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨ `Promise` è°ƒç”¨é“¾ç»“æŸåæ‰§è¡Œ `this.setState({movies:data})`

  * åœ¨ `React` çš„å·¥ä½œæœºåˆ¶ä¸‹ï¼Œ`setState` å®é™…ä¸Šä¼šè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“çš„æµç¨‹ï¼Œæ­¤æ—¶ `render` å‡½æ•°è¢«è§¦å‘ï¼Œå‘ç° `this.state.movies` ä¸å†æ˜¯ `null`

  ```jsx
  fetchData() {
    fetch(REQUEST_URL)
      .then((response) => response.json())
      .then((responseData) => {
        // æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº†thiså…³é”®å­—ï¼Œä¸ºäº†ä¿è¯thisåœ¨è°ƒç”¨æ—¶ä»ç„¶æŒ‡å‘å½“å‰ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œ
        this.setState({
          movies: responseData.movies,
        });
      });
  }
  ```

* ç°åœ¨æˆ‘ä»¬æ¥ä¿®æ”¹ `render` å‡½æ•°

  * åœ¨ç”µå½±æ•°æ®åŠ è½½å®Œæ¯•ä¹‹å‰ï¼Œå…ˆæ¸²æŸ“ä¸€ä¸ª `åŠ è½½ä¸­` çš„è§†å›¾ï¼›è€Œå¦‚æœç”µå½±æ•°æ®å·²ç»åŠ è½½å®Œæ¯•äº†ï¼Œåˆ™æ¸²æŸ“ç¬¬ä¸€ä¸ªç”µå½±æ•°æ®

    ```jsx
    render() {
      if (!this.state.movies) {
        return this.renderLoadingView();
      }

      var movie = this.state.movies[0];
      return this.renderMovie(movie);
    }

    renderLoadingView() {
      return (
        <View style={styles.container}>
          <Text>
            æ­£åœ¨åŠ è½½ç”µå½±æ•°æ®â€¦â€¦
          </Text>
        </View>
      );
    }

    renderMovie(movie) {
      return (
        <View style={styles.container}>
          <Image
            source={{uri: movie.posters.thumbnail}}
            style={styles.thumbnail}
          />
          <View style={styles.rightContainer}>
            <Text style={styles.title}>{movie.title}</Text>
            <Text style={styles.year}>{movie.year}</Text>
          </View>
        </View>
      );
    }
    ```

* ç°åœ¨å†æŒ‰ä¸€æ¬¡ `âŒ˜+R` æˆ–è€… `Reload JS` ï¼Œä½ ä¼šé¦–å…ˆçœ‹åˆ° `æ­£åœ¨åŠ è½½ç”µå½±æ•°æ®â€¦â€¦` ï¼Œç„¶ååœ¨å“åº”æ•°æ®åˆ°è¾¾ä¹‹åï¼Œçœ‹åˆ°ç¬¬ä¸€ä¸ªç”µå½±çš„ä¿¡æ¯

![å›¾ç‰‡](https://reactnative.cn/img/TutorialSingleFetched.png)

![å›¾ç‰‡](https://reactnative.cn/img/TutorialSingleFetched2.png)

### `FlatList`

> ç°åœ¨æˆ‘ä»¬æ¥è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½å¤Ÿæ¸²æŸ“æ‰€æœ‰çš„æ•°æ®è€Œä¸æ˜¯ä»…ä»…ç¬¬ä¸€éƒ¨ç”µå½±ï¼›æˆ‘ä»¬è¦ç”¨åˆ°çš„å°±æ˜¯ `FlatList` ç»„ä»¶

ä¸ºä»€ä¹ˆå»ºè®®æŠŠå†…å®¹æ”¾åˆ° `FlatList` é‡Œï¼Ÿ

æ¯”èµ·ç›´æ¥æ¸²æŸ“å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œæˆ–æ˜¯æ”¾åˆ°ä¸€ä¸ª `ScrollView` é‡Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ

* è¿™æ˜¯å› ä¸ºå°½ç®¡ `React` å¾ˆé«˜æ•ˆï¼Œæ¸²æŸ“ä¸€ä¸ªå¯èƒ½å¾ˆå¤§çš„å…ƒç´ åˆ—è¡¨è¿˜æ˜¯ä¼šå¾ˆæ…¢

* `FlatList` ä¼šå®‰æ’è§†å›¾çš„æ¸²æŸ“ï¼Œåªæ˜¾ç¤ºå½“å‰åœ¨å±å¹•ä¸Šçš„é‚£äº›å…ƒç´ 

* è€Œé‚£äº›å·²ç»æ¸²æŸ“å¥½äº†ä½†ç§»åŠ¨åˆ°äº†å±å¹•ä¹‹å¤–çš„å…ƒç´ ï¼Œåˆ™ä¼šä»åŸç”Ÿè§†å›¾ç»“æ„ä¸­ç§»é™¤ï¼ˆä»¥æé«˜æ€§èƒ½ï¼‰

é¦–å…ˆè¦åšçš„äº‹æƒ…ï¼šåœ¨æ–‡ä»¶æœ€å¼€å¤´å¼•å…¥ `FlatList`

```jsx
import React, { Component } from "react";
import { Image, FlatList, StyleSheet, Text, View } from "react-native";
```

ç°åœ¨æ¥ä¿®æ”¹ `render` å‡½æ•°ï¼Œå½“æˆ‘ä»¬å·²ç»æœ‰äº†æ•°æ®ä¹‹åï¼Œæ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤šä¸ªç”µå½±ä¿¡æ¯çš„ `FlatList` ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªçš„ç”µå½±

```jsx
render() {
  if (!this.state.loaded) {
    return this.renderLoadingView();
  }

  return (
    <FlatList
      data={this.state.data}
      renderItem={this.renderMovie}
      style={styles.list}
      keyExtractor={item => item.id}
    />
  );
}
```

* `keyExtractor` æ­¤å‡½æ•°ç”¨äºä¸ºç»™å®šçš„itemç”Ÿæˆä¸€ä¸ªä¸é‡å¤çš„ `key`

  * `Key` çš„ä½œç”¨æ˜¯ä½¿ `React` èƒ½å¤ŸåŒºåˆ†åŒç±»å…ƒç´ çš„ä¸åŒä¸ªä½“ï¼Œä»¥ä¾¿åœ¨åˆ·æ–°æ—¶èƒ½å¤Ÿç¡®å®šå…¶å˜åŒ–çš„ä½ç½®ï¼Œå‡å°‘é‡æ–°æ¸²æŸ“çš„å¼€é”€

  * è‹¥ä¸æŒ‡å®šæ­¤å‡½æ•°ï¼Œåˆ™é»˜è®¤æŠ½å– `item.key` ä½œä¸º `key` å€¼

  * è‹¥ `item.key` ä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æ•°ç»„ä¸‹æ ‡

ä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬ç°åœ¨ç”¨åˆ°äº† `this.state` ä¸­çš„ `data`

* ä¸‹ä¸€æ­¥å°±æ˜¯åœ¨ `constructor` ç”Ÿæˆçš„åˆå§‹çŠ¶æ€ä¸­æ·»åŠ ä¸€ä¸ªç©ºç™½çš„ `data`

  * å¦å¤–ï¼Œæˆ‘ä»¬ç°åœ¨è¦æŠŠæ•°æ®å­˜å‚¨åœ¨ `data` ä¸­äº†ï¼Œæ‰€ä»¥ä¸å†å¦å¤–ç”¨ `this.state.movies` æ¥ä¿å­˜æ•°æ®

  * æˆ‘ä»¬å¯ä»¥åœ¨ `state` é‡Œç”¨ä¸€ä¸ªå¸ƒå°”å‹çš„å±æ€§( `this.state.loaded` )æ¥åˆ¤æ–­æ•°æ®åŠ è½½æ˜¯å¦å·²ç»å®Œæˆäº†

```jsx
constructor(props) {
  super(props);
  this.state = {
    data: [],
    loaded: false,
  };
  // åœ¨ES6ä¸­ï¼Œå¦‚æœåœ¨è‡ªå®šä¹‰çš„å‡½æ•°é‡Œä½¿ç”¨äº†thiså…³é”®å­—ï¼Œåˆ™éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œï¼Œå¦åˆ™thisçš„æŒ‡å‘ä¸å¯¹
  // åƒä¸‹é¢è¿™è¡Œä»£ç ä¸€æ ·ï¼Œåœ¨constructorä¸­ä½¿ç”¨bindæ˜¯å…¶ä¸­ä¸€ç§åšæ³•ï¼ˆè¿˜æœ‰ä¸€äº›å…¶ä»–åšæ³•ï¼Œå¦‚ä½¿ç”¨ç®­å¤´å‡½æ•°ç­‰ï¼‰
  this.fetchData = this.fetchData.bind(this);
}
  ```

åŒæ—¶æˆ‘ä»¬ä¹Ÿè¦ä¿®æ”¹ `fetchData` æ–¹æ³•æ¥æŠŠæ•°æ®æ·»åŠ åˆ° `data` é‡Œ

* æ³¨æ„è¿™é‡Œä½¿ç”¨äº†æ•°ç»„çš„ `concat` æ–¹æ³•ç”Ÿæˆæ–°æ•°ç»„ï¼Œä¸èƒ½ç›´æ¥åœ¨åŸæ•°ç»„ä¸Š `push`

```jsx
fetchData() {
  fetch(REQUEST_URL)
    .then((response) => response.json())
    .then((responseData) => {
      // æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº†thiså…³é”®å­—ï¼Œä¸ºäº†ä¿è¯thisåœ¨è°ƒç”¨æ—¶ä»ç„¶æŒ‡å‘å½“å‰ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œ
      this.setState({
        data: this.state.data.concat(responseData.movies),
        loaded: true,
      });
    });
}
```

`renderMovie` æ–¹æ³•çš„æ„å‹ä¹Ÿæœ‰å˜åŒ–

* æ³¨æ„å¦‚æœä½ è¦åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ `this` å…³é”®å­—çš„è¯ï¼Œéœ€è¦æ€ä¹ˆæ”¹ï¼Ÿ

```jsx
renderMovie({ item }) {
  // { item }æ˜¯ä¸€ç§â€œè§£æ„â€å†™æ³•ï¼Œè¯·é˜…è¯»ES2015è¯­æ³•çš„ç›¸å…³æ–‡æ¡£
  // itemä¹Ÿæ˜¯FlatListä¸­å›ºå®šçš„å‚æ•°åï¼Œè¯·é˜…è¯»FlatListçš„ç›¸å…³æ–‡æ¡£
  return (
    <View style={styles.container}>
      <Image
        source={{uri: item.posters.thumbnail}}
        style={styles.thumbnail}
      />
      <View style={styles.rightContainer}>
        <Text style={styles.title}>{item.title}</Text>
        <Text style={styles.year}>{item.year}</Text>
      </View>
    </View>
  );
}
```

æœ€åï¼Œæˆ‘ä»¬å†åœ¨ `styles` å¯¹è±¡é‡Œç»™ `FlatList` æ·»åŠ ä¸€äº›æ ·å¼

```jsx
list: {
  paddingTop: 20,
  backgroundColor: '#F5FCFF',
}
```

ç°åœ¨å¯ä»¥ä½“ç°æœ€ç»ˆçš„ç»“æœäº†ï¼š

![å›¾ç‰‡](https://reactnative.cn/img/TutorialFinal.png)

![å›¾ç‰‡](https://reactnative.cn/img/TutorialFinal2.png)

ä¸ºäº†å®ç°ä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„åº”ç”¨ï¼Œæ¥ä¸‹æ¥å…¶å®è¿˜æœ‰ä¸€äº›å·¥ä½œè¦åšï¼Œè­¬å¦‚ï¼š

* æ·»åŠ å¯¼èˆªå™¨

* æœç´¢

* åŠ è½½æ›´å¤š

* â€¦â€¦ç­‰ç­‰

### æœ€ç»ˆçš„ä»£ç ( `App.js` )

```jsx
import React, { Component } from "react";

import { Image, FlatList, StyleSheet, Text, View } from "react-native";

var REQUEST_URL =
  "https://raw.githubusercontent.com/facebook/react-native/0.51-stable/docs/MoviesExample.json";

export default class SampleAppMovies extends Component {
  constructor(props) {
    super(props);
    this.state = {
      data: [],
      loaded: false
    };
    // åœ¨ES6ä¸­ï¼Œå¦‚æœåœ¨è‡ªå®šä¹‰çš„å‡½æ•°é‡Œä½¿ç”¨äº†thiså…³é”®å­—ï¼Œåˆ™éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œï¼Œå¦åˆ™thisçš„æŒ‡å‘ä¼šå˜ä¸ºç©º
    // åƒä¸‹é¢è¿™è¡Œä»£ç ä¸€æ ·ï¼Œåœ¨constructorä¸­ä½¿ç”¨bindæ˜¯å…¶ä¸­ä¸€ç§åšæ³•ï¼ˆè¿˜æœ‰ä¸€äº›å…¶ä»–åšæ³•ï¼Œå¦‚ä½¿ç”¨ç®­å¤´å‡½æ•°ç­‰ï¼‰
    this.fetchData = this.fetchData.bind(this);
  }

  componentDidMount() {
    this.fetchData();
  }

  fetchData() {
    fetch(REQUEST_URL)
      .then(response => response.json())
      .then(responseData => {
        // æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨äº†thiså…³é”®å­—ï¼Œä¸ºäº†ä¿è¯thisåœ¨è°ƒç”¨æ—¶ä»ç„¶æŒ‡å‘å½“å‰ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œâ€œç»‘å®šâ€æ“ä½œ
        this.setState({
          data: this.state.data.concat(responseData.movies),
          loaded: true
        });
      });
  }

  render() {
    if (!this.state.loaded) {
      return this.renderLoadingView();
    }

    return (
      <FlatList
        data={this.state.data}
        renderItem={this.renderMovie}
        style={styles.list}
        keyExtractor={item => item.id}
      />
    );
  }

  renderLoadingView() {
    return (
      <View style={styles.container}>
        <Text>Loading movies...</Text>
      </View>
    );
  }

  renderMovie({ item }) {
    // { item }æ˜¯ä¸€ç§â€œè§£æ„â€å†™æ³•ï¼Œè¯·é˜…è¯»ES2015è¯­æ³•çš„ç›¸å…³æ–‡æ¡£
    // itemä¹Ÿæ˜¯FlatListä¸­å›ºå®šçš„å‚æ•°åï¼Œè¯·é˜…è¯»FlatListçš„ç›¸å…³æ–‡æ¡£
    return (
      <View style={styles.container}>
        <Image
          source={{ uri: item.posters.thumbnail }}
          style={styles.thumbnail}
        />
        <View style={styles.rightContainer}>
          <Text style={styles.title}>{item.title}</Text>
          <Text style={styles.year}>{item.year}</Text>
        </View>
      </View>
    );
  }
}

var styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: "row",
    justifyContent: "center",
    alignItems: "center",
    backgroundColor: "#F5FCFF"
  },
  rightContainer: {
    flex: 1
  },
  title: {
    fontSize: 20,
    marginBottom: 8,
    textAlign: "center"
  },
  year: {
    textAlign: "center"
  },
  thumbnail: {
    width: 53,
    height: 81
  },
  list: {
    paddingTop: 20,
    backgroundColor: "#F5FCFF"
  }
})
```

## å…¶ä»–å‚è€ƒèµ„æº

 `React Native` å¹¶ä¸å…¨æ˜¯æŸä¸€å®¶å…¬å¸çš„ä½œå“ â€”â€” å®ƒæ±‡èšäº†æˆåƒä¸Šä¸‡å¼€æºç¤¾åŒºå¼€å‘è€…çš„æ™ºæ…§ç»“æ™¶

### å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“

å¼€å‘å®è·µä¸­çš„ä¸€ä¸ªå¸¸è§é—®é¢˜å°±æ˜¯å¦‚ä½•ç®¡ç†åº”ç”¨çš„ **çŠ¶æ€ï¼ˆ `state` ï¼‰**

* è¿™æ–¹é¢ç›®å‰æœ€æµè¡Œçš„åº“é `Redux` è«å±äº†

  * ä¸è¦è¢« `Redux` ä¸­ç»å¸¸å‡ºç°çš„ç±»ä¼¼ `reducer` è¿™æ ·çš„æ¦‚å¿µæœ¯è¯­ç»™å“ä½äº†

  * å®ƒå…¶å®æ˜¯ä¸ªå¾ˆç®€å•çš„åº“ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šä¼˜ç§€çš„[ã€è§†é¢‘æ•™ç¨‹ï¼ˆè‹±æ–‡ï¼‰ã€‘](https://egghead.io/courses/getting-started-with-redux)

* å¦‚æœä½ åœ¨å¯»æ‰¾å…·æœ‰æŸä¸ªç‰¹å®šåŠŸèƒ½çš„ç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹çœ‹åˆ«äºº[ã€ç²¾å¿ƒæ•´ç†çš„èµ„æºåˆ—è¡¨ã€‘](https://github.com/jondot/awesome-react-native)

  * è¿™é‡Œè¿˜æœ‰ä¸ªç±»ä¼¼çš„[ã€ä¸­æ–‡èµ„æºåˆ—è¡¨ã€‘](https://github.com/reactnativecn/react-native-guide)

* æ›´é‡è¦çš„æŠ€èƒ½æ˜¯å­¦ä¼šåœ¨ `github` ä¸Šæœç´¢

  * æ¯”å¦‚ä½ éœ€è¦æœç´¢è§†é¢‘ç›¸å…³çš„åº“ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ `github` ä¸­æœç´¢ `react native video`

### å¼€å‘å·¥å…·

[ã€ `Nuclide` ã€‘](https://nuclide.io/)æ˜¯ `Facebook` å†…éƒ¨æ‰€ä½¿ç”¨çš„ `React Native` å¼€å‘å·¥å…·ï¼š

* å®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯è‡ªå¸¦è°ƒè¯•åŠŸèƒ½ï¼Œå¹¶ä¸”éå¸¸å¥½åœ°æ”¯æŒ `flow` è¯­æ³•è§„åˆ™

* [ã€ `VS Code` ã€‘](https://code.visualstudio.com/)ä¹Ÿæ˜¯ç›®å‰éå¸¸å— JS å¼€å‘è€…æ¬¢è¿çš„ IDE å·¥å…·

[ã€ `Ignite` ã€‘](https://github.com/infinitered/ignite)æ˜¯ä¸€å¥—æ•´åˆäº† Redux ä»¥åŠä¸€äº›å¸¸è§ UI ç»„ä»¶çš„è„šæ‰‹æ¶ï¼š

* å®ƒå¸¦æœ‰ä¸€ä¸ªå‘½ä»¤è¡Œå¯ä»¥ç”Ÿæˆ `app` ã€ç»„ä»¶æˆ–æ˜¯å®¹å™¨

* å¦‚æœä½ å–œæ¬¢å®ƒçš„é€‰æ‹©æ­é…ï¼Œé‚£ä¹ˆä¸å¦¨ä¸€è¯•

[ã€ `App Center` ã€‘](https://appcenter.ms/)æ˜¯ç”±å¾®è½¯æä¾›çš„çƒ­æ›´æ–°æœåŠ¡ï¼š

* çƒ­æ›´æ–°å¯ä»¥ä½¿ä½ ç»•è¿‡ `AppStore` çš„å®¡æ ¸æœºåˆ¶ï¼Œç›´æ¥ä¿®æ”¹å·²ç»ä¸Šæ¶çš„åº”ç”¨

* å¯¹äºå›½å†…ç”¨æˆ·ï¼Œæˆ‘ä»¬ä¹Ÿæ¨èç”±æœ¬ç½‘ç«™æä¾›çš„ `Pushy` çƒ­æ›´æ–°æœåŠ¡

  * ç›¸æ¯” `CodePush` æ¥è¯´ï¼Œæä¾›äº†å…¨ä¸­æ–‡çš„æ–‡æ¡£å’ŒæŠ€æœ¯æ”¯æŒï¼ŒæœåŠ¡å™¨éƒ¨ç½²åœ¨å›½å†…é€Ÿåº¦æ›´å¿«ï¼Œè¿˜æä¾›äº†å…¨è‡ªåŠ¨çš„å·®é‡æ›´æ–°æ–¹å¼ï¼Œå¤§å¹…èŠ‚çº¦æ›´æ–°æµé‡ï¼Œæ¬¢è¿æœ‹å‹ä»¬è¯•ç”¨å’Œåé¦ˆæ„è§ï¼

[ã€ `Expo` ã€‘](https://docs.expo.io/)æ˜¯ä¸€å¥—æ²™ç›’å¼€å‘ç¯å¢ƒï¼Œè¿˜å¸¦æœ‰ä¸€ä¸ªå·²ä¸Šæ¶çš„ç©ºåº”ç”¨å®¹å™¨

* è¿™æ ·ä½ å¯ä»¥åœ¨æ²¡æœ‰åŸç”Ÿå¼€å‘å¹³å°ï¼ˆ `Xcode` æˆ–æ˜¯ `Android Studio` ï¼‰çš„æƒ…å†µä¸‹ç›´æ¥ç¼–å†™ `React Native` åº”ç”¨

* æ³¨æ„ï¼šè¿™æ ·ä½ åªèƒ½å†™ `JavaScript` éƒ¨åˆ†ä»£ç è€Œæ²¡æ³•å†™åŸç”Ÿä»£ç 

[ã€ `Yoga` ã€‘](https://yogalayout.com/)æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¸ƒå±€å¼•æ“

* å®ƒè¶…è¶Šäº† `React Native` ï¼Œå…è®¸äº§å“å·¥ç¨‹å¸ˆé€šè¿‡ä¸€ä¸ªé«˜åº¦ä¼˜åŒ–çš„å¼€æºå¸ƒå±€å¼•æ“å¿«é€Ÿä¸ºå¤šä¸ªå¹³å°æ„å»ºå¸ƒå±€

* è¯¥å¼•æ“çš„è®¾è®¡è€ƒè™‘åˆ°äº†é€Ÿåº¦ã€å¤§å°å’Œæ˜“ç”¨æ€§

`Bugsnag` ã€`Microsoft App Center` å’Œ `Sentry` éƒ½ä¸º `React` å’Œ `React Native` æä¾›å‡ºè‰²çš„å´©æºƒå’Œé”™è¯¯ç›‘æ§æœåŠ¡

* è¿™äº›æœåŠ¡å…è®¸æ‚¨ä¸»åŠ¨å®æ—¶ç›‘æ§åº”ç”¨ç¨‹åºä¸Šå‘ç”Ÿçš„å´©æºƒå’Œé—®é¢˜ï¼Œä»¥ä¾¿å¿«é€Ÿä¿®å¤å®ƒä»¬å¹¶æ”¹å–„ç”¨æˆ·ä½“éªŒ

### `React Native` çš„äº¤æµç¤¾åŒº

ä»¥ä¸‹è¿™äº›éƒ½æ˜¯è‹±æ–‡çš„äº¤æµåŒºï¼Œæˆ‘ä¹Ÿå°±ä¸ç¿»è¯‘äº†â€¦â€¦

The [React Native Community](https://www.facebook.com/groups/react.native.community) Facebook group has thousands of developers, and it's pretty active. Come there to show off your project, or ask how other people solved similar problems.

[Reactiflux](https://discord.gg/0ZcbPKXt5bZjGY5n) is a Discord chat where a lot of React-related discussion happens, including React Native. Discord is just like Slack except it works better for open source projects with a zillion contributors. Check out the #react-native channel.

The [React Twitter account](https://twitter.com/reactjs) covers both React and React Native. Follow the React Native Twitter account and blog to find out what's happening in the world of React Native.

There are a lot of [React Native Meetups](http://www.meetup.com/topics/react-native/) that happen around the world. Often there is React Native content in React meetups as well.

Sometimes we have React conferences. We posted the [videos from React.js Conf 2017](https://www.youtube.com/playlist?list=PLb0IAmt7-GS3fZ46IGFirdqKTIxlws7e0) and [React.js Conf 2016](https://www.youtube.com/playlist?list=PLb0IAmt7-GS0M8Q95RIc2lOM6nc77q1IY), and we'll probably have more conferences in the future, too. Stay tuned. You can also find a list of dedicated React Native conferences [here](http://www.awesome-react-native.com/#conferences).

æ¬¢è¿æœ‹å‹ä»¬åœ¨[ã€è®ºå›åˆ†äº«åŒºã€‘](http://bbs.reactnative.cn/category/5/)åˆ†äº«ä¸­æ–‡æ•™ç¨‹å’Œèµ„æº


# è¿›é˜¶æŒ‡å—

## ç»„ä»¶å’Œ `API`

> `React Native` æä¾›äº†ä¸€äº›å†…ç½®çš„ç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨ç½‘ç«™çš„å·¦ä¾§çœ‹åˆ°ç»„ä»¶çš„å®Œæ•´åˆ—è¡¨

å¦‚æœä½ ä¸çŸ¥é“ä»å“ªçœ‹èµ·ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆçœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªç®€å•çš„åˆ†ç±»ï¼š

* [ã€åŸºç¡€ç»„ä»¶ã€‘](https://reactnative.cn/docs/components-and-apis#åŸºç¡€ç»„ä»¶)
* [ã€äº¤äº’æ§ä»¶ã€‘](https://reactnative.cn/docs/components-and-apis#äº¤äº’æ§ä»¶)
* [ã€åˆ—è¡¨è§†å›¾ã€‘](https://reactnative.cn/docs/components-and-apis#åˆ—è¡¨è§†å›¾)
* [ã€ `iOS` ç‹¬æœ‰ç»„ä»¶ã€‘](https://reactnative.cn/docs/components-and-apis#iOSç‹¬æœ‰çš„ç»„ä»¶å’ŒAPI)
* [ã€ `Android` ç‹¬æœ‰ç»„ä»¶ã€‘](https://reactnative.cn/docs/components-and-apis#Androidç‹¬æœ‰çš„ç»„ä»¶å’ŒAPI)
* [ã€å…¶ä»–ã€‘](https://reactnative.cn/docs/components-and-apis#å…¶ä»–)

> éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä½ ä¸ç”¨è¢«å±€é™åœ¨è¿™äº›å†…ç½®ç»„ä»¶ä¸Š

`React Native` æ˜¯å¤§å¼€æºç¤¾åŒºçš„ä½œå“ï¼Œæ‰€ä»¥ä½ è¿˜å¯ä»¥åœ¨ `github` æˆ–æ˜¯ `npm` ä¸Šæœç´¢åˆ°å¸¦æœ‰ `react native` å…³é”®å­—çš„å¤§é‡çš„ç¬¬ä¸‰æ–¹ç»„ä»¶

### åŸºç¡€ç»„ä»¶

å¤§å¤šæ•°åº”ç”¨éƒ½ä¼šç”¨åˆ°è¿™é‡Œçš„åŸºç¡€ç»„ä»¶ï¼Œå¦‚æœä½ æ˜¯æ–°æ‰‹çš„è¯ï¼Œé‚£æ›´åº”è¯¥å…ˆå¥½å¥½ç†Ÿæ‚‰ä¸€ä¸‹è¿™äº›ç»„ä»¶ï¼š

* `View`

  æ­å»ºç”¨æˆ·ç•Œé¢çš„æœ€åŸºç¡€ç»„ä»¶

* `Text`

  æ˜¾ç¤ºæ–‡æœ¬å†…å®¹çš„ç»„ä»¶

* `Image`

  æ˜¾ç¤ºå›¾ç‰‡å†…å®¹çš„ç»„ä»¶

* `TextInput`

  æ–‡æœ¬è¾“å…¥æ¡†

* `ScrollView`

  å¯æ»šåŠ¨çš„å®¹å™¨è§†å›¾

* `StyleSheet`

  æä¾›ç±»ä¼¼CSSæ ·å¼è¡¨çš„æ ·å¼æŠ½è±¡å±‚

### äº¤äº’æ§ä»¶

æä¾›ä¸€äº›å¸¸è§çš„è·¨å¹³å°çš„äº¤äº’æ§ä»¶ï¼š

* `Button`

  ä¸€ä¸ªç®€å•çš„è·¨å¹³å°çš„æŒ‰é’®æ§ä»¶

* `Picker`

  åœ¨ `iOS` å’Œ `Android` ä¸Šè°ƒç”¨å„è‡ªåŸç”Ÿçš„é€‰æ‹©å™¨æ§ä»¶

* `Slider`

  æ»‘åŠ¨æ•°å€¼é€‰æ‹©å™¨

* `Switch`

  å¼€å…³æ§ä»¶

### åˆ—è¡¨è§†å›¾

å’Œä¸€èˆ¬åŒ–ç”¨é€”çš„ `ScrollView` ä¸åŒï¼Œä¸‹é¢çš„åˆ—è¡¨ç»„ä»¶åªä¼šæ¸²æŸ“å½“å‰å±å¹•å¯è§çš„å…ƒç´ ï¼Œè¿™æ ·æœ‰åˆ©äºæ˜¾ç¤ºå¤§é‡çš„æ•°æ®ï¼š

* `FlatList`

  é«˜æ€§èƒ½çš„æ»šåŠ¨åˆ—è¡¨ç»„ä»¶

* `SectionList`

  ç±»ä¼¼ `FlatList` ï¼Œä½†æ˜¯å¤šäº†åˆ†ç»„æ˜¾ç¤º

### `iOS` ç‹¬æœ‰çš„ç»„ä»¶å’Œ `API`

ä¸‹é¢å¾ˆå¤šç»„ä»¶éƒ½æ˜¯å¯¹å¸¸ç”¨çš„ `UIKit` ç±»çš„å°è£…ï¼š

* `ActionSheetIOS`

  ä»è®¾å¤‡åº•éƒ¨å¼¹å‡ºä¸€ä¸ªæ˜¾ç¤ºä¸€ä¸ªActionSheetå¼¹å‡ºæ¡†é€‰é¡¹èœå•æˆ–åˆ†äº«èœå•

* `AlertIOS`

  å¼¹å‡ºä¸€ä¸ªæç¤ºå¯¹è¯æ¡†ï¼Œè¿˜å¯ä»¥å¸¦æœ‰è¾“å…¥æ¡†

* `DatePickerIOS`

  æ˜¾ç¤ºä¸€ä¸ªæ—¥æœŸ/æ—¶é—´é€‰æ‹©å™¨

* `ImagePickerIOS`

  æ’å…¥å›¾ç‰‡

* `NavigatorIOS`

  `UINavigationController` çš„å°è£…ï¼Œç”¨äºå®ç°é¡µé¢çš„å¯¼èˆªè·³è½¬

* `ProgressViewIOS`

  æ¸²æŸ“ä¸€ä¸ª `UIProgressView` è¿›åº¦æ¡

* `PushNotificationIOS`

  ç®¡ç†æ¨é€é€šçŸ¥ï¼ŒåŒ…æ‹¬æƒé™å¤„ç†å’Œåº”ç”¨è§’æ ‡æ•°å­—

* `SegmentedControlIOS`

  æ¸²æŸ“ä¸€ä¸ªUISegmentedControlé¡¶éƒ¨é€‰é¡¹å¡å¸ƒå±€

* `TabBarIOS`

  æ¸²æŸ“ä¸€ä¸ª `UITabViewController` åº•éƒ¨é€‰é¡¹å¡å¸ƒå±€

  éœ€è¦å’Œ `TabBarIOS.Item` æ­é…ä½¿ç”¨

### `Android` ç‹¬æœ‰çš„ç»„ä»¶å’Œ `API`

ä¸‹é¢å¾ˆå¤šç»„ä»¶æä¾›äº†å¯¹ Andriod å¸¸ç”¨ç±»çš„å°è£…ï¼š

* `BackHandler`

  ç›‘å¬å¹¶å¤„ç†è®¾å¤‡ä¸Šçš„è¿”å›æŒ‰é’®

* `DatePickerAndroid`

  æ‰“å¼€æ—¥æœŸé€‰æ‹©å™¨

* `DrawerLayoutAndroid`

  æ¸²æŸ“ä¸€ä¸ª `DrawerLayout` æŠ½å±‰å¸ƒå±€

* `PermissionsAndroid`

  å¯¹ `Android 6.0` å¼•å…¥çš„æƒé™æ¨¡å‹çš„å°è£…

* `ProgressBarAndroid`

  æ¸²æŸ“ä¸€ä¸ª `ProgressBar` è¿›åº¦æ¡

* `TimePickerAndroid`

  æ‰“å¼€æ—¶é—´é€‰æ‹©å™¨

* `ToastAndroid`

  å¼¹å‡ºä¸€ä¸ª `Toast` æç¤ºæ¡†

* `ToolbarAndroid`

  åœ¨é¡¶éƒ¨æ¸²æŸ“ä¸€ä¸ª `Toolbar` å·¥å…·æ 

* `ViewPagerAndroid`

  å¯å·¦å³ç¿»é¡µæ»‘åŠ¨çš„è§†å›¾å®¹å™¨

### å…¶ä»–

ä¸‹é¢çš„ç»„ä»¶å¯èƒ½é€‚ç”¨äºä¸€äº›ç‰¹å®šåœºæ™¯ï¼š

* `ActivityIndicator`

  æ˜¾ç¤ºä¸€ä¸ªåœ†å½¢çš„æ­£åœ¨åŠ è½½çš„ç¬¦å·

* `Alert`

  å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œæ˜¾ç¤ºæŒ‡å®šçš„æ ‡é¢˜å’Œä¿¡æ¯

* `Animated`

  æ˜“äºä½¿ç”¨å’Œç»´æŠ¤çš„åŠ¨ç”»åº“ï¼Œå¯ç”Ÿæˆæµç•…è€Œå¼ºå¤§çš„åŠ¨ç”»

* `CameraRoll`

  è®¿é—®æœ¬åœ°ç›¸å†Œ

* `Clipboard`

  è¯»å†™å‰ªè´´æ¿å†…å®¹

* `Dimensions`

  è·å–è®¾å¤‡å°ºå¯¸

* `KeyboardAvoidingView`

  ä¸€ç§è§†å›¾å®¹å™¨ï¼Œå¯ä»¥éšé”®ç›˜å‡èµ·è€Œè‡ªåŠ¨ç§»åŠ¨

* `Linking`

  æä¾›äº†ä¸€ä¸ªé€šç”¨çš„æ¥å£æ¥è°ƒèµ·å…¶ä»–åº”ç”¨æˆ–è¢«å…¶ä»–åº”ç”¨è°ƒèµ·

* `Modal`

  ä¸€ç§ç®€å•çš„è¦†ç›–å…¨å±çš„æ¨¡æ€è§†å›¾

* `PixelRatio`

  å¯ä»¥è·å–è®¾å¤‡çš„åƒç´ å¯†åº¦

* `RefreshControl`

  æ­¤ç»„ä»¶ç”¨åœ¨ `ScrollView` åŠå…¶è¡ç”Ÿç»„ä»¶çš„å†…éƒ¨ï¼Œç”¨äºæ·»åŠ ä¸‹æ‹‰åˆ·æ–°çš„åŠŸèƒ½

* `StatusBar`

  ç”¨äºæ§åˆ¶åº”ç”¨é¡¶éƒ¨çŠ¶æ€æ æ ·å¼çš„ç»„ä»¶

* `WebView`

  åœ¨åŸç”Ÿè§†å›¾ä¸­æ˜¾ç¤º `Web` å†…å®¹çš„ç»„ä»¶

## ç‰¹å®šå¹³å°ä»£ç 

> åœ¨ç¼–å†™è·¨å¹³å°çš„åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬è‚¯å®šå¸Œæœ›å°½å¯èƒ½å¤šåœ°å¤ç”¨ä»£ç ï¼›ä½†æ˜¯æ€»æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¼šç¢°åˆ°é’ˆå¯¹ä¸åŒå¹³å°ç¼–å†™ä¸åŒä»£ç çš„éœ€æ±‚

`React Native` æä¾›äº†ä¸¤ç§æ–¹æ³•æ¥åŒºåˆ†å¹³å°ï¼š

* ä½¿ç”¨ `Platform` æ¨¡å—

* ä½¿ç”¨ç‰¹å®šå¹³å°æ‰©å±•å

> å¦å¤–ï¼Œæœ‰äº›å†…ç½®ç»„ä»¶çš„æŸäº›å±æ€§å¯èƒ½åªåœ¨ç‰¹å®šå¹³å°ä¸Šæœ‰æ•ˆ

### `Platform` æ¨¡å—

> `React Native` æä¾›äº†ä¸€ä¸ªæ£€æµ‹å½“å‰è¿è¡Œå¹³å°çš„æ¨¡å—

å¦‚æœç»„ä»¶åªæœ‰ä¸€å°éƒ¨åˆ†ä»£ç éœ€è¦ä¾æ®å¹³å°å®šåˆ¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å—å°±å¯ä»¥æ´¾ä¸Šç”¨åœºï¼š

```jsx
import { Platform, StyleSheet } from "react-native";

const styles = StyleSheet.create({
  height: Platform.OS === "ios" ? 200 : 100
});
```

* `Platform.OS` åœ¨ `iOS` ä¸Šä¼šè¿”å› `iOS`

* è€Œåœ¨ `Android` è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šåˆ™ä¼šè¿”å› `Android`

è¿˜æœ‰ä¸ªå®ç”¨çš„æ–¹æ³•æ˜¯ `Platform.select()`

* å®ƒå¯ä»¥ä»¥ `Platform.OS` ä¸º `key` ï¼Œä»ä¼ å…¥çš„å¯¹è±¡ä¸­è¿”å›å¯¹åº”å¹³å°çš„å€¼ï¼Œè§ä¸‹é¢çš„ç¤ºä¾‹ï¼š

```jsx
import { Platform, StyleSheet } from "react-native";

const styles = StyleSheet.create({
  container: {
    flex: 1,
    ...Platform.select({
      ios: {
        backgroundColor: "red"
      },
      android: {
        backgroundColor: "blue"
      }
    })
  }
})
```

* ä¸Šé¢çš„ä»£ç ä¼šæ ¹æ®å¹³å°çš„ä¸åŒè¿”å›ä¸åŒçš„ `container` æ ·å¼

  * `iOS` ä¸ŠèƒŒæ™¯è‰²ä¸º `çº¢è‰²` ï¼Œè€Œ `Android` ä¸º `è“è‰²`

`Platform.select()` æ–¹æ³•å¯ä»¥æ¥å—ä»»ä½•åˆæ³•ç±»å‹çš„å‚æ•°

* ä½ å¯ä»¥ç›´æ¥ç”¨å®ƒé’ˆå¯¹ä¸åŒå¹³å°è¿”å›ä¸åŒçš„ç»„ä»¶ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š

```jsx
const Component = Platform.select({
  ios: () => require("ComponentIOS"),
  android: () => require("ComponentAndroid")
})();

<Component />;
```

#### æ£€æµ‹ `Android` ç‰ˆæœ¬

åœ¨ `Android` ä¸Šï¼Œ`Version` å±æ€§æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤º `Android` çš„ `api level` ï¼š

```jsx
import { Platform } from "react-native";

if (Platform.Version === 25) {
  console.log("Running on Nougat!");
}
```

#### æ£€æµ‹ `iOS` ç‰ˆæœ¬

åœ¨ `iOS` ä¸Šï¼Œ`Version` å±æ€§æ˜¯ `-[UIDevice systemVersion]` çš„è¿”å›å€¼ï¼š

* å…·ä½“å½¢å¼ä¸ºä¸€ä¸ªè¡¨ç¤ºå½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å­—ç¬¦ä¸²

* æ¯”å¦‚å¯èƒ½æ˜¯ `10.3`

```jsx
import { Platform } from "react-native";

const majorVersionIOS = parseInt(Platform.Version, 10);
if (majorVersionIOS <= 9) {
  console.log("Work around a change in behavior");
}
```

### ç‰¹å®šå¹³å°æ‰©å±•å

> å½“ä¸åŒå¹³å°çš„ä»£ç é€»è¾‘è¾ƒä¸ºå¤æ‚æ—¶ï¼Œæœ€å¥½æ˜¯æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å®šå¹³å°æ‰©å±•å

`React Native` ä¼šæ£€æµ‹æŸä¸ªæ–‡ä»¶æ˜¯å¦å…·æœ‰ `.ios.` æˆ–æ˜¯ `.android.` çš„æ‰©å±•åï¼Œç„¶åæ ¹æ®å½“å‰è¿è¡Œçš„å¹³å°è‡ªåŠ¨åŠ è½½æ­£ç¡®å¯¹åº”çš„æ–‡ä»¶

* æ¯”å¦‚ä½ å¯ä»¥åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸‹é¢è¿™æ ·çš„ç»„ä»¶ï¼š

  ```
  BigButton.ios.js
  BigButton.android.js
  ```

* ç„¶åå»æ‰å¹³å°æ‰©å±•åç›´æ¥å¼•ç”¨ï¼š

  ```jsx
  import BigButton from './BigButton';
  ```

* `React Native` ä¼šæ ¹æ®è¿è¡Œå¹³å°çš„ä¸åŒè‡ªåŠ¨å¼•å…¥æ­£ç¡®å¯¹åº”çš„ç»„ä»¶

å¦‚æœä½ è¿˜å¸Œæœ›åœ¨ `web` ç«¯å¤ç”¨ `React Native` çš„ä»£ç ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ `.native.js` çš„æ‰©å±•å

* æ­¤æ—¶ `iOS` å’Œ `Android` ä¼šä½¿ç”¨ `BigButton.native.js` æ–‡ä»¶

* è€Œ `web` ç«¯ä¼šä½¿ç”¨ `BigButton.js`

> æ³¨æ„ï¼šç›®å‰å®˜æ–¹å¹¶æ²¡æœ‰ç›´æ¥æä¾› `web` ç«¯çš„æ”¯æŒï¼Œè¯·åœ¨ç¤¾åŒºæœç´¢ç¬¬ä¸‰æ–¹æ–¹æ¡ˆ

ä¾‹å¦‚ï¼Œå‡è®¾é¡¹ç›®ä¸­æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š

```
Container.js # ç”± Webpackã€Rollup æˆ–ä»»ä½•å…¶ä»– Web bundler è·å–

Container.native.js # ç”± React Native Bundler ä¸º Android å’Œ iOSï¼ˆMetroï¼‰æŒ‘é€‰
```

æ‚¨ä»ç„¶å¯ä»¥åœ¨ä¸ä½¿ç”¨ `.native` æ‰©å±•åçš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```jsx
import Container from './Container';
```

> æç¤ºï¼šå°† `Web bundler` é…ç½®ä¸ºå¿½ç•¥ `.native.js` æ‰©å±•ï¼Œä»¥é¿å…åœ¨ç”Ÿäº§åŒ…ä¸­ä½¿ç”¨æœªä½¿ç”¨çš„ä»£ç ï¼Œä»è€Œå‡å°‘æœ€ç»ˆçš„åŒ…å¤§å°

## ä½¿ç”¨å¯¼èˆªå™¨è·³è½¬é¡µé¢

> ç§»åŠ¨åº”ç”¨åŸºæœ¬ä¸ä¼šåªç”±ä¸€ä¸ªé¡µé¢ç»„æˆï¼›ç®¡ç†å¤šä¸ªé¡µé¢çš„å‘ˆç°ã€è·³è½¬çš„ç»„ä»¶å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å¯¼èˆªå™¨ï¼ˆ `navigator` ï¼‰

æœ¬æ–‡æ¡£æ€»ç»“å¯¹æ¯”äº† `React Native` ä¸­ç°æœ‰çš„å‡ ä¸ªå¯¼èˆªç»„ä»¶

* å¦‚æœä½ åˆšå¼€å§‹æ¥è§¦ï¼Œé‚£ä¹ˆç›´æ¥é€‰æ‹© `React Navigation` å°±å¥½

* `React Navigation` æä¾›äº†ç®€å•æ˜“ç”¨çš„è·¨å¹³å°å¯¼èˆªæ–¹æ¡ˆï¼Œåœ¨ `iOS` å’Œ `Android` ä¸Šéƒ½å¯ä»¥è¿›è¡Œç¿»é¡µå¼ã€`tab` é€‰é¡¹å¡å¼å’ŒæŠ½å±‰å¼çš„å¯¼èˆªå¸ƒå±€

å¦‚æœä½ æƒ³åŒæ—¶åœ¨ `iOS` å’Œ `Android` ä¸Šè¾¾åˆ°çœ‹èµ·æ¥åƒåŸç”Ÿ

* æˆ–è€…ä½ æƒ³æŠŠ `React Native` æ•´åˆåˆ°ä¸€ä¸ªå·²ç»æœ‰åŸç”Ÿå¯¼èˆªç®¡ç†çš„ `APP` é‡Œ

* è¿™ä¸ªåº“æä¾›äº†åœ¨ä¸¤ä¸ªå¹³å°éƒ½é€‚ç”¨çš„åŸç”Ÿå¯¼èˆªï¼š`react-native-navigation`

### `React Navigation`

> ç¤¾åŒºä»Šåä¸»æ¨çš„æ–¹æ¡ˆæ˜¯ä¸€ä¸ªå•ç‹¬çš„å¯¼èˆªåº“ `react-navigation` ï¼Œå®ƒçš„ä½¿ç”¨ååˆ†ç®€å•

`React Navigation` ä¸­çš„è§†å›¾æ˜¯åŸç”Ÿç»„ä»¶ï¼ŒåŒæ—¶ç”¨åˆ°äº†è¿è¡Œåœ¨åŸç”Ÿçº¿ç¨‹ä¸Šçš„ `Animated` åŠ¨ç”»åº“ï¼Œå› è€Œæ€§èƒ½è¡¨ç°ååˆ†æµç•…

* æ­¤å¤–å…¶åŠ¨ç”»å½¢å¼å’Œæ‰‹åŠ¿éƒ½éå¸¸ä¾¿äºå®šåˆ¶

* è¦æƒ³è¯¦ç»†äº†è§£ `React Navigation` çš„å…·ä½“ç”¨æ³•ï¼Œè¯·è®¿é—®å…¶[ã€å®˜æ–¹ç½‘ç«™ã€‘](https://reactnavigation.org/)

  * ç½‘ç«™å³ä¸Šè§’æœ‰ä¸­æ–‡ç¿»è¯‘ï¼Œä½†å†…å®¹å¯èƒ½ä¼šæœ‰æ‰€æ»å

## å›¾ç‰‡

### é™æ€å›¾ç‰‡èµ„æº

> `React Native` æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å¼æ¥ç®¡ç† `iOS` å’Œ `Android` åº”ç”¨ä¸­çš„å›¾ç‰‡

è¦å¾€ `App` ä¸­æ·»åŠ ä¸€ä¸ªé™æ€å›¾ç‰‡ï¼Œåªéœ€æŠŠå›¾ç‰‡æ–‡ä»¶æ”¾åœ¨ä»£ç æ–‡ä»¶å¤¹ä¸­æŸå¤„ï¼Œç„¶ååƒä¸‹é¢è¿™æ ·å»å¼•ç”¨å®ƒï¼š

```jsx
<Image source={require('./my-icon.png')} />
```

> æ³¨æ„ï¼Œä¸€äº›è€æ–‡ç« å’Œæ•™ç¨‹æåˆ°çš„ `require('image!xxx')` çš„å†™æ³•å·²ç»ä» `0.40` ç‰ˆæœ¬å¼€å§‹ä¸å†æ”¯æŒï¼

å›¾ç‰‡æ–‡ä»¶çš„æŸ¥æ‰¾ä¼šå’Œ `JavaScript` æ¨¡å—çš„æŸ¥æ‰¾æ–¹å¼ä¸€æ ·

* åœ¨å‰é¢çš„ä¾‹å­é‡Œï¼Œæ˜¯å“ªä¸ªç»„ä»¶å¼•ç”¨äº†è¿™ä¸ªå›¾ç‰‡ï¼Œ`Packager` å°±ä¼šå»è¿™ä¸ªç»„ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾ `my-icon.png`

* å¦‚æœä½ æœ‰ `my-icon.ios.png` å’Œ `my-icon.android.png` ï¼Œ`Packager` å°±ä¼šæ ¹æ®å¹³å°è€Œé€‰æ‹©ä¸åŒçš„æ–‡ä»¶

  * ä½ è¿˜å¯ä»¥ä½¿ç”¨ `@2x` ï¼Œ`@3x` è¿™æ ·çš„æ–‡ä»¶ååç¼€ï¼Œæ¥ä¸ºä¸åŒçš„å±å¹•ç²¾åº¦æä¾›å›¾ç‰‡

  * æ¯”å¦‚ä¸‹é¢è¿™æ ·çš„ä»£ç ç»“æ„ï¼š

  ```
  .
  â”œâ”€â”€ button.js
  â””â”€â”€ img
      â”œâ”€â”€ check.png
      â”œâ”€â”€ check@2x.png
      â””â”€â”€ check@3x.png
  ```

  * å¹¶ä¸” `button.js` é‡Œæœ‰è¿™æ ·çš„ä»£ç ï¼š

    ```jsx
    <Image source={require('./img/check.png')} />
    ```

`Packager` ä¼šæ‰“åŒ…æ‰€æœ‰çš„å›¾ç‰‡å¹¶ä¸”ä¾æ®å±å¹•ç²¾åº¦æä¾›å¯¹åº”çš„èµ„æº

* è­¬å¦‚è¯´ï¼Œ`iPhone 7` ä¼šä½¿ç”¨ `check@2x.png`

* è€Œ `iPhone 7 plus` æˆ–æ˜¯ `Nexus 5` ä¸Šåˆ™ä¼šä½¿ç”¨ `check@3x.png`

* å¦‚æœæ²¡æœ‰å›¾ç‰‡æ°å¥½æ»¡è¶³å±å¹•åˆ†è¾¨ç‡ï¼Œåˆ™ä¼šè‡ªåŠ¨é€‰ä¸­æœ€æ¥è¿‘çš„ä¸€ä¸ªå›¾ç‰‡

> æ³¨æ„ï¼šå¦‚æœä½ æ·»åŠ å›¾ç‰‡çš„æ—¶å€™ `packager` æ­£åœ¨è¿è¡Œï¼Œå¯èƒ½éœ€è¦é‡å¯ `packager` ä»¥ä¾¿èƒ½æ­£ç¡®å¼•å…¥æ–°æ·»åŠ çš„å›¾ç‰‡

è¿™æ ·ä¼šå¸¦æ¥å¦‚ä¸‹çš„ä¸€äº›å¥½å¤„ï¼š

* `iOS` å’Œ `Android` ä¸€è‡´çš„æ–‡ä»¶ç³»ç»Ÿ

* å›¾ç‰‡å’Œ `JavaScript` ä»£ç å¤„åœ¨ç›¸åŒçš„æ–‡ä»¶å¤¹ï¼Œè¿™æ ·ç»„ä»¶å°±å¯ä»¥åŒ…å«è‡ªå·±æ‰€ç”¨çš„å›¾ç‰‡è€Œä¸ç”¨å•ç‹¬å»è®¾ç½®

* ä¸éœ€è¦å…¨å±€å‘½åï¼Œä½ ä¸ç”¨å†æ‹…å¿ƒå›¾ç‰‡åå­—çš„å†²çªé—®é¢˜äº†

* åªæœ‰å®é™…è¢«ç”¨åˆ°ï¼ˆå³è¢« `require` ï¼‰çš„å›¾ç‰‡æ‰ä¼šè¢«æ‰“åŒ…åˆ°ä½ çš„ `app`

* ç°åœ¨åœ¨å¼€å‘æœŸé—´ï¼Œå¢åŠ å’Œä¿®æ”¹å›¾ç‰‡ä¸éœ€è¦é‡æ–°ç¼–è¯‘äº†ï¼Œåªè¦å’Œä¿®æ”¹ `JavaScript` ä»£ç ä¸€æ ·åˆ·æ–°ä½ çš„æ¨¡æ‹Ÿå™¨å°±å¯ä»¥äº†

* ä¸è®¿é—®ç½‘ç»œå›¾ç‰‡ç›¸æ¯”ï¼Œ`Packager` å¯ä»¥å¾—çŸ¥å›¾ç‰‡å¤§å°äº†ï¼Œä¸éœ€è¦åœ¨ä»£ç é‡Œå†å£°æ˜ä¸€éå°ºå¯¸

* ç°åœ¨é€šè¿‡ `npm` æ¥åˆ†å‘ç»„ä»¶æˆ–åº“å¯ä»¥åŒ…å«å›¾ç‰‡äº†

> æ³¨æ„ï¼šä¸ºäº†ä½¿æ–°çš„å›¾ç‰‡èµ„æºæœºåˆ¶æ­£å¸¸å·¥ä½œï¼Œ`require` ä¸­çš„å›¾ç‰‡åå­—å¿…é¡»æ˜¯ä¸€ä¸ªé™æ€å­—ç¬¦ä¸²

`require` ä¸­çš„å›¾ç‰‡åå­—ä¸èƒ½ä½¿ç”¨å˜é‡ï¼å› ä¸º `require` æ˜¯åœ¨ç¼–è¯‘æ—¶æœŸæ‰§è¡Œï¼Œè€Œéè¿è¡Œæ—¶æœŸæ‰§è¡Œï¼

```jsx
// æ­£ç¡®
<Image source={require('./my-icon.png')} />;

// é”™è¯¯
var icon = this.props.active ? 'my-icon-active' : 'my-icon-inactive';
<Image source={require('./' + icon + '.png')} />;

// æ­£ç¡®
var icon = this.props.active
  ? require('./my-icon-active.png')
  : require('./my-icon-inactive.png');
<Image source={icon} />;
```

> è¯·æ³¨æ„ï¼šé€šè¿‡è¿™ç§æ–¹å¼å¼•ç”¨çš„å›¾ç‰‡èµ„æºåŒ…å«å›¾ç‰‡çš„å°ºå¯¸ï¼ˆå®½åº¦ï¼Œé«˜åº¦ï¼‰ä¿¡æ¯ï¼Œå¦‚æœä½ éœ€è¦åŠ¨æ€ç¼©æ”¾å›¾ç‰‡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ flexï¼‰ï¼Œä½ å¯èƒ½å¿…é¡»æ‰‹åŠ¨åœ¨ `style` å±æ€§è®¾ç½® `{ width: null, height: null }`

### é™æ€çš„éå›¾ç‰‡èµ„æº

> ä¸Šé¢æè¿°çš„ `require` è¯­æ³•ä¹Ÿå¯ä»¥ç”¨æ¥é™æ€åœ°åŠ è½½ä½ é¡¹ç›®ä¸­çš„å£°éŸ³ã€è§†é¢‘æˆ–è€…æ–‡æ¡£æ–‡ä»¶

å¤§å¤šæ•°å¸¸è§æ–‡ä»¶ç±»å‹éƒ½æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š

* `.mp3`
* `.wav`
* `.mp4`
* `.mov`
* `.htm`
* `.pdf`
* â€¦â€¦ç­‰

> å®Œæ•´åˆ—è¡¨è¯·çœ‹[ã€ `packager defaults` ã€‘](https://github.com/facebook/metro/blob/master/packages/metro-config/src/defaults/defaults.js#L14-L44)


ä½ ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„é…ç½®æ–‡ä»¶æ¥æ”¯æŒå…¶ä»–ç±»å‹çš„æ–‡ä»¶

* å…·ä½“çš„é…ç½®å¯ä»¥å‚è€ƒ[ã€ `packager config file` ã€‘](https://github.com/facebook/react-native/blob/0.57-stable/local-cli/util/Config.js#L65)

> éœ€è¦æ³¨æ„çš„æ˜¯è§†é¢‘å¿…é¡»æŒ‡å®šå°ºå¯¸è€Œä¸èƒ½ä½¿ç”¨ `flex` æ ·å¼ï¼Œå› ä¸ºæˆ‘ä»¬ç›®å‰è¿˜ä¸èƒ½ä»éå›¾ç‰‡èµ„æºä¸­è·å–åˆ°å°ºå¯¸ä¿¡æ¯

å¯¹äºç›´æ¥é“¾æ¥åˆ° `Xcode` æˆ–è€… `Android` èµ„æºæ–‡ä»¶å¤¹çš„è§†é¢‘ï¼Œåˆ™ä¸ä¼šæœ‰è¿™ä¸ªé™åˆ¶

### ä½¿ç”¨æ··åˆ `App` çš„å›¾ç‰‡èµ„æº

å¦‚æœä½ åœ¨ç¼–å†™ä¸€ä¸ªæ··åˆ `App`

* ä¸€éƒ¨åˆ† `UI` ä½¿ç”¨ `React Native` ï¼Œè€Œå¦ä¸€éƒ¨åˆ†ä½¿ç”¨å¹³å°åŸç”Ÿä»£ç 

* å¯ä»¥ä½¿ç”¨å·²ç»æ‰“åŒ…åˆ° `App` ä¸­çš„å›¾ç‰‡èµ„æº

  * ä»¥æ‹–æ‹½çš„æ–¹å¼æ”¾ç½®åœ¨ `Xcode` çš„ `asset` ç±»ç›®ä¸­

  * æˆ–æ˜¯æ”¾ç½®åœ¨ `Android` çš„ `drawable` ç›®å½•é‡Œ

æ³¨æ„æ­¤æ—¶åªä½¿ç”¨æ–‡ä»¶åï¼Œä¸å¸¦è·¯å¾„ä¹Ÿä¸å¸¦åç¼€ï¼š

```jsx
<Image source={{uri: 'app_icon'}} style={{width: 40, height: 40}} />
```

å¯¹äºæ”¾ç½®åœ¨ `Android` çš„ `assets` ç›®å½•ä¸­çš„å›¾ç‰‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `asset:/` å‰ç¼€æ¥å¼•ç”¨ï¼š

```jsx
<Image source={{uri: 'asset:/app_icon.png'}} style={{width: 40, height: 40}} />
```

* æ³¨æ„ï¼šè¿™äº›åšæ³•å¹¶æ²¡æœ‰ä»»ä½•å®‰å…¨æ£€æŸ¥

* ä½ éœ€è¦è‡ªå·±ç¡®ä¿å›¾ç‰‡åœ¨åº”ç”¨ä¸­ç¡®å®å­˜åœ¨ï¼Œè€Œä¸”è¿˜éœ€è¦æŒ‡å®šå°ºå¯¸

### ç½‘ç»œå›¾ç‰‡

> å¾ˆå¤šè¦åœ¨ `App` ä¸­æ˜¾ç¤ºçš„å›¾ç‰‡å¹¶ä¸èƒ½åœ¨ç¼–è¯‘çš„æ—¶å€™è·å¾—ï¼Œåˆæˆ–è€…æœ‰æ—¶å€™éœ€è¦åŠ¨æ€è½½å…¥æ¥å‡å°‘æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å°

è¿™äº›æ—¶å€™ï¼Œä¸é™æ€èµ„æºä¸åŒçš„æ˜¯ï¼š

* ä½ éœ€è¦ `æ‰‹åŠ¨æŒ‡å®šå›¾ç‰‡çš„å°ºå¯¸`

* åŒæ—¶æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ `https` ä»¥æ»¡è¶³ `iOS App Transport Security` çš„è¦æ±‚

```jsx
// æ­£ç¡®
<Image source={{uri: 'https://facebook.github.io/react/logo-og.png'}}
       style={{width: 400, height: 400}} />

// é”™è¯¯
<Image source={{uri: 'https://facebook.github.io/react/logo-og.png'}} />
```

#### ç½‘ç»œå›¾ç‰‡çš„è¯·æ±‚å‚æ•°

ä½ å¯ä»¥åœ¨ `Image` ç»„ä»¶çš„ `source` å±æ€§ä¸­æŒ‡å®šä¸€äº›è¯·æ±‚å‚æ•°ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š

```jsx
<Image
  source={{
    uri: 'https://facebook.github.io/react/logo-og.png',
    method: 'POST',
    headers: {
      Pragma: 'no-cache',
    },
    body: 'Your Body goes here',
  }}
  style={{width: 400, height: 400}}
/>
```

### `Uri` æ•°æ®å›¾ç‰‡

æœ‰æ—¶å€™ä½ å¯èƒ½æ‹¿åˆ°çš„æ˜¯å›¾ç‰‡çš„ `base64` æ•°æ®ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨'data:'æ ¼å¼æ¥æ˜¾ç¤ºå›¾ç‰‡

* è¯·æ³¨æ„ï¼šä½ éœ€è¦æ‰‹åŠ¨æŒ‡å®šå›¾ç‰‡çš„å°ºå¯¸

* å»ºè®®ä»…å¯¹éå¸¸å°çš„å›¾ç‰‡ä½¿ç”¨ `base64` æ•°æ®ï¼Œæ¯”å¦‚ä¸€äº›å°å›¾æ ‡

```jsx
// è¯·è®°å¾—æŒ‡å®šå®½é«˜ï¼
<Image
  style={{
    width: 51,
    height: 51,
    resizeMode: 'contain',
  }}
  source={{
    uri:
      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg==',
  }}
/>
```

### æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„å›¾ç‰‡

å‚è€ƒ[ã€ç›¸å†Œï¼ˆ `CameraRoll` )ã€‘](https://reactnative.cn/docs/cameraroll)è¿™ä¸ªä¾‹å­æ¥çœ‹å¦‚ä½•ä½¿ç”¨åœ¨Images.xcassetsä»¥å¤–çš„æœ¬åœ°èµ„æº

#### æœ€åˆé€‚çš„ç›¸å†Œå›¾ç‰‡

`iOS` ä¼šä¸ºåŒä¸€å¼ å›¾ç‰‡åœ¨ç›¸å†Œä¸­ä¿å­˜å¤šä¸ªä¸åŒå°ºå¯¸çš„å‰¯æœ¬

* ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œä»è¿™äº›å‰¯æœ¬ä¸­æŒ‘å‡ºæœ€åˆé€‚çš„å°ºå¯¸æ˜¾å¾—å°¤ä¸ºé‡è¦

* å¯¹äºä¸€å¤„ `200x200` å¤§å°çš„ç¼©ç•¥å›¾ï¼Œæ˜¾ç„¶ä¸åº”è¯¥é€‰æ‹©æœ€é«˜è´¨é‡çš„ `3264x2448` å¤§å°çš„å›¾ç‰‡

  * å¦‚æœæ°å¥½æœ‰åŒ¹é…çš„å°ºå¯¸ï¼Œé‚£ä¹ˆ `React Native` ä¼šè‡ªåŠ¨ä¸ºä½ é€‰å¥½

  * å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šé€‰æ‹©æœ€æ¥è¿‘çš„å°ºå¯¸è¿›è¡Œç¼©æ”¾

    * ä½†ä¹Ÿè‡³å°‘ç¼©æ”¾åˆ°æ¯”æ‰€éœ€å°ºå¯¸å¤§å‡º `50%` ï¼Œä»¥ä½¿å›¾ç‰‡çœ‹èµ·æ¥ä»ç„¶è¶³å¤Ÿæ¸…æ™°

* è¿™ä¸€åˆ‡è¿‡ç¨‹éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ“å¿ƒè‡ªå·±å»å®Œæˆè¿™äº›ç¹çä¸”æ˜“é”™çš„ä»£ç 

### ä¸ºä»€ä¹ˆä¸åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½è‡ªåŠ¨æŒ‡å®šå°ºå¯¸å‘¢?

åœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœä½ ä¸ç»™å›¾ç‰‡æŒ‡å®šå°ºå¯¸ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šé¦–å…ˆæ¸²æŸ“ä¸€ä¸ª `0x0` å¤§å°çš„å…ƒç´ å ä½ï¼Œç„¶åä¸‹è½½å›¾ç‰‡ï¼Œåœ¨ä¸‹è½½å®Œæˆåå†åŸºäºæ­£ç¡®çš„å°ºå¯¸æ¥æ¸²æŸ“å›¾ç‰‡

* è¿™æ ·åšçš„æœ€å¤§é—®é¢˜æ˜¯ `UI` ä¼šåœ¨å›¾ç‰‡åŠ è½½çš„è¿‡ç¨‹ä¸­ä¸Šä¸‹è·³åŠ¨ï¼Œä½¿å¾—ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•

åœ¨ `React Native` ä¸­æˆ‘ä»¬æœ‰æ„é¿å…ä»¥ä¸Šä¸€è¡Œä¸º

* å¦‚æ­¤ä¸€æ¥å¼€å‘è€…å°±éœ€è¦åšæ›´å¤šå·¥ä½œæ¥æå‰çŸ¥æ™“è¿œç¨‹å›¾ç‰‡çš„å°ºå¯¸ï¼ˆæˆ–å®½é«˜æ¯”ï¼‰

  * æˆ‘ä»¬ç›¸ä¿¡è¿™æ ·å¯ä»¥å¸¦æ¥æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

* ç„¶è€Œï¼Œè¯»å–æœ¬åœ°é™æ€å›¾ç‰‡ï¼ˆä½¿ç”¨ `require('./my-icon.png')` è¯­æ³•ï¼‰åˆ™æ— éœ€æŒ‡å®šå°ºå¯¸

  * å› ä¸ºå®ƒä»¬çš„å°ºå¯¸åœ¨åŠ è½½æ—¶å°±å¯ä»¥ç«‹åˆ»çŸ¥é“

æ¯”å¦‚è¿™æ ·ä¸€ä¸ªå¼•ç”¨ `require('./my-icon.png')` çš„å®é™…è¾“å‡ºç»“æœå¯èƒ½æ˜¯ï¼š

```jsx
{"__packager_asset":true,"uri":"my-icon.png","width":591,"height":573}
```

### èµ„æºå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆ `object` ï¼‰

åœ¨ `React Native` ä¸­ï¼Œå¦ä¸€ä¸ªå€¼å¾—ä¸€æçš„å˜åŠ¨æ˜¯æˆ‘ä»¬æŠŠ `src` å±æ€§æ”¹ä¸ºäº† `source` å±æ€§ï¼Œè€Œä¸”å¹¶ä¸æ¥å—å­—ç¬¦ä¸²ï¼Œæ­£ç¡®çš„å€¼æ˜¯ä¸€ä¸ªå¸¦æœ‰ `uri` å±æ€§çš„å¯¹è±¡ï¼š

```jsx
<Image source={{uri: 'something.jpg'}} />
```

æ·±å±‚æ¬¡çš„è€ƒè™‘æ˜¯ï¼Œè¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬åœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€äº›å…ƒæ•°æ®( `metadata` )

* å‡è®¾ä½ åœ¨ä½¿ç”¨ `require('./my-icon.png')` ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šåœ¨å…¶ä¸­æ·»åŠ çœŸå®æ–‡ä»¶è·¯å¾„ä»¥åŠå°ºå¯¸ç­‰ä¿¡æ¯

  * è¿™åªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œæœªæ¥çš„ç‰ˆæœ¬ä¸­ `require` çš„å…·ä½“è¡Œä¸ºå¯èƒ½ä¼šå˜åŒ–

* æ­¤å¤–è¿™ä¹Ÿæ˜¯è€ƒè™‘äº†æœªæ¥çš„æ‰©å±•æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯èƒ½ä¼šåŠ å…¥ç²¾çµå›¾ï¼ˆ `sprites` ï¼‰çš„æ”¯æŒï¼š

  * åœ¨è¾“å‡º `{uri: ...}` çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è¾“å‡ºè£åˆ‡ä¿¡æ¯ `{uri: ..., crop: {left: 10, top: 50, width: 20, height: 40}}`

  * è¿™æ ·ç†è®ºä¸Šå°±å¯ä»¥åœ¨ç°æœ‰çš„ä»£ç ä¸­æ— ç¼æ”¯æŒç²¾çµå›¾çš„åˆ‡åˆ†

å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œåˆ™å¯ä»¥åœ¨å…¶ä¸­æ ‡æ³¨ä¸€äº›æœ‰ç”¨çš„å±æ€§ï¼Œä¾‹å¦‚å›¾ç‰‡çš„å°ºå¯¸ï¼Œè¿™æ ·å¯ä»¥ä½¿å›¾ç‰‡è‡ªå·±å»è®¡ç®—å°†è¦æ˜¾ç¤ºçš„å°ºå¯¸ï¼ˆè€Œä¸å¿…åœ¨æ ·å¼ä¸­å†™æ­»ï¼‰

* è¯·åœ¨è¿™ä¸€æ•°æ®ç»“æ„ä¸­è‡ªç”±å‘æŒ¥ï¼Œå­˜å‚¨ä½ å¯èƒ½éœ€è¦çš„ä»»ä½•å›¾ç‰‡ç›¸å…³çš„ä¿¡æ¯

### ç¼“å­˜æ§åˆ¶ï¼ˆä»… `iOS` ï¼‰

> åœ¨æŸäº›æƒ…å†µä¸‹ä½ å¯èƒ½ä»…ä»…æƒ³å±•ç¤ºä¸€å¼ å·²ç»åœ¨æœ¬åœ°ç¼“å­˜çš„å›¾ç‰‡ï¼Œä¾‹å¦‚ä¸€ä¸ªä½åˆ†è¾¨ç‡çš„å ä½ç¬¦ï¼Œç›´åˆ°é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡å¯ç”¨

> æˆ–è€…ä½ æ— æ‰€è°“å›¾ç‰‡æ˜¯å¦è¿‡æ—¶ï¼Œè€Œä¸”ä¹Ÿä¸åœ¨ä¹æ˜¾ç¤ºè¿‡æ—¶çš„å›¾ç‰‡ï¼ŒèŠ‚çœå¸¦å®½ç›¸å¯¹æ›´é‡è¦

ç¼“å­˜èµ„æºå±æ€§æä¾›ç»™äº†ä½ æ§åˆ¶ç½‘ç»œå±‚ä¸ç¼“å­˜äº¤äº’çš„æ–¹å¼ï¼š

* `default`

  ä½¿ç”¨åŸç”Ÿå¹³å°é»˜è®¤ç­–ç•¥

* `reload`

  `URL` çš„æ•°æ®å°†ä»åŸå§‹åœ°å€åŠ è½½

  ä¸ä½¿ç”¨ç°æœ‰çš„ç¼“å­˜æ•°æ®

* `force-cache`

  ç°æœ‰çš„ç¼“å­˜æ•°æ®å°†ç”¨äºæ»¡è¶³è¯·æ±‚ï¼Œå¿½ç•¥å…¶æœŸé™æˆ–åˆ°æœŸæ—¥

  å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”è¯·æ±‚çš„æ•°æ®ï¼Œåˆ™ä»åŸå§‹åœ°å€åŠ è½½

* `only-if-cached`

  ç°æœ‰çš„ç¼“å­˜æ•°æ®å°†ç”¨äºæ»¡è¶³è¯·æ±‚ï¼Œå¿½ç•¥å…¶æœŸé™æˆ–åˆ°æœŸæ—¥

  å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”è¯·æ±‚çš„æ•°æ®ï¼Œåˆ™ä¸å°è¯•ä»åŸå§‹åœ°å€åŠ è½½ï¼Œå¹¶ä¸”è®¤ä¸ºè¯·æ±‚æ˜¯å¤±è´¥çš„

```jsx
<Image
  source={{
    uri: 'https://facebook.github.io/react/logo-og.png',
    cache: 'only-if-cached',
  }}
  style={{width: 400, height: 400}}
/>
```

### èƒŒæ™¯å›¾ç‰‡ä¸åµŒå¥—å†™æ³•

å¼€å‘è€…ä»¬å¸¸é¢å¯¹çš„ä¸€ç§éœ€æ±‚å°±æ˜¯ç±»ä¼¼ `web` ä¸­çš„èƒŒæ™¯å›¾ï¼ˆ `background-image` ï¼‰

* è¦å®ç°è¿™ä¸€ç”¨ä¾‹ï¼Œåªéœ€ä½¿ç”¨ `<ImageBackground>` ç»„ä»¶ï¼ˆå…¶ `props` ä¸ `<Image>` å®Œå…¨ç›¸åŒï¼‰

* ç„¶åæŠŠéœ€è¦èƒŒæ™¯å›¾çš„å­ç»„ä»¶åµŒå…¥å…¶ä¸­å³å¯

ä¹Ÿå¯èƒ½ä½ å¹¶ä¸éœ€è¦ä½¿ç”¨ `<ImageBackground>` ï¼Œå› ä¸ºå®ƒçš„å®ç°å…¶å®éå¸¸ç®€å•ï¼Œå®è´¨å°±æ˜¯å¯¹å›¾ç‰‡ä½¿ç”¨äº†ç»å¯¹å®šä½

* ä½ å¯ä»¥é˜…è¯»å…¶[ã€æ–‡æ¡£ã€‘](https://reactnative.cn/docs/imagebackground)ç„¶åæ€è€ƒä½ æ˜¯å¦æœ‰æ›´å¥½æ›´ç®€å•çš„å¸ƒå±€æ–¹æ¡ˆ

```jsx
return (
  <ImageBackground source={...} style={{width: '100%', height: '100%'}}>
    <Text>Inside</Text>
  </ImageBackground>
);
```

> æ³¨æ„ä½ å¿…é¡»æŒ‡å®šå®½é«˜æ ·å¼

### `iOS` è¾¹æ¡†åœ†è§’çš„æ³¨æ„äº‹é¡¹

è¯·æ³¨æ„ä¸‹åˆ—è¾¹æ¡†åœ†è§’æ ·å¼ç›®å‰åœ¨ `iOS` çš„å›¾ç‰‡ç»„ä»¶ä¸Šè¿˜ä¸æ”¯æŒï¼š

* `borderTopLeftRadius`
* `borderTopRightRadius`
* `borderBottomLeftRadius`
* `borderBottomRightRadius`

### åœ¨ä¸»çº¿ç¨‹å¤–è§£ç å›¾ç‰‡

> å›¾ç‰‡è§£ç æœ‰å¯èƒ½ä¼šéœ€è¦è¶…è¿‡ä¸€å¸§çš„æ—¶é—´

> åœ¨ `web` ä¸Šè¿™æ˜¯é¡µé¢æ‰å¸§çš„ä¸€å¤§å› ç´ ï¼Œå› ä¸ºè§£ç æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­å®Œæˆçš„

åœ¨ `React Native` ä¸­ï¼Œå›¾ç‰‡è§£ç åˆ™æ˜¯åœ¨å¦ä¸€çº¿ç¨‹ä¸­å®Œæˆçš„

* åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬å¯¹å›¾ç‰‡è¿˜æ²¡ä¸‹è½½å®Œæˆæ—¶çš„åœºæ™¯éƒ½åšäº†å¤„ç†ï¼ˆæ·»åŠ  `loading` ç­‰ï¼‰

* è€Œå›¾ç‰‡è§£ç æ—¶æ˜¾ç¤ºçš„å ä½ç¬¦åªå ç”¨å‡ å¸§æ—¶é—´ï¼Œå¹¶ä¸éœ€è¦ä½ æ”¹åŠ¨ä»£ç å»é¢å¤–å¤„ç†

## åŠ¨ç”»

> æµç•…ã€æœ‰æ„ä¹‰çš„åŠ¨ç”»å¯¹äºç§»åŠ¨åº”ç”¨ç”¨æˆ·ä½“éªŒæ¥è¯´æ˜¯éå¸¸é‡è¦çš„

> ç°å®ç”Ÿæ´»ä¸­çš„ç‰©ä½“åœ¨å¼€å§‹ç§»åŠ¨å’Œåœä¸‹æ¥çš„æ—¶å€™éƒ½å…·æœ‰ä¸€å®šçš„æƒ¯æ€§ï¼Œæˆ‘ä»¬åœ¨ç•Œé¢ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åŠ¨ç”»æ¥å®ç°å¥‘åˆç‰©ç†è§„å¾‹çš„äº¤äº’

React Native æä¾›äº†ä¸¤ä¸ªäº’è¡¥çš„åŠ¨ç”»ç³»ç»Ÿï¼š

* ç”¨äºåˆ›å»ºç²¾ç»†çš„äº¤äº’æ§åˆ¶çš„åŠ¨ç”»[ã€ `Animated` ã€‘](https://reactnative.cn/docs/animated)

* ç”¨äºå…¨å±€çš„å¸ƒå±€åŠ¨ç”»[ã€ `LayoutAnimation` ã€‘](https://reactnative.cn/docs/animations#layoutanimation-api)

### `Animated` ã€æ­¤å¤„ä¸ºç‰ˆæœ¬ `0.44` çš„ä»‹ç»ï¼Œæœ€æ–°å¯[å‰å¾€å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹](https://reactnative.cn/docs/animated/)ã€‘

> `Animated` ä½¿å¾—å¼€å‘è€…å¯ä»¥éå¸¸å®¹æ˜“åœ°å®ç°å„ç§å„æ ·çš„åŠ¨ç”»å’Œäº¤äº’æ–¹å¼ï¼Œå¹¶ä¸”å…·å¤‡æé«˜çš„æ€§èƒ½

`Animated` æ—¨åœ¨ä»¥å£°æ˜çš„å½¢å¼æ¥å®šä¹‰åŠ¨ç”»çš„è¾“å…¥ä¸è¾“å‡º

* åœ¨å…¶ä¸­å»ºç«‹ä¸€ä¸ªå¯é…ç½®çš„å˜åŒ–å‡½æ•°

* ç„¶åä½¿ç”¨ç®€å•çš„ `start/stop` æ–¹æ³•æ¥æ§åˆ¶åŠ¨ç”»æŒ‰é¡ºåºæ‰§è¡Œ

`Animated` ä»…å°è£…äº†å››ä¸ªå¯ä»¥åŠ¨ç”»åŒ–çš„ç»„ä»¶ï¼š

* `View`
* `Text`
* `Image`
* `ScrollView`

> ä¸è¿‡ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨[ã€ `Animated.createAnimatedComponent()` ã€‘](https://reactnative.cn/docs/animated/#createanimatedcomponent)æ¥å°è£…ä½ è‡ªå·±çš„ç»„ä»¶

ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨åŠ è½½æ—¶å¸¦æœ‰æ·¡å…¥åŠ¨ç”»æ•ˆæœçš„è§†å›¾ï¼š

```jsx
import React from 'react';
import { Animated, Text, View } from 'react-native';

class FadeInView extends React.Component {
  state = {
    fadeAnim: new Animated.Value(0),  // é€æ˜åº¦åˆå§‹å€¼è®¾ä¸º0
  }

  componentDidMount() {
    Animated.timing(                  // éšæ—¶é—´å˜åŒ–è€Œæ‰§è¡ŒåŠ¨ç”»
      this.state.fadeAnim,            // åŠ¨ç”»ä¸­çš„å˜é‡å€¼
      {
        toValue: 1,                   // é€æ˜åº¦æœ€ç»ˆå˜ä¸º1ï¼Œå³å®Œå…¨ä¸é€æ˜
        duration: 10000,              // è®©åŠ¨ç”»æŒç»­ä¸€æ®µæ—¶é—´
      }
    ).start();                        // å¼€å§‹æ‰§è¡ŒåŠ¨ç”»
  }

  render() {
    let { fadeAnim } = this.state;

    return (
      <Animated.View                 // ä½¿ç”¨ä¸“é—¨çš„å¯åŠ¨ç”»åŒ–çš„Viewç»„ä»¶
        style={{
          ...this.props.style,
          opacity: fadeAnim,         // å°†é€æ˜åº¦æŒ‡å®šä¸ºåŠ¨ç”»å˜é‡å€¼
        }}
      >
        {this.props.children}
      </Animated.View>
    );
  }
}

// ç„¶åä½ å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­åƒä½¿ç”¨`View`é‚£æ ·å»ä½¿ç”¨`FadeInView`äº†
export default class App extends React.Component {
  render() {
    return (
      <View style={{flex: 1, alignItems: 'center', justifyContent: 'center'}}>
        <FadeInView style={{width: 250, height: 50, backgroundColor: 'powderblue'}}>
          <Text style={{fontSize: 28, textAlign: 'center', margin: 10}}>Fading in</Text>
        </FadeInView>
      </View>
    )
  }
}
```

æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š

* åœ¨ `FadeInView` çš„æ„é€ å‡½æ•°é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º `fadeAnim` çš„ `Animated.Value`

  * å¹¶å°†å…¶æ”¾åœ¨ `state` ä¸­

  * è€Œ `View` çš„é€æ˜åº¦æ˜¯å’Œè¿™ä¸ªå€¼ç»‘å®šçš„

  * ç»„ä»¶åŠ è½½æ—¶ï¼Œé€æ˜åº¦é¦–å…ˆè®¾ä¸º `0`

* ç„¶åä¸€ä¸ª `easing` åŠ¨ç”»å¼€å§‹æ”¹å˜ `fadeAnim` å€¼

  * åŒæ—¶ä¼šå¯¼è‡´æ‰€æœ‰ä¸å…¶ç›¸å…³è”çš„å€¼ï¼ˆæœ¬ä¾‹ä¸­æ˜¯é€æ˜åº¦ï¼‰ä¹Ÿé€å¸§æ›´æ–°

  * æœ€ç»ˆå’Œ `fadeAnim` ä¸€æ ·å˜ä¸º `1`

> è¿™ä¸€è¿‡ç¨‹ç»è¿‡ç‰¹åˆ«ä¼˜åŒ–ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šè¿œé«˜äºåå¤è°ƒç”¨ `setState` å’Œå¤šæ¬¡é‡æ¸²æŸ“

å› ä¸ºè¿™ä¸€è¿‡ç¨‹æ˜¯çº¯å£°æ˜å¼çš„ï¼Œå› æ­¤è¿˜æœ‰è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´

* æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›å£°æ˜çš„é…ç½®åºåˆ—åŒ–åå‘é€åˆ°ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¸Šè¿è¡Œ

### é…ç½®åŠ¨ç”»

åŠ¨ç”»æ‹¥æœ‰éå¸¸çµæ´»çš„é…ç½®é¡¹ï¼Œè‡ªå®šä¹‰çš„æˆ–é¢„å®šä¹‰çš„ï¼š

* `easing` å‡½æ•°
* å»¶è¿Ÿ
* æŒç»­æ—¶é—´
* è¡°å‡ç³»æ•°
* å¼¹æ€§å¸¸æ•°
* â€¦â€¦ç­‰éƒ½å¯ä»¥åœ¨å¯¹åº”ç±»å‹çš„åŠ¨ç”»ä¸­è¿›è¡Œé…ç½®

`Animated` æä¾›äº†å¤šç§åŠ¨ç”»ç±»å‹ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„è¦å±[ã€ `Animated.timing()` ã€‘](https://reactnative.cn/docs/animated#timing)

* å®ƒæ”¯æŒéšæ—¶é—´è®¾ç½®å€¼çš„åŠ¨ç”»

  * ä½¿ç”¨å„ç§é¢„å®šä¹‰çš„å®½æ¾åŠŸèƒ½

  * ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ è‡ªå·±çš„å‡½æ•°

* åœ¨åŠ¨ç”»ä¸­ï¼Œç¼“å’Œå‡½æ•°é€šå¸¸ç”¨äºä¼ é€’ç‰©ä½“çš„é€æ¸åŠ é€Ÿå’Œå‡é€Ÿ

  * é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¡æ—¶å°†ä½¿ç”¨ç¼“å’Œæ›²çº¿ï¼Œè¯¥æ›²çº¿å°†é€æ¸åŠ é€Ÿåˆ°å…¨é€Ÿï¼Œå¹¶é€æ¸å‡é€Ÿåˆ°åœæ­¢ç»“æŸ

  * å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šä¸åŒçš„å‡½æ•°

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ `2` ç§’é•¿åŠ¨ç”»ï¼Œè¯¥å¯¹è±¡åœ¨ç§»åŠ¨åˆ°å…¶æœ€ç»ˆä½ç½®ä¹‹å‰ä¼šç¨å¾®åé€€ä¸€ç‚¹ï¼š

```jsx
Animated.timing(this.state.xPosition, {
  toValue: 100,
  easing: Easing.back(),
  duration: 2000
}).start();
```

> æŸ¥çœ‹ `Animated API` çš„[ã€é…ç½®åŠ¨ç”»ã€‘](https://reactnative.cn/docs/animated#é…ç½®åŠ¨ç”»)éƒ¨åˆ†ï¼Œäº†è§£æœ‰å…³å†…ç½®åŠ¨ç”»æ”¯æŒçš„æ‰€æœ‰é…ç½®å‚æ•°çš„æ›´å¤šä¿¡æ¯

### ç»„åˆåŠ¨ç”»

å¤šä¸ªåŠ¨ç”»å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥ç»„åˆä½¿ç”¨ï¼š

* `parallel`ï¼ˆåŒæ—¶æ‰§è¡Œï¼‰
* `sequence`ï¼ˆé¡ºåºæ‰§è¡Œï¼‰
* `stagger`
* `delay`

> å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ¥å—ä¸€ä¸ªè¦æ‰§è¡Œçš„åŠ¨ç”»æ•°ç»„ï¼Œå¹¶ä¸”è‡ªåŠ¨åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ `start/stop`

ä¾‹å¦‚ï¼Œä»¥ä¸‹åŠ¨ç”»å°†æ»‘è¡Œåˆ°ä¸€ä¸ªåœæ­¢ç‚¹ï¼Œç„¶ååœ¨å¹³è¡Œæ—‹è½¬æ—¶å¼¹å›ï¼š

```jsx
Animated.sequence([
  // decay, then spring to start and twirl
  Animated.decay(position, {
    // coast to a stop
    velocity: { x: gestureState.vx, y: gestureState.vy }, // velocity from gesture release
    deceleration: 0.997
  }),
  Animated.parallel([
    // after decay, in parallel:
    Animated.spring(position, {
      toValue: { x: 0, y: 0 } // return to start
    }),
    Animated.timing(twirl, {
      // and twirl
      toValue: 360
    })
  ])
]).start(); // start the sequence group
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªåŠ¨ç”»è¢«åœæ­¢æˆ–ä¸­æ–­äº†ï¼Œç»„å†…æ‰€æœ‰å…¶å®ƒçš„åŠ¨ç”»ä¹Ÿä¼šè¢«åœæ­¢

* `Parallel` æœ‰ä¸€ä¸ª `stopTogether` å±æ€§ï¼Œå¦‚æœè®¾ç½®ä¸º `false` ï¼Œå¯ä»¥ç¦ç”¨è‡ªåŠ¨åœæ­¢

> åœ¨ `Animated` æ–‡æ¡£çš„[ã€ç»„åˆåŠ¨ç”»ã€‘](https://reactnative.cn/docs/animated/#ç»„åˆåŠ¨ç”»)ä¸€èŠ‚ä¸­åˆ—å‡ºäº†æ‰€æœ‰çš„ç»„åˆæ–¹æ³•

### åˆæˆåŠ¨ç”»å€¼

> ä½ å¯ä»¥ä½¿ç”¨åŠ å‡ä¹˜é™¤ä»¥åŠå–ä½™ç­‰è¿ç®—æ¥[ã€æŠŠä¸¤ä¸ªåŠ¨ç”»å€¼åˆæˆä¸ºä¸€ä¸ªæ–°çš„åŠ¨ç”»å€¼ã€‘](https://reactnative.cn/docs/animated/#åˆæˆåŠ¨ç”»å€¼)

æœ‰äº›æƒ…å†µä¸‹ï¼ŒåŠ¨ç”»å€¼éœ€è¦åè½¬å¦ä¸€ä¸ªåŠ¨ç”»å€¼è¿›è¡Œè®¡ç®—

* ä¾‹å¦‚åè½¬æ¯”ä¾‹ï¼ˆ2x->0.5xï¼‰ï¼š

```jsx
const a = new Animated.Value(1);
const b = Animated.divide(1, a);

Animated.spring(a, {
  toValue: 2
}).start();
```

### æ’å€¼

> æ¯ä¸ªå±æ€§éƒ½å¯ä»¥é¦–å…ˆé€šè¿‡æ’å€¼è¿è¡Œ

æ’å€¼å°†è¾“å…¥èŒƒå›´æ˜ å°„åˆ°è¾“å‡ºèŒƒå›´ï¼Œé€šå¸¸ä½¿ç”¨çº¿æ€§æ’å€¼ï¼Œä½†ä¹Ÿæ”¯æŒæ”¾å®½åŠŸèƒ½

* é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šå°†æ›²çº¿å¤–æ¨åˆ°ç»™å®šèŒƒå›´ä¹‹å¤–ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥è®©å®ƒé’³åˆ¶è¾“å‡ºå€¼

å°† `0-1` èŒƒå›´è½¬æ¢ä¸º `0-100` èŒƒå›´çš„ç®€å•æ˜ å°„æ˜¯ï¼š

```jsx
value.interpolate({
  inputRange: [0, 1],
  outputRange: [0, 100]
});
```

ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›è€ƒè™‘å°† `Animated.Value` ä» `0` å˜ä¸º `1`

* ä½†æ˜¯åŠ¨ç”»çš„ä½ç½®ä» `150px` åˆ° `0px` ï¼Œä¸é€æ˜åº¦ä» `0` åˆ° `1`

* é€šè¿‡åƒè¿™æ ·ä¿®æ”¹ä¸Šé¢ç¤ºä¾‹ä¸­çš„æ ·å¼ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼š

```jsx
style={{
  opacity: this.state.fadeAnim, // Binds directly
  transform: [{
    translateY: this.state.fadeAnim.interpolate({
      inputRange: [0, 1],
      outputRange: [150, 0]  // 0 : 150, 0.5 : 75, 1 : 0
    }),
  }],
}}
```

> [ã€ `interpolate()` ã€‘](https://reactnative.cn/docs/animated#interpolate)è¿˜æ”¯æŒå®šä¹‰å¤šä¸ªåŒºé—´æ®µè½ï¼Œå¸¸ç”¨æ¥å®šä¹‰é™æ­¢åŒºé—´ç­‰

ä¸¾ä¸ªä¾‹å­ï¼š

* è¦è®©è¾“å…¥åœ¨æ¥è¿‘ `-300` æ—¶å–ç›¸åå€¼

* ç„¶ååœ¨è¾“å…¥æ¥è¿‘ `-100` æ—¶åˆ°è¾¾ `0`

* ç„¶ååœ¨è¾“å…¥æ¥è¿‘ `0` æ—¶åˆå›åˆ° `1`

* æ¥ç€ä¸€ç›´åˆ°è¾“å…¥åˆ° `100` çš„è¿‡ç¨‹ä¸­é€æ­¥å›åˆ° `0`

* æœ€åå½¢æˆä¸€ä¸ªå§‹ç»ˆä¸º `0` çš„é™æ­¢åŒºé—´

* å¯¹äºä»»ä½•å¤§äº `100` çš„è¾“å…¥éƒ½è¿”å› `0`

å…·ä½“å†™æ³•å¦‚ä¸‹ï¼š

```jsx
value.interpolate({
  inputRange: [-300, -100, 0, 100, 101],
  outputRange: [300, 0, 1, 0, 0]
});
```

å®ƒçš„æœ€ç»ˆæ˜ å°„ç»“æœå¦‚ä¸‹ï¼š

| è¾“å…¥ | è¾“å‡º |
| ---- | ---- |
| -400 | 450  |
| -300 | 300  |
| -200 | 150  |
| -100 | 0    |
| -50  | 0.5  |
| 0    | 1    |
| 50   | 0.5  |
| 100  | 0    |
| 101  | 0    |
| 200  | 0    |

> `interpolate()` è¿˜æ”¯æŒåˆ°å­—ç¬¦ä¸²çš„æ˜ å°„ï¼Œä»è€Œå¯ä»¥å®ç°é¢œè‰²ä»¥åŠå¸¦æœ‰å•ä½çš„å€¼çš„åŠ¨ç”»å˜æ¢

ä¾‹å¦‚ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·å®ç°ä¸€ä¸ªæ—‹è½¬åŠ¨ç”»ï¼š

```jsx
value.interpolate({
  inputRange: [0, 360],
  outputRange: ["0deg", "360deg"]
});
```

> `interpolate()` è¿˜æ”¯æŒä»»æ„çš„æ¸å˜å‡½æ•°

å…¶ä¸­æœ‰å¾ˆå¤šå·²ç»åœ¨ `Easing` ç±»ä¸­å®šä¹‰äº†ï¼ŒåŒ…æ‹¬ï¼š

* äºŒæ¬¡
* æŒ‡æ•°
* è´å¡å°”ç­‰æ›²çº¿
* ä»¥åŠ `step` ã€`bounce` ç­‰æ–¹æ³•

> `interpolation`è¿˜æ”¯æŒé™åˆ¶è¾“å‡ºåŒºé—´ `outputRange`

ä½ å¯ä»¥é€šè¿‡è®¾ç½®ä»¥ä¸‹å±æ€§æ¥é™åˆ¶è¾“å‡ºåŒºé—´ï¼š

* `extrapolate`
* `extrapolateLeft`
* `extrapolateRight`

é»˜è®¤å€¼æ˜¯ `extend`ï¼ˆå…è®¸è¶…å‡ºï¼‰ï¼Œä¸è¿‡ä½ å¯ä»¥ä½¿ç”¨ `clamp` é€‰é¡¹æ¥é˜»æ­¢è¾“å‡ºå€¼è¶…è¿‡ `outputRange`

### è·Ÿè¸ªåŠ¨æ€å€¼

åŠ¨ç”»ä¸­æ‰€è®¾çš„å€¼è¿˜å¯ä»¥é€šè¿‡è·Ÿè¸ªåˆ«çš„å€¼å¾—åˆ°

* ä½ åªè¦æŠŠ `toValue` è®¾ç½®æˆå¦ä¸€ä¸ªåŠ¨æ€å€¼è€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šæ•°å­—å°±è¡Œäº†

* æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨å¼¹è·³åŠ¨ç”»æ¥å®ç°èŠå¤©å¤´åƒçš„é—ªåŠ¨

* åˆæ¯”å¦‚é€šè¿‡ `timing` è®¾ç½® `duration:0` æ¥å®ç°å¿«é€Ÿçš„è·Ÿéš

ä»–ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ’å€¼æ¥è¿›è¡Œç»„åˆï¼š

```jsx
Animated.spring(follower, { toValue: leader }).start();
Animated.timing(opacity, {
  toValue: pan.x.interpolate({
    inputRange: [0, 300],
    outputRange: [1, 0]
  })
}).start();
```

`leader` å’Œ `follower` åŠ¨ç”»å°†ä½¿ç”¨ `Animated.ValueXY()` å®ç°ï¼š

* å®ƒæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å¤„ç† `2D` äº¤äº’çš„æ–¹æ³•ï¼Œè­¬å¦‚å¤„ç†æ—‹è½¬æˆ–æ‹–æ‹½

* å®ƒæ˜¯ä¸€ä¸ªç®€å•çš„åŒ…å«äº†ä¸¤ä¸ª `Animated.Value` å®ä¾‹çš„åŒ…è£…

* ç„¶åæä¾›äº†ä¸€ç³»åˆ—è¾…åŠ©å‡½æ•°ï¼Œä½¿å¾— `ValueXY` åœ¨è®¸å¤šæ—¶å€™å¯ä»¥æ›¿ä»£ `Value` æ¥ä½¿ç”¨

> æ¯”å¦‚åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œ`leader` å’Œ `follower` å¯ä»¥åŒæ—¶ä¸º `valueXY` ç±»å‹ï¼Œè¿™æ · `x` å’Œ `y` çš„å€¼éƒ½ä¼šè¢«è·Ÿè¸ª

### è·Ÿè¸ªæ‰‹åŠ¿

[ã€ `Animated.event` ã€‘](https://reactnative.cn/docs/animated#event)æ˜¯ `Animated` ä¸­ä¸è¾“å…¥æœ‰å…³çš„éƒ¨åˆ†ï¼Œå…è®¸æ‰‹åŠ¿æˆ–å…¶å®ƒäº‹ä»¶ç›´æ¥ç»‘å®šåˆ°åŠ¨æ€å€¼ä¸Š

* å®ƒé€šè¿‡ä¸€ä¸ªç»“æ„åŒ–çš„æ˜ å°„è¯­æ³•æ¥å®Œæˆï¼Œä½¿å¾—å¤æ‚äº‹ä»¶å¯¹è±¡ä¸­çš„å€¼å¯ä»¥è¢«æ­£ç¡®çš„è§£å¼€

* ç¬¬ä¸€å±‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…è®¸åŒæ—¶æ˜ å°„å¤šä¸ªå€¼ï¼Œç„¶åæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªåµŒå¥—çš„å¯¹è±¡

åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œä½ å¯ä»¥å‘ç° `scrollX` è¢«æ˜ å°„åˆ°äº† `event.nativeEvent.contentOffset.x`

* `event` é€šå¸¸æ˜¯å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°

* `pan.x` å’Œ `pan.y` åˆ†åˆ«æ˜ å°„åˆ° `gestureState.dx` å’Œ `gestureState.dy`

* `gestureState` æ˜¯ä¼ é€’ç»™ `PanResponder` å›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°

ä¾‹å¦‚ï¼Œä½¿ç”¨æ°´å¹³æ»šåŠ¨æ‰‹åŠ¿æ—¶ï¼Œè¦å°†`event.nativeevent.contentoffset.x` æ˜ å°„åˆ°`scrollx`ï¼ˆ `animated.value` ï¼‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

```jsx
onScroll={Animated.event(
  // scrollX = e.nativeEvent.contentOffset.x
  [{ nativeEvent: {
      contentOffset: {
        x: scrollX
      }
    }
  }]
)}
```

ä½¿ç”¨ `PanResponder` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ä» `gesturestate.dx` å’Œ `gesturestate.dy` ä¸­æå– `x` å’Œ `y` ä½ç½®

* æˆ‘ä»¬åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ä½¿ç”¨äº†ä¸€ä¸ªç©ºå€¼

* å› ä¸ºæˆ‘ä»¬åªå¯¹ä¼ é€’ç»™ `panresponder` å¤„ç†ç¨‹åºçš„ç¬¬äºŒä¸ªå‚æ•°æ„Ÿå…´è¶£ï¼Œå®ƒæ˜¯ `gesturestate`

```jsx
onPanResponderMove={Animated.event(
  [null,
  // ignore the native event
  // extract dx and dy from gestureState
  // like 'pan.x = gestureState.dx, pan.y = gestureState.dy'

  {dx: pan.x, dy: pan.y}
  ]
)}
```

### å“åº”å½“å‰çš„åŠ¨ç”»å€¼

> ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°è¿™é‡Œæ²¡æœ‰ä¸€ä¸ªæ˜æ˜¾çš„æ–¹æ³•æ¥åœ¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­è¯»å–å½“å‰çš„å€¼

> è¿™æ˜¯å‡ºäºä¼˜åŒ–çš„è§’åº¦è€ƒè™‘ï¼Œæœ‰äº›å€¼åªæœ‰åœ¨åŸç”Ÿä»£ç è¿è¡Œé˜¶æ®µä¸­æ‰çŸ¥é“

å¦‚æœä½ éœ€è¦åœ¨ `JavaScript` ä¸­å“åº”å½“å‰çš„å€¼ï¼Œæœ‰ä¸¤ç§å¯èƒ½çš„åŠæ³•ï¼š

* `spring.stopAnimation(callback)`

  ä¼šåœæ­¢åŠ¨ç”»å¹¶ä¸”æŠŠæœ€ç»ˆçš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•° `callback`

  * è¿™åœ¨å¤„ç†æ‰‹åŠ¿åŠ¨ç”»çš„æ—¶å€™éå¸¸æœ‰ç”¨

* `spring.addListener(callback)`

  ä¼šåœ¨åŠ¨ç”»çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æŒç»­å¼‚æ­¥è°ƒç”¨callbackå›è°ƒå‡½æ•°ï¼Œæä¾›ä¸€ä¸ªæœ€è¿‘çš„å€¼ä½œä¸ºå‚æ•°

  * è¿™åœ¨ç”¨äºè§¦å‘çŠ¶æ€åˆ‡æ¢çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œè­¬å¦‚å½“ç”¨æˆ·æ‹–æ‹½ä¸€ä¸ªä¸œè¥¿é è¿‘çš„æ—¶å€™å¼¹å‡ºä¸€ä¸ªæ–°çš„æ°”æ³¡é€‰é¡¹

  * ä¸è¿‡è¿™ä¸ªçŠ¶æ€åˆ‡æ¢å¯èƒ½å¹¶ä¸ä¼šååˆ†çµæ•ï¼Œå› ä¸ºå®ƒä¸åƒè®¸å¤šè¿ç»­æ‰‹åŠ¿æ“ä½œï¼ˆå¦‚æ—‹è½¬ï¼‰é‚£æ ·åœ¨ `60fps` ä¸‹è¿è¡Œ

åŠ¨ç”»çš„è®¾è®¡æ˜¯å®Œå…¨å¯åºåˆ—åŒ–çš„ï¼Œè¿™æ ·åŠ¨ç”»å°±å¯ä»¥ä»¥é«˜æ€§èƒ½çš„æ–¹å¼è¿è¡Œï¼Œè€Œä¸ä¾èµ–äºæ™®é€šçš„ `JavaScript` äº‹ä»¶å¾ªç¯ï¼š

* è¿™ç¡®å®ä¼šå½±å“API

  * å› æ­¤è¯·è®°ä½ï¼Œä¸å®Œå…¨åŒæ­¥çš„ç³»ç»Ÿç›¸æ¯”ï¼Œåšä¸€äº›äº‹æƒ…ä¼¼ä¹æœ‰ç‚¹æ£˜æ‰‹

* `Animated.Value.addListener` å¯ä»¥ä½œä¸ºè§£å†³è¿™äº›é™åˆ¶çš„ä¸€ç§æ–¹æ³•

  * ä½†è¦è°¨æ…ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒå°†æ¥å¯èƒ½ä¼šå½±å“æ€§èƒ½

### å¯ç”¨åŸç”ŸåŠ¨ç”»é©±åŠ¨

> `Animated` çš„ `API` æ˜¯å¯åºåˆ—åŒ–çš„ï¼ˆå³å¯è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¡¨è¾¾ä»¥ä¾¿é€šä¿¡æˆ–å­˜å‚¨ï¼‰

é€šè¿‡å¯ç”¨[ã€åŸç”Ÿé©±åŠ¨ã€‘](http://facebook.github.io/react-native/blog/2017/02/14/using-native-driver-for-animated.html)ï¼Œæˆ‘ä»¬åœ¨å¯åŠ¨åŠ¨ç”»å‰å°±æŠŠå…¶æ‰€æœ‰é…ç½®ä¿¡æ¯éƒ½å‘é€åˆ°åŸç”Ÿç«¯ï¼Œåˆ©ç”¨åŸç”Ÿä»£ç åœ¨ UI çº¿ç¨‹æ‰§è¡ŒåŠ¨ç”»ï¼Œè€Œä¸ç”¨æ¯ä¸€å¸§éƒ½åœ¨ä¸¤ç«¯é—´æ¥å›æ²Ÿé€š

* å¦‚æ­¤ä¸€æ¥ï¼ŒåŠ¨ç”»ä¸€å¼€å§‹å°±å®Œå…¨è„±ç¦»äº† `JavaScript` çº¿ç¨‹ï¼Œå› æ­¤æ­¤æ—¶å³ä¾¿ `JavaScript` çº¿ç¨‹è¢«å¡ä½ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°åŠ¨ç”»äº†

* åœ¨åŠ¨ç”»ä¸­å¯ç”¨åŸç”Ÿé©±åŠ¨éå¸¸ç®€å•

  * åªéœ€åœ¨å¼€å§‹åŠ¨ç”»ä¹‹å‰ï¼Œåœ¨åŠ¨ç”»é…ç½®ä¸­åŠ å…¥ä¸€è¡Œ `useNativeDriver: true` ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```jsx
Animated.timing(this.state.animatedValue, {
  toValue: 1,
  duration: 500,
  useNativeDriver: true // <-- åŠ ä¸Šè¿™ä¸€è¡Œ
}).start();
```

åŠ¨ç”»å€¼åœ¨ä¸åŒçš„é©±åŠ¨æ–¹å¼ä¹‹é—´æ˜¯ä¸èƒ½å…¼å®¹çš„ï¼š

* å› æ­¤å¦‚æœä½ åœ¨æŸä¸ªåŠ¨ç”»ä¸­å¯ç”¨äº†åŸç”Ÿé©±åŠ¨

* é‚£ä¹ˆæ‰€æœ‰å’Œæ­¤åŠ¨ç”»ä¾èµ–ç›¸åŒåŠ¨ç”»å€¼çš„å…¶ä»–åŠ¨ç”»ä¹Ÿå¿…é¡»å¯ç”¨åŸç”Ÿé©±åŠ¨

åŸç”Ÿé©±åŠ¨è¿˜å¯ä»¥åœ¨ `Animated.event` ä¸­ä½¿ç”¨

* è¿™å¯¹äºè·Ÿéšæ»šåŠ¨ä½ç½®çš„åŠ¨ç”»ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºæ²¡æœ‰æœ¬æœºé©±åŠ¨ç¨‹åº

* ç”±äº `react native` çš„å¼‚æ­¥ç‰¹æ€§ï¼ŒåŠ¨ç”»å°†å§‹ç»ˆåœ¨æ‰‹åŠ¿åé¢è¿è¡Œå¸§

  ```jsx
  <Animated.ScrollView
  // <-- ä½¿ç”¨å¯åŠ¨ç”»åŒ–çš„ScrollViewç»„ä»¶

    scrollEventThrottle={1}
    // <-- è®¾ä¸º1ä»¥ç¡®ä¿æ»šåŠ¨äº‹ä»¶çš„è§¦å‘é¢‘ç‡è¶³å¤Ÿå¯†é›†

    onScroll={Animated.event(
      [
        {
          nativeEvent: {
            contentOffset: { y: this.state.animatedValue }
          }
        }
      ],
      { useNativeDriver: true }
      // <-- åŠ ä¸Šè¿™ä¸€è¡Œ

    )}
  >
    {content}
  </Animated.ScrollView>
  ```

  * é€šè¿‡è¿è¡Œ[ã€ `RNTester app` ã€‘](https://github.com/facebook/react-native/blob/master/RNTester/)ï¼Œç„¶ååŠ è½½æœ¬æœºåŠ¨ç”»ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°æœ¬æœºé©±åŠ¨ç¨‹åºæ­£åœ¨è¿è¡Œ

  * æ‚¨è¿˜å¯ä»¥æŸ¥çœ‹æºä»£ç ï¼Œäº†è§£è¿™äº›ç¤ºä¾‹æ˜¯å¦‚ä½•ç”Ÿæˆçš„

#### æ³¨æ„äº‹é¡¹

æœ¬æœºé©±åŠ¨ç¨‹åºç›®å‰å¹¶ä¸æ”¯æŒæ‚¨å¯ä»¥å¯¹åŠ¨ç”»è¿›è¡Œçš„æ‰€æœ‰æ“ä½œï¼š

* ä¸»è¦é™åˆ¶æ˜¯ï¼Œåªèƒ½å¯¹éå¸ƒå±€å±æ€§è®¾ç½®åŠ¨ç”»ï¼š

  * åƒ `transform` å’Œ `opacity` ä¹‹ç±»çš„ä¸œè¥¿ä¼šèµ·ä½œç”¨

  * ä½†æ˜¯ `flexbox` å’Œ `position` å±æ€§ä¸ä¼šèµ·ä½œç”¨

* å½“ä½¿ç”¨ `animated.event` æ—¶

  * å®ƒåªé€‚ç”¨äºç›´æ¥äº‹ä»¶

  * è€Œä¸é€‚ç”¨äºå†’æ³¡äº‹ä»¶

* è¿™æ„å‘³ç€å®ƒä¸é€‚ç”¨äº `panresponder`

  * ä½†é€‚ç”¨äº `ScrollView OnScroll` ç­‰åŠŸèƒ½

å½“åŠ¨ç”»è¿è¡Œæ—¶ï¼Œå®ƒå¯ä»¥é˜»æ­¢ `VirtualizedList` ç»„ä»¶æ¸²æŸ“æ›´å¤šè¡Œï¼š

* å¦‚æœéœ€è¦åœ¨ç”¨æˆ·æ»šåŠ¨åˆ—è¡¨æ—¶è¿è¡Œé•¿åŠ¨ç”»æˆ–å¾ªç¯åŠ¨ç”»

  * å¯ä»¥åœ¨åŠ¨ç”»çš„é…ç½®ä¸­ä½¿ç”¨ `isInteraction:false` æ¥é˜²æ­¢æ­¤é—®é¢˜

#### é‡ç‚¹æ³¨æ„!!!

ä½¿ç”¨è¯¸å¦‚ `rotateY` ã€`rotateX` ç­‰å˜æ¢æ ·å¼æ—¶ï¼š

* éœ€è¦ç¡®ä¿å˜æ¢æ ·å¼ `perspective` å·²å°±ä½

* æ²¡æœ‰å®ƒï¼Œä¸€äº›åŠ¨ç”»å¯èƒ½æ— æ³•åœ¨ `Android` ä¸Šå‘ˆç°

```jsx
<Animated.View
  style={{
    transform: [
      { scale: this.state.scale },
      { rotateY: this.state.rotateY },
      { perspective: 1000 }
      // without this line this Animation will not render on Android while working fine on iOS
    ]
  }}
/>
```

#### å…¶ä»–ç¤ºä¾‹

`RNTester app` æœ‰å¤šç§åŠ¨ç”»ç¤ºä¾‹ï¼š

* [ã€ `AnimatedGratuitousApp` ã€‘](https://github.com/facebook/react-native/tree/master/RNTester/js/AnimatedGratuitousApp)
* [ã€ `NativeAnimationsExample` ã€‘](https://github.com/facebook/react-native/blob/master/RNTester/js/NativeAnimationsExample.js)

### `LayoutAnimation API`

> `LayoutAnimation` å…è®¸ä½ åœ¨å…¨å±€èŒƒå›´å†…åˆ›å»ºå’Œæ›´æ–°åŠ¨ç”»ï¼Œè¿™äº›åŠ¨ç”»ä¼šåœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æˆ–å¸ƒå±€å‘¨æœŸè¿è¡Œ

å®ƒå¸¸ç”¨æ¥æ›´æ–° `flexbox` å¸ƒå±€ï¼Œå› ä¸ºå®ƒå¯ä»¥æ— éœ€æµ‹é‡æˆ–è€…è®¡ç®—ç‰¹å®šå±æ€§å°±èƒ½ç›´æ¥äº§ç”ŸåŠ¨ç”»

* å°¤å…¶æ˜¯å½“å¸ƒå±€å˜åŒ–å¯èƒ½å½±å“åˆ°çˆ¶èŠ‚ç‚¹æ—¶

  * è­¬å¦‚ `æŸ¥çœ‹æ›´å¤š` å±•å¼€åŠ¨ç”»æ—¢å¢åŠ çˆ¶èŠ‚ç‚¹çš„å°ºå¯¸åˆä¼šå°†ä½äºæœ¬è¡Œä¹‹ä¸‹çš„æ‰€æœ‰è¡Œå‘ä¸‹æ¨åŠ¨

  * å¦‚æœä¸ä½¿ç”¨ `LayoutAnimation` ï¼Œå¯èƒ½å°±éœ€è¦æ˜¾å¼å£°æ˜ç»„ä»¶çš„åæ ‡ï¼Œæ‰èƒ½ä½¿å¾—æ‰€æœ‰å—å½±å“çš„ç»„ä»¶èƒ½å¤ŸåŒæ­¥è¿è¡ŒåŠ¨ç”»

> æ³¨æ„å°½ç®¡ `LayoutAnimation` éå¸¸å¼ºå¤§ä¸”æœ‰ç”¨ï¼Œä½†å®ƒå¯¹åŠ¨ç”»æœ¬èº«çš„æ§åˆ¶æ²¡æœ‰ `Animated` æˆ–è€…å…¶å®ƒåŠ¨ç”»åº“é‚£æ ·æ–¹ä¾¿ï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨ `LayoutAnimation` æ— æ³•å®ç°ä¸€ä¸ªæ•ˆæœï¼Œé‚£å¯èƒ½è¿˜æ˜¯è¦è€ƒè™‘å…¶ä»–çš„æ–¹æ¡ˆ

å¦å¤–ï¼Œå¦‚æœè¦åœ¨ `Android` ä¸Šä½¿ç”¨ `LayoutAnimation` ï¼Œé‚£ä¹ˆç›®å‰è¿˜éœ€è¦åœ¨ `UIManager` ä¸­å¯ç”¨ï¼š

```
// åœ¨æ‰§è¡Œä»»ä½•åŠ¨ç”»ä»£ç ä¹‹å‰ï¼Œæ¯”å¦‚åœ¨å…¥å£æ–‡ä»¶App.jsä¸­æ‰§è¡Œ
UIManager.setLayoutAnimationEnabledExperimental &&
  UIManager.setLayoutAnimationEnabledExperimental(true);
```

```jsx
import React from 'react';
import {
  NativeModules,
  LayoutAnimation,
  Text,
  TouchableOpacity,
  StyleSheet,
  View,
} from 'react-native';

const { UIManager } = NativeModules;

UIManager.setLayoutAnimationEnabledExperimental &&
  UIManager.setLayoutAnimationEnabledExperimental(true);

export default class App extends React.Component {
  state = {
    w: 100,
    h: 100,
  };

  _onPress = () => {
    // Animate the update
    LayoutAnimation.spring();
    this.setState({w: this.state.w + 15, h: this.state.h + 15})
  }

  render() {
    return (
      <View style={styles.container}>
        <View style={[styles.box, {width: this.state.w, height: this.state.h}]} />
        <TouchableOpacity onPress={this._onPress}>
          <View style={styles.button}>
            <Text style={styles.buttonText}>Press me!</Text>
          </View>
        </TouchableOpacity>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  box: {
    width: 200,
    height: 200,
    backgroundColor: 'red',
  },
  button: {
    backgroundColor: 'black',
    paddingHorizontal: 20,
    paddingVertical: 15,
    marginTop: 15,
  },
  buttonText: {
    color: '#fff',
    fontWeight: 'bold',
  },
});
```

* æ­¤ç¤ºä¾‹ä½¿ç”¨é¢„è®¾å€¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰åŠ¨ç”»ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[ã€ `layoutAnimation.js` ã€‘](https://github.com/facebook/react-native/blob/master/Libraries/LayoutAnimation/LayoutAnimation.js)

### å…¶ä»–è¦æ³¨æ„çš„åœ°æ–¹

#### `requestAnimationFrame`

æ˜¯ä¸€ä¸ªå¯¹æµè§ˆå™¨æ ‡å‡† `API` çš„å…¼å®¹å®ç°ï¼Œä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰å®ƒäº†

* å®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå”¯ä¸€çš„å‚æ•°ï¼Œå¹¶ä¸”åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æ­¤å‡½æ•°

* ä¸€äº›åŸºäº `JavaScript` çš„åŠ¨ç”»åº“é«˜åº¦ä¾èµ–äºè¿™ä¸€ `API`

* é€šå¸¸ä½ ä¸å¿…ç›´æ¥è°ƒç”¨å®ƒï¼Œé‚£äº›åŠ¨ç”»åº“ä¼šæ›¿ä½ ç®¡ç†å¥½å¸§çš„æ›´æ–°

#### `setNativeProps`

æ­£å¦‚ç›´æ¥æ“ä½œæ–‡æ¡£æ‰€è¯´ï¼Œ`setNativeProps` æ–¹æ³•å¯ä»¥ä½¿æˆ‘ä»¬ç›´æ¥ä¿®æ”¹åŸºäºåŸç”Ÿè§†å›¾çš„ç»„ä»¶çš„å±æ€§ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ `setState` æ¥é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘

* å¦‚æœæˆ‘ä»¬è¦æ›´æ–°çš„ç»„ä»¶æœ‰ä¸€ä¸ªéå¸¸æ·±çš„å†…åµŒç»“æ„ï¼Œå¹¶ä¸”æ²¡æœ‰ä½¿ç”¨ `shouldComponentUpdate` æ¥ä¼˜åŒ–ï¼Œé‚£ä¹ˆä½¿ç”¨ `setNativeProps` å°±å°†å¤§æœ‰è£¨ç›Š

* å¦‚æœä½ å‘ç°ä½ çš„åŠ¨ç”»ä¸¢å¸§ï¼ˆä½äº `60` å¸§æ¯ç§’ï¼‰ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ `setNativeProps` æˆ–è€… `shouldComponentUpdate` æ¥ä¼˜åŒ–å®ƒä»¬

  * æˆ–è€…æ‚¨å¯ä»¥åœ¨ `UI` çº¿ç¨‹ä¸Šè¿è¡ŒåŠ¨ç”»ï¼Œè€Œä¸æ˜¯åœ¨[ã€å¸¦æœ‰ `useNativeDriver` é€‰é¡¹ã€‘](http://facebook.github.io/react-native/blog/2017/02/14/using-native-driver-for-animated.html)çš„ `javascript` çº¿ç¨‹ä¸Šè¿è¡ŒåŠ¨ç”»

* ä½ è¿˜å¯ä»¥è€ƒè™‘å°†éƒ¨åˆ†è®¡ç®—å·¥ä½œæ”¾åœ¨åŠ¨ç”»å®Œæˆä¹‹åè¿›è¡Œï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨[ã€ `InteractionManager` ã€‘](https://reactnative.cn/docs/interactionmanager)

* ä½ è¿˜å¯ä»¥ä½¿ç”¨åº”ç”¨å†…çš„å¼€å‘è€…èœå•ä¸­çš„ `FPS Monitor` å·¥å…·æ¥ç›‘æ§åº”ç”¨çš„å¸§ç‡

## æ— éšœç¢åŠŸèƒ½

> è¯‘æ³¨ï¼š`accessibility` ä¸€è¯å¸¸è§å¤šç§è¯‘æ³•ï¼šå¯è®¿é—®æ€§ã€æ— éšœç¢æ€§ã€è¾…åŠ©åŠŸèƒ½ç­‰ç­‰ï¼Œå…¶ä¸­æ–‡æ„æ€éƒ½ä¸å¤ªèƒ½å‡†ç¡®è¡¨è¾¾å…¶åŠŸèƒ½çš„æœ¬è´¨ï¼Œå³ä¸ºæ®‹éšœäººå£«æä¾›ä¾¿åˆ©

æœ¬æ–‡ä¸»è¦é‡‡ç”¨ `æ— éšœç¢åŠŸèƒ½` å’Œ `è¾…åŠ©æŠ€æœ¯/æœåŠ¡` çš„è¯´æ³•

* å¦‚æœä½ æˆ–ä½ çš„å…¬å¸æš‚æ—¶æ²¡æœ‰èµ„æºå’Œç²¾åŠ›å»æœåŠ¡è¿™äº›ç”¨æˆ·ï¼Œé‚£ä¹ˆä½ å¯ä»¥è·³è¿‡æœ¬æ–‡

* è¯‘è€…ä¸ªäººå¸Œæœ›å€Ÿæœ¬æ–‡æ¡£ï¼Œå‘¼åæœ‰èƒ½åŠ›æœ‰èµ„æºçš„å•†ä¸šå…¬å¸/ç»„ç»‡/ä¸ªäººï¼Œé‡è§†æ®‹éšœäººå£«ä½¿ç”¨æ™ºèƒ½æ‰‹æœºçš„æƒåˆ©

`iOS` å’Œ `Android` éƒ½æä¾›äº†ä¾¿äºæ®‹éšœäººå£«æ— éšœç¢ä½¿ç”¨ `App` çš„ `API`

* æ­¤å¤–ï¼Œä¸¤ä¸ªå¹³å°éƒ½æä¾›äº†æ•´å¥—çš„è¾…åŠ©æŠ€æœ¯ï¼Œæ¯”å¦‚éƒ½æœ‰é’ˆå¯¹è§†åŠ›å—æŸäººå£«çš„è¯»å±è½¯ä»¶ï¼ˆ `iOS` çš„ `VoiceOver` å’Œ `Android` çš„ `TalkBack` ï¼‰

* åŒæ ·åœ°ï¼Œåœ¨ `React Native` ä¸­æˆ‘ä»¬ä¹Ÿå°è£…äº†å¯¹åº”çš„ `API` ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨ `App` ä¸­é›†æˆæ— éšœç¢åŠŸèƒ½

> æ³¨æ„ï¼š`iOS` ä¸ `Android` åœ¨å…·ä½“æ–¹æ³•ä¸Šä¼šæœ‰æ‰€åŒºåˆ«ï¼Œå› æ­¤ `React Native` çš„å®ç°ä¹Ÿä¼šå› å¹³å°è€Œå¼‚

é™¤äº†æœ¬æ–‡ï¼Œä½ è¿˜å¯ä»¥é˜…è¯»è¿™ç¯‡[ã€è‹±æ–‡åšå®¢ã€‘](https://code.facebook.com/posts/435862739941212/making-react-native-apps-accessible/)äº†è§£æ›´å¤šä¿¡æ¯

### ä½¿ `App` èƒ½å¤Ÿæ— éšœç¢ä½¿ç”¨

#### æ— éšœç¢åŠŸèƒ½å±æ€§ `accessible (iOS, Android)`

è®¾ç½®ä¸º `true` æ—¶è¡¨ç¤ºå½“å‰è§†å›¾æ˜¯ä¸€ä¸ª `æ— éšœç¢å…ƒç´ ` ï¼ˆ `accessibility element` ï¼‰

* æ— éšœç¢å…ƒç´ ä¼šå°†å…¶æ‰€æœ‰å­ç»„ä»¶è§†ä¸ºä¸€æ•´ä¸ªå¯ä»¥é€‰ä¸­çš„ç»„ä»¶

* é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å¯ç‚¹å‡»çš„ç»„ä»¶ï¼ˆ `Touchable` ç³»åˆ—ç»„ä»¶ï¼‰éƒ½æ˜¯æ— éšœç¢å…ƒç´ 

åœ¨ `Android` ä¸Šï¼Œ`React Native` è§†å›¾çš„ `accessible={true}` å±æ€§ä¼šè¢«è½¬è¯‘ä¸ºåŸç”Ÿè§†å›¾å¯¹åº”çš„ `focusable={true}` å±æ€§ï¼š

```jsx
<View accessible={true}>
  <Text>text one</Text>
  <Text>text two</Text>
</View>
```

* åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“çˆ¶è§†å›¾å¼€å¯æ— éšœç¢å±æ€§åï¼Œæˆ‘ä»¬å°±æ— æ³•å•ç‹¬é€‰ä¸­ `text one` å’Œ `text two` ï¼Œè€Œåªèƒ½é€‰ä¸­æ•´ä¸ªçˆ¶è§†å›¾

#### æ— éšœç¢æ ‡ç­¾ `accessibilityLabel (iOS, Android)`

å½“ä¸€ä¸ªè§†å›¾å¯ç”¨æ— éšœç¢å±æ€§åï¼Œæœ€å¥½å†åŠ ä¸Šä¸€ä¸ª `accessibilityLabel`ï¼ˆæ— éšœç¢æ ‡ç­¾ï¼‰ï¼Œè¿™æ ·å¯ä»¥è®©ä½¿ç”¨ `VoiceOver` çš„äººä»¬æ¸…æ¥šåœ°çŸ¥é“è‡ªå·±é€‰ä¸­äº†ä»€ä¹ˆ

* `VoiceOver` ä¼šè¯»å‡ºé€‰ä¸­å…ƒç´ çš„æ— éšœç¢æ ‡ç­¾

è®¾å®š `accessibilityLabel` å±æ€§å¹¶èµ‹äºˆä¸€ä¸ªå­—ç¬¦ä¸²å†…å®¹å³å¯åœ¨ `View` ã€`Text` æˆ–æ˜¯ `Touchable` ä¸­å¯ç”¨æ— éšœç¢æ ‡ç­¾ï¼š

```jsx
<TouchableOpacity
  accessible={true}
  accessibilityLabel="Tap me!"
  onPress={this._onPress}>
  <View style={styles.button}>
    <Text style={styles.buttonText}>Press me!</Text>
  </View>
</TouchableOpacity>
```

* åœ¨ä¸Šé¢è¿™æ®µç¤ºä¾‹ä»£ç ä¸­ï¼Œå¦‚æœä¸åœ¨ `TouchableOpacity` ä¸Šè®¾ç½®æ— éšœç¢æ ‡ç­¾ï¼Œé‚£ä¹ˆå…¶é»˜è®¤å€¼å°±ä¼šæ˜¯ `Press me!` ï¼ˆå³ `Text` å­ç»„ä»¶çš„æ–‡æœ¬å€¼ï¼‰

* æ­¤æ—¶æ— éšœç¢æ ‡ç­¾æ˜¯é€šè¿‡è‡ªåŠ¨å–æ‰€æœ‰ `Text` å­èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åç”¨ç©ºæ ¼è¿èµ·æ¥ç”Ÿæˆ

#### æ— éšœç¢æç¤º `accessibilityHint (iOS, Android)`

æ— éšœç¢æç¤ºç”¨äºå¸®åŠ©ç”¨æˆ·ç†è§£æ“ä½œå¯èƒ½å¯¼è‡´ä»€ä¹ˆåæœï¼Œå°¤å…¶æ˜¯å½“è¿™äº›åæœå¹¶ä¸èƒ½ä»æ— éšœç¢æ ‡ç­¾ä¸­æ¸…æ¥šåœ°äº†è§£æ—¶

* è¦å¯ç”¨æ— éšœç¢æç¤ºåªéœ€åœ¨éœ€è¦è®¾ç½®çš„å…ƒç´ ä¸Šè®¾ç½® `accessibilityHint` å±æ€§ï¼Œå¹¶èµ‹äºˆç”¨äºè§£é‡Šçš„æ–‡æœ¬ï¼š

  ```jsx
  <TouchableOpacity
    accessible={true}
    accessibilityLabel="è¿”å›"
    accessibilityHint="è¿”å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢"
    onPress={this._onPress}>
    <View style={styles.button}>
      <Text style={styles.buttonText}>Back</Text>
    </View>
  </TouchableOpacity>
  ```

  * åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œå¦‚æœç”¨æˆ·åœ¨è®¾å¤‡çš„ `Voiceover` è®¾ç½®ä¸­å¯ç”¨äº†æç¤ºï¼Œ`iOS` çš„ `Voiceover` å°†åœ¨æ ‡ç­¾åè¯»å–æç¤º

    * é˜…è¯»[ã€ `iOS` å¼€å‘è€…æ–‡æ¡£ã€‘](https://developer.apple.com/documentation/objectivec/nsobject/1615093-accessibilityhint)ä¸­æœ‰å…³è®¿é—®æŒ‡å—çš„æ›´å¤šä¿¡æ¯

  * åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œ`Android` çš„ `Talkback` å°†åœ¨æ ‡ç­¾åè¯»å–æç¤º

[ã€æ›´å¤šå®˜æ–¹æ–‡æ¡£èµ„æ–™å¯å‚è€ƒæ­¤é“¾æ¥ã€‘](https://reactnative.cn/docs/accessibility/)

## æ”¹è¿›ç”¨æˆ·ä½“éªŒ

### é…ç½®æ–‡æœ¬è¾“å…¥

> åœ¨è§¦æ‘¸ç”µè¯ä¸Šè¾“å…¥æ–‡æœ¬æ˜¯ä¸€é¡¹æŒ‘æˆ˜ï¼šå°å±å¹•ã€è½¯ä»¶é”®ç›˜

ä½†æ˜¯ï¼Œæ ¹æ®æ‚¨éœ€è¦çš„æ•°æ®ç±»å‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ­£ç¡®é…ç½®æ–‡æœ¬è¾“å…¥æ¥ç®€åŒ–å·¥ä½œï¼š

* è‡ªåŠ¨å¯¹ç„¦ç¬¬ä¸€ä¸ªå­—æ®µ

* ä½¿ç”¨å ä½ç¬¦æ–‡æœ¬ä½œä¸ºé¢„æœŸæ•°æ®æ ¼å¼çš„ç¤ºä¾‹

* å¯ç”¨æˆ–ç¦ç”¨è‡ªåŠ¨èµ„æœ¬åŒ–å’Œè‡ªåŠ¨æ›´æ­£

* é€‰æ‹©é”®ç›˜ç±»å‹ï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶ã€æ•°å­—ï¼‰

* ç¡®ä¿è¿”å›æŒ‰é’®èšç„¦ä¸‹ä¸€ä¸ªå­—æ®µæˆ–æäº¤è¡¨å•

æœ‰å…³æ›´å¤šé…ç½®é€‰é¡¹ï¼Œè¯·å‚è€ƒ[ã€ `TextInput` æ–‡æ¡£ã€‘](https://reactnative.cn/docs/textinput)

[ã€å°è¯•ä¸€ä¸‹ï¼Ÿã€‘](https://snack.expo.io/H1iGt2vSW)

### å½“é”®ç›˜å¯è§æ—¶ç®¡ç†å¸ƒå±€

* è½¯ä»¶é”®ç›˜å‡ ä¹å æ®äº†å±å¹•çš„ä¸€åŠ

* å¦‚æœä½ æœ‰å¯ä»¥è¢«é”®ç›˜è¦†ç›–çš„äº¤äº’å…ƒç´ 

* ä½¿ç”¨[ã€ `KeyboardAvoidingView` ç»„ä»¶ã€‘](https://reactnative.cn/docs/keyboardavoidingview)ç¡®ä¿å®ƒä»¬ä»ç„¶å¯ä»¥è®¿é—®

[ã€å°è¯•ä¸€ä¸‹ï¼Ÿã€‘](https://snack.expo.io/ryxRkwnrW)

### ä½¿å¯æ•²å‡»åŒºåŸŸå˜å¤§

åœ¨æ‰‹æœºä¸Šï¼ŒæŒ‰ä¸‹æŒ‰é’®æ—¶å¾ˆéš¾éå¸¸ç²¾ç¡®

* åº”è¯¥ç¡®ä¿æ‰€æœ‰äº¤äº’å…ƒç´ å‡ä¸º `44x44` æˆ–æ›´å¤§

* è¿™æ ·åšçš„ä¸€ç§æ–¹æ³•æ˜¯ä¸ºå…ƒç´ ç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ï¼Œ`padding` ã€`minwidth` å’Œ `minheight` æ ·å¼å€¼å¯ä»¥ç”¨äºæ­¤ç›®çš„

* æˆ–è€…ï¼Œå¯ä»¥ä½¿ç”¨[ã€ `hitslop prop` ã€‘](https://reactnative.cn/docs/touchablewithoutfeedback#hitslop)å¢åŠ äº¤äº’åŒºåŸŸï¼Œè€Œä¸å½±å“å¸ƒå±€

[ã€å°è¯•ä¸€ä¸‹ï¼Ÿã€‘](https://snack.expo.io/rJPwCt4HZ)

### ä½¿ç”¨ `Android Ripple`

`Android api 21+` ä½¿ç”¨ææ–™è®¾è®¡æ³¢çº¹ï¼Œå½“ç”¨æˆ·è§¦æ‘¸åˆ°å±å¹•ä¸Šå¯äº¤äº’çš„åŒºåŸŸæ—¶ï¼Œä¸ºç”¨æˆ·æä¾›åé¦ˆ

* `react native` é€šè¿‡[ã€ `TouchableNativeFeedback` ã€‘](https://reactnative.cn/docs/touchablenativefeedback)ç»„ä»¶å…¬å¼€æ­¤ä¿¡æ¯

* ä½¿ç”¨è¿™ç§å¯è§¦æ‘¸çš„æ•ˆæœï¼Œè€Œä¸æ˜¯ä¸é€æ˜æˆ–çªå‡ºæ˜¾ç¤ºï¼Œé€šå¸¸ä¼šè®©ä½ çš„åº”ç”¨ç¨‹åºæ„Ÿè§‰æ›´é€‚åˆå¹³å°

* ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨æ—¶è¦å°å¿ƒï¼Œå› ä¸ºå®ƒåœ¨ `iOS` æˆ– `Android API` ä¸Šä¸èµ·ä½œç”¨

* å› æ­¤ï¼Œæ‚¨éœ€è¦é€€å›åˆ°ä½¿ç”¨ `iOS` ä¸Šçš„å…¶ä»–å¯è§¦æ‘¸ç»„ä»¶ä¹‹ä¸€

> æ‚¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼äº[ã€ `react-native-platform-touchable` ã€‘](https://github.com/react-community/react-native-platform-touchable)æ¥è§¦æ‘¸ï¼Œä»è€Œä¸ºæ‚¨å¤„ç†å¹³å°å·®å¼‚

[ã€å°è¯•ä¸€ä¸‹ï¼Ÿã€‘](https://snack.expo.io/SJywqe3rZ)

### å±å¹•æ–¹å‘é”å®š

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªå±å¹•æ–¹å‘åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œé™¤éæ‚¨ä½¿ç”¨çš„æ˜¯ `DimensionsAPI` å¹¶ä¸”ä¸å¤„ç†æ–¹å‘æ›´æ”¹

* å¦‚æœä¸æƒ³æ”¯æŒå¤šä¸ªå±å¹•æ–¹å‘ï¼Œæ‚¨å¯ä»¥å°†å±å¹•æ–¹å‘é”å®šä¸ºçºµå‘æˆ–æ¨ªå‘

* åœ¨ `iOS` ä¸Šï¼Œåœ¨ `xcode` çš„ `å¸¸è§„` é€‰é¡¹å¡å’Œ `éƒ¨ç½²ä¿¡æ¯` éƒ¨åˆ†ä¸­

  * å¯ç”¨è¦æ”¯æŒçš„è®¾å¤‡æ–¹å‘

  * ç¡®ä¿åœ¨è¿›è¡Œæ›´æ”¹æ—¶ä» `è®¾å¤‡` èœå•ä¸­é€‰æ‹©äº† `iPhone`

* å¯¹äº `Android` ï¼Œæ‰“å¼€ `androidmanifest.xml` æ–‡ä»¶

  * åœ¨ `activity` å…ƒç´ ä¸­æ·»åŠ  `android:screenorientation='portrait'` ä»¥é”å®šåˆ° `portrait`

  * æˆ–æ·»åŠ  `android:screenorientation='landscape'` ä»¥é”å®šåˆ° `landscape`

### å­¦ä¹ æ›´å¤š

[ã€ `Material Design` ã€‘](https://material.io/)å’Œ[ã€ `Human Interface Guidelines` ã€‘](https://developer.apple.com/ios/human-interface-guidelines/overview/design-principles/)æ˜¯å­¦ä¹ æ›´å¤šç§»åŠ¨å¹³å°è®¾è®¡çš„é‡è¦èµ„æº

## å®šæ—¶å™¨

> å®šæ—¶å™¨æ˜¯ä¸€ä¸ªåº”ç”¨ä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†

`React Native` å®ç°äº†å’Œæµè§ˆå™¨ä¸€è‡´çš„[ã€å®šæ—¶å™¨ `Timer` ã€‘](https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Timers)

* `setTimeout, clearTimeout`
* `setInterval, clearInterval`
* `setImmediate, clearImmediate`
* `requestAnimationFrame, cancelAnimationFrame`

å®ƒä»¬ä¹‹é—´çš„ä¸åŒï¼š

* `requestAnimationFrame(fn)` ä¼šåœ¨æ¯å¸§åˆ·æ–°ä¹‹åæ‰§è¡Œä¸€æ¬¡

* `setTimeout(fn, 0)` ä¼šå°½å¯èƒ½å¿«çš„æ‰§è¡Œï¼ˆåœ¨ `iPhone5S` ä¸Šæœ‰å¯èƒ½æ¯ç§’ `1000` æ¬¡ä»¥ä¸Šï¼‰

* `setImmediate` åˆ™ä¼šåœ¨å½“å‰ `JavaScript` æ‰§è¡Œå—ç»“æŸçš„æ—¶å€™æ‰§è¡Œï¼Œå°±åœ¨å°†è¦å‘é€æ‰¹é‡å“åº”æ•°æ®åˆ°åŸç”Ÿä¹‹å‰

> æ³¨æ„ï¼šå¦‚æœä½ åœ¨ `setImmediate` çš„å›è°ƒå‡½æ•°ä¸­åˆæ‰§è¡Œäº† `setImmediate` ï¼Œå®ƒä¼šç´§æ¥ç€ç«‹åˆ»æ‰§è¡Œï¼Œè€Œä¸ä¼šåœ¨è°ƒç”¨ä¹‹å‰ç­‰å¾…åŸç”Ÿä»£ç 

`Promise` çš„å®ç°å°±ä½¿ç”¨äº† `setImmediate` æ¥æ‰§è¡Œå¼‚æ­¥è°ƒç”¨

### `InteractionManager`

> åŸç”Ÿåº”ç”¨æ„Ÿè§‰å¦‚æ­¤æµç•…çš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯åœ¨äº’åŠ¨å’ŒåŠ¨ç”»çš„è¿‡ç¨‹ä¸­é¿å…ç¹é‡çš„æ“ä½œ

åœ¨ `React Native` é‡Œï¼Œæˆ‘ä»¬ç›®å‰å—åˆ°é™åˆ¶ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ä¸ª `JavaScript` æ‰§è¡Œçº¿ç¨‹

* ä¸è¿‡ä½ å¯ä»¥ç”¨ `InteractionManager` æ¥ç¡®ä¿åœ¨æ‰§è¡Œç¹é‡å·¥ä½œä¹‹å‰æ‰€æœ‰çš„äº¤äº’å’ŒåŠ¨ç”»éƒ½å·²ç»å¤„ç†å®Œæ¯•

* åº”ç”¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥å®‰æ’ä¸€ä¸ªä»»åŠ¡ï¼Œä½¿å…¶åœ¨äº¤äº’ç»“æŸä¹‹åæ‰§è¡Œï¼š

```jsx
InteractionManager.runAfterInteractions(() => {
  // ...éœ€è¦é•¿æ—¶é—´åŒæ­¥æ‰§è¡Œçš„ä»»åŠ¡...
});
```

æˆ‘ä»¬æ¥æŠŠå®ƒå’Œä¹‹å‰çš„å‡ ä¸ªä»»åŠ¡å®‰æ’æ–¹æ³•å¯¹æ¯”ä¸€ä¸‹ï¼š

* `requestAnimationFrame()`

  ç”¨æ¥æ‰§è¡Œåœ¨ä¸€æ®µæ—¶é—´å†…æ§åˆ¶è§†å›¾åŠ¨ç”»çš„ä»£ç 

* `setImmediate / setTimeout / setInterval()`

  åœ¨ç¨åæ‰§è¡Œä»£ç 

  > æ³¨æ„è¿™æœ‰å¯èƒ½ä¼šå»¶è¿Ÿå½“å‰æ­£åœ¨è¿›è¡Œçš„åŠ¨ç”»

* `runAfterInteractions()`

  åœ¨ç¨åæ‰§è¡Œä»£ç ï¼Œä¸ä¼šå»¶è¿Ÿå½“å‰è¿›è¡Œçš„åŠ¨ç”»

è§¦æ‘¸å¤„ç†ç³»ç»Ÿä¼šæŠŠä¸€ä¸ªæˆ–å¤šä¸ªè¿›è¡Œä¸­çš„è§¦æ‘¸æ“ä½œè®¤å®šä¸º **`äº¤äº’`**

* å¹¶ä¸”ä¼šå°† `runAfterInteractions()` çš„å›è°ƒå‡½æ•°å»¶è¿Ÿæ‰§è¡Œ

* ç›´åˆ°æ‰€æœ‰çš„è§¦æ‘¸æ“ä½œéƒ½ç»“æŸæˆ–å–æ¶ˆäº†

`InteractionManager` è¿˜å…è®¸åº”ç”¨æ³¨å†ŒåŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»å¼€å§‹æ—¶åˆ›å»ºä¸€ä¸ªäº¤äº’ **`å¥æŸ„`** ï¼Œç„¶ååœ¨ç»“æŸçš„æ—¶å€™æ¸…é™¤å®ƒï¼š

```jsx
var handle = InteractionManager.createInteractionHandle();
// æ‰§è¡ŒåŠ¨ç”»... (`runAfterInteractions`ä¸­çš„ä»»åŠ¡ç°åœ¨å¼€å§‹æ’é˜Ÿç­‰å€™)
// åœ¨åŠ¨ç”»å®Œæˆä¹‹å
InteractionManager.clearInteractionHandle(handle);
// åœ¨æ‰€æœ‰å¥æŸ„éƒ½æ¸…é™¤ä¹‹åï¼Œç°åœ¨å¼€å§‹ä¾åºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡
```

### åŠ¡å¿…åœ¨å¸è½½ç»„ä»¶å‰æ¸…é™¤å®šæ—¶å™¨ï¼

> æˆ‘ä»¬å‘ç°å¾ˆå¤š `React Native` åº”ç”¨å‘ç”Ÿè‡´å‘½é”™è¯¯ï¼ˆé—ªé€€ï¼‰æ˜¯ä¸è®¡æ—¶å™¨æœ‰å…³

å…·ä½“æ¥è¯´ï¼Œæ˜¯åœ¨æŸä¸ªç»„ä»¶è¢«å¸è½½ï¼ˆ `unmount` ï¼‰ä¹‹åï¼Œè®¡æ—¶å™¨å´ä»ç„¶åœ¨è¿è¡Œ

* è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€é“­è®°åœ¨ `unmount` ç»„ä»¶æ—¶æ¸…é™¤ï¼ˆ `clearTimeout / clearInterval` ï¼‰æ‰€æœ‰ç”¨åˆ°çš„å®šæ—¶å™¨å³å¯ï¼š

```jsx
import React, { Component } from "react";

export default class Hello extends Component {
  componentDidMount() {
    this.timer = setTimeout(() => {
      console.log("æŠŠä¸€ä¸ªå®šæ—¶å™¨çš„å¼•ç”¨æŒ‚åœ¨thisä¸Š");
    }, 500);
  }
  componentWillUnmount() {
    // è¯·æ³¨æ„Un"m"ountçš„mæ˜¯å°å†™

    // å¦‚æœå­˜åœ¨this.timerï¼Œåˆ™ä½¿ç”¨clearTimeoutæ¸…ç©º
    // å¦‚æœä½ ä½¿ç”¨å¤šä¸ªtimerï¼Œé‚£ä¹ˆç”¨å¤šä¸ªå˜é‡ï¼Œæˆ–è€…ç”¨ä¸ªæ•°ç»„æ¥ä¿å­˜å¼•ç”¨ï¼Œç„¶åé€ä¸ªclear
    this.timer && clearTimeout(this.timer);
  }
}
```

## è°ƒè¯•

### å¼€å¯è°ƒè¯•çš„å¿«æ·é”®

> `React Native` åœ¨ `iOS` æ¨¡æ‹Ÿå™¨ä¸Šæ”¯æŒä¸€äº›å¿«æ·é”®æ“ä½œï¼Œå…·ä½“ä¼šåœ¨ä¸‹æ–‡ä¸­æè¿°

è¦ä½¿ç”¨å¿«æ·é”®è¯·åŠ¡å¿…ç¡®ä¿æ¨¡æ‹Ÿå™¨çš„ `Hardware` èœå•ä¸­ï¼Œ `Keyboard` é€‰é¡¹ä¸‹çš„ `Connect Hardware Keyboard` å¤„äºå¼€å¯çŠ¶æ€ï¼Œå¦åˆ™æŒ‰é”®æ˜¯æ²¡æœ‰å“åº”çš„

### è®¿é—® `App` å†…çš„å¼€å‘èœå•

ä½ å¯ä»¥é€šè¿‡æ‘‡æ™ƒè®¾å¤‡æ¥æ‰“å¼€å¼€å‘èœå•ï¼š

* æˆ–æ˜¯é€‰æ‹© `iOS` æ¨¡æ‹Ÿå™¨çš„ `Hardware` èœå•ä¸­çš„ `Shake Gesture` é€‰é¡¹

* å¦‚æœæ˜¯åœ¨ `iOS` æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œï¼Œè¿˜å¯ä»¥æŒ‰ä¸‹ `CommandâŒ˜ + D` å¿«æ·é”®

* `Android` æ¨¡æ‹Ÿå™¨å¯¹åº”çš„åˆ™æ˜¯ `CommandâŒ˜ + M`ï¼ˆ `windows` ä¸Šå¯èƒ½æ˜¯ `F1` æˆ–è€… `F2` ï¼‰

* æˆ–æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `adb shell input keyevent 82` æ¥å‘é€èœå•é”®å‘½ä»¤

![å›¾ç‰‡](https://reactnative.cn/docs/assets/DeveloperMenu.png)

> æ³¨æ„ï¼šåœ¨å‘å¸ƒï¼ˆ `production` ï¼‰ç‰ˆæœ¬ä¸­å¼€å‘è€…èœå•å°†æ— æ³•ä½¿ç”¨

### åˆ·æ–° `JavaScript`

ä¼ ç»Ÿçš„åŸç”Ÿåº”ç”¨å¼€å‘ä¸­ï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œä½†åœ¨ `React Native` ä¸­ä½ åªéœ€è¦åˆ·æ–°ä¸€ä¸‹ `JavaScript` ä»£ç ï¼Œå°±èƒ½ç«‹åˆ»çœ‹åˆ°å˜åŒ–

* å…·ä½“çš„æ“ä½œå°±æ˜¯åœ¨å¼€å‘èœå•ä¸­ç‚¹å‡» `Reload` é€‰é¡¹

* ä¹Ÿå¯ä»¥åœ¨ `iOS` æ¨¡æ‹Ÿå™¨ä¸­æŒ‰ä¸‹ `CommandâŒ˜ + R`

* `Android` æ¨¡æ‹Ÿå™¨ä¸Šå¯¹åº”çš„åˆ™æ˜¯æŒ‰ä¸¤ä¸‹ `R`

### è‡ªåŠ¨åˆ·æ–°

æ‹©å¼€å‘èœå•ä¸­çš„ `Enable Live Reload` å¯ä»¥å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœä½ å¼€å‘ä¸­çš„æ—¶é—´

* æ›´ç¥å¥‡çš„æ˜¯ï¼Œä½ è¿˜å¯ä»¥ä¿æŒåº”ç”¨çš„å½“å‰è¿è¡ŒçŠ¶æ€ï¼Œä¿®æ”¹åçš„ `JavaScript` æ–‡ä»¶ä¼šè‡ªåŠ¨æ³¨å…¥è¿›æ¥ï¼ˆå°±å¥½æ¯”è¡Œé©¶ä¸­çš„æ±½è½¦ä¸ç”¨åœä¸‹å°±èƒ½æ›´æ¢æ–°çš„è½®èƒï¼‰

* è¦å®ç°è¿™ä¸€ç‰¹æ€§åªéœ€å¼€å¯å¼€å‘èœå•ä¸­çš„ `Hot Reloading` é€‰é¡¹

  * æŸäº›æƒ…å†µä¸‹ `hot reload` å¹¶ä¸èƒ½é¡ºåˆ©å®æ–½

  * å¦‚æœç¢°åˆ°ä»»ä½•ç•Œé¢åˆ·æ–°ä¸Šçš„é—®é¢˜ï¼Œè¯·å°è¯•æ‰‹åŠ¨å®Œå…¨åˆ·æ–°

ä½†æœ‰äº›æ—¶å€™ä½ å¿…é¡»è¦é‡æ–°ç¼–è¯‘åº”ç”¨æ‰èƒ½ä½¿ä¿®æ”¹ç”Ÿæ•ˆï¼š

* å¢åŠ äº†æ–°çš„èµ„æº

  * æ¯”å¦‚ç»™ `iOS` çš„ `Images.xcassets` æ–‡ä»¶å¤¹æ·»åŠ äº†å›¾ç‰‡

  * æˆ–æ˜¯ `Andorid` çš„ `res/drawable` æ–‡ä»¶å¤¹æ·»åŠ äº†å›¾ç‰‡

* æ›´æ”¹äº†ä»»ä½•çš„åŸç”Ÿä»£ç ï¼ˆ `objective-c / swift / java` ï¼‰

### åº”ç”¨å†…çš„é”™è¯¯ä¸è­¦å‘Šæç¤ºï¼ˆçº¢å±å’Œé»„å±ï¼‰

> çº¢å±æˆ–é»„å±æç¤ºéƒ½åªä¼šåœ¨å¼€å‘ç‰ˆæœ¬ä¸­æ˜¾ç¤ºï¼Œæ­£å¼çš„ç¦»çº¿åŒ…ä¸­æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„

* çº¢å±é”™è¯¯

  åº”ç”¨å†…çš„æŠ¥é”™ä¼šä»¥å…¨å±çº¢è‰²æ˜¾ç¤ºåœ¨åº”ç”¨ä¸­ï¼ˆè°ƒè¯•æ¨¡å¼ä¸‹ï¼‰ï¼Œæˆ‘ä»¬ç§°ä¸ºçº¢å±ï¼ˆred boxï¼‰æŠ¥é”™

  * ä½ å¯ä»¥ä½¿ç”¨ `console.error()` æ¥æ‰‹åŠ¨è§¦å‘çº¢å±é”™è¯¯

* é»„å±è­¦å‘Š

  åº”ç”¨å†…çš„è­¦å‘Šä¼šä»¥å…¨å±é»„è‰²æ˜¾ç¤ºåœ¨åº”ç”¨ä¸­ï¼ˆè°ƒè¯•æ¨¡å¼ä¸‹ï¼‰ï¼Œæˆ‘ä»¬ç§°ä¸ºé»„å±ï¼ˆyellow boxï¼‰æŠ¥é”™

  * ç‚¹å‡»è­¦å‘Šå¯ä»¥æŸ¥çœ‹è¯¦æƒ…æˆ–æ˜¯å¿½ç•¥æ‰

  * å’Œçº¢å±æŠ¥è­¦ç±»ä¼¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ `console.warn()` æ¥æ‰‹åŠ¨è§¦å‘é»„å±è­¦å‘Š

  * åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å‘æ¨¡å¼ä¸­å¯ç”¨äº†é»„å±è­¦å‘Šï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å…³é—­ï¼š

  ```jsx
  console.disableYellowBox = true;
  console.warn('YellowBox is disabled.');
  ```

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»£ç å±è”½æŒ‡å®šçš„è­¦å‘Š

* åƒä¸‹é¢è¿™æ ·è°ƒç”¨ `ignoreWarnings` æ–¹æ³•ï¼Œå‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼š

```jsx
import {YellowBox} from 'react-native';
YellowBox.ignoreWarnings(['Warning: ...']);
```

> åœ¨ `CI / Xcode` ä¸­ï¼Œé»„å±è­¦å‘Šè¿˜å¯ä»¥é€šè¿‡è®¾ç½® `IS_TESTING` ç¯å¢ƒå˜é‡æ¥æ§åˆ¶å¯ç”¨ä¸å¦

> çº¢å±é”™è¯¯å’Œé»„å±è­¦å‘Šåœ¨å‘å¸ƒç‰ˆï¼ˆ `release / production` ï¼‰ä¸­éƒ½æ˜¯è‡ªåŠ¨ç¦ç”¨çš„

äº†è§£[ã€ `Chrome` å¼€å‘è€…å·¥å…·ã€‘](https://reactnative.cn/docs/debugging/#chrome-å¼€å‘è€…å·¥å…·)å¯ä»¥æ›´å¥½çš„è°ƒè¯•ä»£ç 

## æ€§èƒ½

> ä½¿ç”¨ `React Native` æ›¿ä»£åŸºäº `WebView` çš„æ¡†æ¶æ¥å¼€å‘ `App` çš„ä¸€ä¸ªå¼ºæœ‰åŠ›çš„ç†ç”±ï¼Œå°±æ˜¯ä¸ºäº†ä½¿ `App` å¯ä»¥è¾¾åˆ°æ¯ç§’ `60` å¸§ï¼ˆè¶³å¤Ÿæµç•…ï¼‰ï¼Œå¹¶ä¸”èƒ½æœ‰ç±»ä¼¼åŸç”Ÿ `App` çš„å¤–è§‚å’Œæ‰‹æ„Ÿ

å› æ­¤æˆ‘ä»¬ä¹Ÿå°½å¯èƒ½åœ°ä¼˜åŒ– `React Native` å»å®ç°è¿™ä¸€ç›®æ ‡ï¼Œä½¿å¼€å‘è€…èƒ½é›†ä¸­ç²¾åŠ›å¤„ç† `App` çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸ç”¨è´¹å¿ƒè€ƒè™‘æ€§èƒ½

* ä½†æ˜¯ï¼Œæ€»è¿˜æ˜¯æœ‰ä¸€äº›åœ°æ–¹æœ‰æ‰€æ¬ ç¼ºï¼Œä»¥åŠåœ¨æŸäº›åœºåˆ `React Native` è¿˜ä¸èƒ½å¤Ÿæ›¿ä½ å†³å®šå¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼ˆç”¨åŸç”Ÿä»£ç å†™ä¹Ÿæ— æ³•é¿å…ï¼‰ï¼Œå› æ­¤äººå·¥çš„å¹²é¢„ä¾ç„¶æ˜¯å¿…è¦çš„

### å…³äº `å¸§` ä½ æ‰€éœ€è¦çŸ¥é“çš„

> è€ä¸€è¾ˆäººå¸¸å¸¸æŠŠç”µå½±ç§°ä¸º `ç§»åŠ¨çš„ç”»` ï¼Œæ˜¯å› ä¸ºè§†é¢‘ä¸­é€¼çœŸçš„åŠ¨æ€æ•ˆæœå…¶å®æ˜¯ä¸€ç§å¹»è§‰ï¼Œè¿™ç§å¹»è§‰æ˜¯ç”±ä¸€ç»„é™æ€çš„å›¾ç‰‡ä»¥ä¸€ä¸ªç¨³å®šçš„é€Ÿåº¦å¿«é€Ÿå˜åŒ–æ‰€äº§ç”Ÿçš„

æˆ‘ä»¬æŠŠè¿™ç»„å›¾ç‰‡ä¸­çš„æ¯ä¸€å¼ å›¾ç‰‡å«åšä¸€å¸§

* è€Œæ¯ç§’é’Ÿæ˜¾ç¤ºçš„å¸§æ•°ç›´æ¥çš„å½±å“äº†è§†é¢‘ï¼ˆæˆ–è€…è¯´ç”¨æˆ·ç•Œé¢ï¼‰çš„æµç•…åº¦å’ŒçœŸå®æ„Ÿ

* `iOS` è®¾å¤‡æä¾›äº†æ¯ç§’ `60` çš„å¸§ç‡ï¼Œè¿™å°±ç•™ç»™äº†å¼€å‘è€…å’Œ `UI` ç³»ç»Ÿå¤§çº¦ `16.67ms` æ¥å®Œæˆç”Ÿæˆä¸€å¼ é™æ€å›¾ç‰‡ï¼ˆå¸§ï¼‰æ‰€éœ€è¦çš„æ‰€æœ‰å·¥ä½œ

* å¦‚æœåœ¨è¿™åˆ†æ´¾çš„ `16.67ms` ä¹‹å†…æ²¡æœ‰èƒ½å¤Ÿå®Œæˆè¿™äº›å·¥ä½œï¼Œå°±ä¼šå¼•å‘ `ä¸¢å¸§` çš„åæœï¼Œä½¿ç•Œé¢è¡¨ç°çš„ä¸å¤Ÿæµç•…

ä¸‹é¢è¦è®²çš„äº‹æƒ…å¯èƒ½æ›´ä¸ºå¤æ‚ï¼š

* è¯·å…ˆè°ƒå‡ºä½ åº”ç”¨çš„å¼€å‘èœå•

* æ‰“å¼€ `Show FPS Monitor`

* ä½ ä¼šæ³¨æ„åˆ°æœ‰ä¸¤ä¸ªä¸åŒçš„å¸§ç‡

![å›¾ç‰‡](https://reactnative.cn/docs/assets/PerfUtil.png)

#### `JavaScript` å¸§ç‡( `JavaScript` çº¿ç¨‹)

> å¯¹å¤§å¤šæ•° `React Native` åº”ç”¨æ¥è¯´ï¼Œä¸šåŠ¡é€»è¾‘æ˜¯è¿è¡Œåœ¨ `JavaScript` çº¿ç¨‹ä¸Šçš„

è¿™æ˜¯ `React` åº”ç”¨æ‰€åœ¨çš„çº¿ç¨‹ï¼Œä¹Ÿæ˜¯å‘ç”Ÿ `API` è°ƒç”¨ï¼Œä»¥åŠå¤„ç†è§¦æ‘¸äº‹ä»¶ç­‰æ“ä½œçš„çº¿ç¨‹

* æ›´æ–°æ•°æ®åˆ°åŸç”Ÿæ”¯æŒçš„è§†å›¾æ˜¯æ‰¹é‡è¿›è¡Œçš„

* å¹¶ä¸”åœ¨äº‹ä»¶å¾ªç¯æ¯è¿›è¡Œä¸€æ¬¡çš„æ—¶å€™è¢«å‘é€åˆ°åŸç”Ÿç«¯

* è¿™ä¸€æ­¥é€šå¸¸ä¼šåœ¨ä¸€å¸§æ—¶é—´ç»“æŸä¹‹å‰å¤„ç†å®Œï¼ˆå¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼‰

* å¦‚æœ `JavaScript` çº¿ç¨‹æœ‰ä¸€å¸§æ²¡æœ‰åŠæ—¶å“åº”ï¼Œå°±è¢«è®¤ä¸ºå‘ç”Ÿäº†ä¸€æ¬¡ä¸¢å¸§

ä¾‹å¦‚ï¼šä½ åœ¨ä¸€ä¸ªå¤æ‚åº”ç”¨çš„æ ¹ç»„ä»¶ä¸Šè°ƒç”¨äº† `this.setState` ï¼š

* ä»è€Œå¯¼è‡´ä¸€æ¬¡å¼€é”€å¾ˆå¤§çš„å­ç»„ä»¶æ ‘çš„é‡ç»˜

* å¯æƒ³è€ŒçŸ¥ï¼Œè¿™å¯èƒ½ä¼šèŠ±è´¹ `200ms` ä¹Ÿå°±æ˜¯æ•´æ•´ `12` å¸§çš„ä¸¢å¤±

* æ­¤æ—¶ï¼Œä»»ä½•ç”± `JavaScript` æ§åˆ¶çš„åŠ¨ç”»éƒ½ä¼šå¡ä½

* åªè¦å¡é¡¿è¶…è¿‡ `100ms` ï¼Œç”¨æˆ·å°±ä¼šæ˜æ˜¾çš„æ„Ÿè§‰åˆ°

* è¿™ç§æƒ…å†µç»å¸¸å‘ç”Ÿåœ¨è€çš„ `Navigator` å¯¼èˆªå™¨çš„åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼š

  * å½“ä½  `push` ä¸€ä¸ªæ–°çš„è·¯ç”±æ—¶ï¼Œ`JavaScript` éœ€è¦ç»˜åˆ¶æ–°åœºæ™¯æ‰€éœ€çš„æ‰€æœ‰ç»„ä»¶ï¼Œä»¥å‘é€æ­£ç¡®çš„å‘½ä»¤ç»™åŸç”Ÿç«¯å»åˆ›å»ºè§†å›¾

  * ç”±äºåˆ‡æ¢æ˜¯ç”± `JavaScript` çº¿ç¨‹æ‰€æ§åˆ¶ï¼Œå› æ­¤ç»å¸¸ä¼šå ç”¨è‹¥å¹²å¸§çš„æ—¶é—´ï¼Œå¼•èµ·ä¸€äº›å¡é¡¿

  * æœ‰çš„æ—¶å€™ï¼Œç»„ä»¶ä¼šåœ¨ `componentDidMount` å‡½æ•°ä¸­åšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼Œè¿™ç”šè‡³å¯èƒ½ä¼šå¯¼è‡´é¡µé¢åˆ‡æ¢è¿‡ç¨‹ä¸­å¤šè¾¾ä¸€ç§’çš„å¡é¡¿

å¦ä¸€ä¸ªä¾‹å­æ˜¯è€çš„è§¦æ‘¸äº‹ä»¶çš„å“åº”ï¼š

* å¦‚æœä½ æ­£åœ¨ `JavaScript` çº¿ç¨‹å¤„ç†ä¸€ä¸ªè·¨è¶Šå¤šä¸ªå¸§çš„å·¥ä½œ

  * ä½ å¯èƒ½ä¼šæ³¨æ„åˆ° `TouchableOpacity` çš„å“åº”è¢«å»¶è¿Ÿäº†

* è¿™æ˜¯å› ä¸º `JavaScript` çº¿ç¨‹å¤ªå¿™äº†

  * ä¸èƒ½å¤Ÿå¤„ç†ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„åŸå§‹è§¦æ‘¸äº‹ä»¶

  * ç»“æœ `TouchableOpacity` å°±ä¸èƒ½åŠæ—¶å“åº”è¿™äº›äº‹ä»¶å¹¶å‘½ä»¤ä¸»çº¿ç¨‹çš„é¡µé¢å»è°ƒæ•´é€æ˜åº¦äº†

#### `UI` å¸§ç‡(ä¸»çº¿ç¨‹)

> å¾ˆå¤šäººä¼šæ³¨æ„åˆ°ï¼Œ`NavigatorIOS` çš„æ€§èƒ½è¦æ¯”è€çš„çº¯ `JavaScript` å®ç°çš„ `Navigator` å¥½çš„å¤š

åŸå› å°±æ˜¯å®ƒçš„åˆ‡æ¢åŠ¨ç”»æ˜¯å®Œå…¨åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ï¼Œå› æ­¤ä¸ä¼šè¢« `JavaScript` çº¿ç¨‹ä¸Šçš„æ‰å¸§æ‰€å½±å“

* åŒæ ·ï¼Œå½“ `JavaScript` çº¿ç¨‹å¡ä½çš„æ—¶å€™

* ä½ ä»ç„¶å¯ä»¥æ¬¢å¿«çš„ä¸Šä¸‹æ»šåŠ¨ `ScrollView`

  * å› ä¸º `ScrollView` è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¹‹ä¸Š

### æ€§èƒ½é—®é¢˜çš„å¸¸è§åŸå› 

#### å¼€å‘æ¨¡å¼ ( `dev=true` )

> `JavaScript` çº¿ç¨‹çš„æ€§èƒ½åœ¨å¼€å‘æ¨¡å¼ä¸‹æ˜¯å¾ˆç³Ÿç³•çš„

è¿™æ˜¯ä¸å¯é¿å…çš„ï¼Œå› ä¸ºæœ‰è®¸å¤šå·¥ä½œéœ€è¦åœ¨è¿è¡Œçš„æ—¶å€™å»åšï¼š

* è­¬å¦‚ä½¿ä½ è·å¾—è‰¯å¥½çš„è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯

* åˆæ¯”å¦‚éªŒè¯å±æ€§ç±»å‹ï¼ˆ `propTypes` ï¼‰ä»¥åŠäº§ç”Ÿå„ç§å…¶ä»–çš„è­¦å‘Š

* è¯·åŠ¡å¿…æ³¨æ„åœ¨[ã€ `release` æ¨¡å¼ã€‘](https://reactnative.cn/docs/running-on-device#å‘å¸ƒåº”ç”¨)ä¸‹å»æµ‹è¯•æ€§èƒ½

#### `console.log` è¯­å¥

> åœ¨è¿è¡Œæ‰“å¥½äº†ç¦»çº¿åŒ…çš„åº”ç”¨æ—¶ï¼Œæ§åˆ¶å°æ‰“å°è¯­å¥å¯èƒ½ä¼šæå¤§åœ°æ‹–ç´¯ `JavaScript` çº¿ç¨‹

æ³¨æ„æœ‰äº›ç¬¬ä¸‰æ–¹è°ƒè¯•åº“ä¹Ÿå¯èƒ½åŒ…å«æ§åˆ¶å°æ‰“å°è¯­å¥ï¼Œæ¯”å¦‚ `redux-logger` ï¼Œæ‰€ä»¥åœ¨å‘å¸ƒåº”ç”¨å‰è¯·åŠ¡å¿…ä»”ç»†æ£€æŸ¥ï¼Œç¡®ä¿å…¨éƒ¨ç§»é™¤

> è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§å¯ä»¥åœ¨å‘å¸ƒæ—¶å±è”½æ‰æ‰€æœ‰çš„ `console.*` è°ƒç”¨

`React Native` ä¸­æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ `__DEV__` ç”¨äºæŒ‡ç¤ºå½“å‰è¿è¡Œç¯å¢ƒæ˜¯å¦æ˜¯å¼€å‘ç¯å¢ƒ

* æˆ‘ä»¬å¯ä»¥æ®æ­¤åœ¨æ­£å¼ç¯å¢ƒä¸­æ›¿æ¢æ‰ç³»ç»ŸåŸå…ˆçš„ `console` å®ç°

```jsx
if (!__DEV__) {
  global.console = {
    info: () => {},
    log: () => {},
    warn: () => {},
    debug: () => {},
    error: () => {}
  };
}
```

* è¿™æ ·åœ¨æ‰“åŒ…å‘å¸ƒæ—¶ï¼Œæ‰€æœ‰çš„æ§åˆ¶å°è¯­å¥å°±ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ä¸ºç©ºå‡½æ•°ï¼Œè€Œåœ¨è°ƒè¯•æ—¶å®ƒä»¬ä»ç„¶ä¼šè¢«æ­£å¸¸è°ƒç”¨

è¿˜æœ‰ä¸ª `babel` æ’ä»¶å¯ä»¥å¸®ä½ ç§»é™¤æ‰€æœ‰çš„ `console.*` è°ƒç”¨ï¼š

* é¦–å…ˆéœ€è¦ä½¿ç”¨ `yarn add --dev babel-plugin-transform-remove-console` æ¥å®‰è£…

* ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç¼–è¾‘ï¼ˆæˆ–è€…æ˜¯æ–°å»ºï¼‰ä¸€ä¸ªåä¸º `.babelrc` çš„æ–‡ä»¶

  * åœ¨æ–‡ä»¶ä¸­åŠ å…¥ï¼š

```jsx
{
  "env": {
    "production": {
      "plugins": ["transform-remove-console"]
    }
  }
}
```

* è¿™æ ·åœ¨æ‰“åŒ…å‘å¸ƒæ—¶ï¼Œæ‰€æœ‰çš„æ§åˆ¶å°è¯­å¥å°±ä¼šè¢«è‡ªåŠ¨ç§»é™¤ï¼Œè€Œåœ¨è°ƒè¯•æ—¶å®ƒä»¬ä»ç„¶ä¼šè¢«æ­£å¸¸è°ƒç”¨

#### `ListView`

> åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ç¼“æ…¢æˆ–è€…ç”±äºåˆ—è¡¨å¾ˆå¤§æ—¶å¯¼è‡´æ»‘åŠ¨å¾ˆæ…¢

å¯ç”¨æ–°çš„[ã€ `FlatList` ã€‘](https://reactnative.cn/docs/flatlist)æˆ–è€…[ã€ `SectionList` ã€‘](https://reactnative.cn/docs/sectionlist)ç»„ä»¶æ›¿ä»£ï¼š

* é™¤äº†ç®€åŒ–äº† `API` ï¼Œè¿™äº›æ–°çš„åˆ—è¡¨ç»„ä»¶åœ¨æ€§èƒ½æ–¹é¢éƒ½æœ‰äº†æå¤§çš„æå‡

  * å…¶ä¸­æœ€ä¸»è¦çš„ä¸€ä¸ªæ˜¯æ— è®ºåˆ—è¡¨æœ‰å¤šå°‘è¡Œï¼Œå®ƒçš„å†…å­˜ä½¿ç”¨éƒ½æ˜¯å¸¸æ•°çº§çš„

* å¦‚æœä½ çš„ `FlatList` æ¸²æŸ“å¾—å¾ˆæ…¢

  * è¯·ç¡®ä¿ä½ ä½¿ç”¨äº† `getItemLayout`

  * å®ƒé€šè¿‡è·³è¿‡å¯¹ `items` çš„å¤„ç†æ¥ä¼˜åŒ–ä½ çš„æ¸²æŸ“é€Ÿåº¦

#### é‡ç»˜é¡µé¢

> åœ¨é‡ç»˜ä¸€ä¸ªå‡ ä¹æ²¡æœ‰ä»€ä¹ˆå˜åŒ–çš„é¡µé¢æ—¶ï¼Œ`JavaScript` å¸§ç‡ä¸¥é‡é™ä½

ä½ å¯ä»¥å®ç° `shouldComponentUpdate` å‡½æ•°æ¥æŒ‡æ˜åœ¨ä»€ä¹ˆæ ·çš„ç¡®åˆ‡æ¡ä»¶ä¸‹ï¼Œä½ å¸Œæœ›è¿™ä¸ªç»„ä»¶å¾—åˆ°é‡ç»˜

* å¦‚æœä½ ç¼–å†™çš„æ˜¯çº¯ç²¹çš„ç»„ä»¶ï¼ˆç•Œé¢å®Œå…¨ç”± `props` å’Œ `state` æ‰€å†³å®šï¼‰ï¼Œä½ å¯ä»¥åˆ©ç”¨ `PureComponent` æ¥ä¸ºä½ åšè¿™ä¸ªå·¥ä½œ

* å†å¼ºè°ƒä¸€æ¬¡ï¼Œä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼ˆ `immutable` ï¼Œå³å¯¹äºå¼•ç”¨ç±»å‹æ•°æ®ï¼Œä¸ä¿®æ”¹åŸå€¼ï¼Œè€Œæ˜¯å¤åˆ¶åä¿®æ”¹å¹¶è¿”å›æ–°å€¼ï¼‰åœ¨æé€Ÿæ–¹é¢éå¸¸æœ‰ç”¨

  * å½“ä½ ä¸å¾—ä¸å¯¹ä¸€ä¸ªé•¿åˆ—è¡¨å¯¹è±¡åšä¸€ä¸ªæ·±åº¦çš„æ¯”è¾ƒï¼Œå®ƒä¼šä½¿é‡ç»˜ä½ çš„æ•´ä¸ªç»„ä»¶æ›´åŠ å¿«é€Ÿï¼Œè€Œä¸”ä»£ç é‡æ›´å°‘

#### ç§»åŠ¨è§†å›¾

> åœ¨å±å¹•ä¸Šç§»åŠ¨è§†å›¾ï¼ˆæ»šåŠ¨ï¼Œåˆ‡æ¢ï¼Œæ—‹è½¬ï¼‰æ—¶ï¼Œ`UI` çº¿ç¨‹æ‰å¸§

å½“å…·æœ‰é€æ˜èƒŒæ™¯çš„æ–‡æœ¬ä½äºä¸€å¼ å›¾ç‰‡ä¸Šæ—¶ï¼Œæˆ–è€…åœ¨æ¯å¸§é‡ç»˜è§†å›¾æ—¶éœ€è¦ç”¨åˆ°é€æ˜åˆæˆçš„ä»»ä½•å…¶ä»–æƒ…å†µä¸‹ï¼Œè¿™ç§ç°è±¡å°¤ä¸ºæ˜æ˜¾

* è®¾ç½® `shouldRasterizeIOS` æˆ–è€… `renderToHardwareTextureAndroid` å±æ€§å¯ä»¥æ˜¾è‘—æ”¹å–„è¿™ä¸€ç°è±¡

* æ³¨æ„ï¼šä¸è¦è¿‡åº¦ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œå¦åˆ™ä½ çš„å†…å­˜ä½¿ç”¨é‡å°†ä¼šé£æ¶¨

* åœ¨ä½¿ç”¨æ—¶ï¼Œè¦è¯„ä¼°ä½ çš„æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ

  * å¦‚æœä½ æ²¡æœ‰éœ€è¦ç§»åŠ¨è¿™ä¸ªè§†å›¾çš„éœ€æ±‚ï¼Œè¯·å…³é—­è¿™ä¸€å±æ€§

#### åŠ¨ç”»æ”¹å˜å›¾ç‰‡

> ä½¿ç”¨åŠ¨ç”»æ”¹å˜å›¾ç‰‡çš„å°ºå¯¸æ—¶ï¼Œ`UI` çº¿ç¨‹æ‰å¸§

åœ¨ `iOS` ä¸Šï¼Œæ¯æ¬¡è°ƒæ•´ `Image` ç»„ä»¶çš„å®½åº¦æˆ–è€…é«˜åº¦ï¼Œéƒ½éœ€è¦é‡æ–°è£å‰ªå’Œç¼©æ”¾åŸå§‹å›¾ç‰‡

* è¿™ä¸ªæ“ä½œå¼€é”€ä¼šéå¸¸å¤§ï¼Œå°¤å…¶æ˜¯å¤§çš„å›¾ç‰‡

* æ¯”èµ·ç›´æ¥ä¿®æ”¹å°ºå¯¸ï¼Œæ›´å¥½çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ `transform: [{scale}]` è¿™æ ·ç¼©æ”¾çš„æ ·å¼å±æ€§æ¥æ”¹å˜å°ºå¯¸

  * æ¯”å¦‚å½“ä½ ç‚¹å‡»ä¸€ä¸ªå›¾ç‰‡ï¼Œè¦å°†å®ƒæ”¾å¤§åˆ°å…¨å±çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§

#### `Touchable` ç³»åˆ—ç»„ä»¶

> `Touchable` ç³»åˆ—ç»„ä»¶ä¸èƒ½å¾ˆå¥½çš„å“åº”

æœ‰äº›æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€é¡¹æ“ä½œä¸ç‚¹å‡»äº‹ä»¶æ‰€å¸¦æ¥çš„é€æ˜åº¦æ”¹å˜æˆ–è€…é«˜äº®æ•ˆæœå‘ç”Ÿåœ¨åŒä¸€å¸§ä¸­ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½åœ¨ `onPress` å‡½æ•°ç»“æŸä¹‹å‰æˆ‘ä»¬éƒ½çœ‹ä¸åˆ°è¿™äº›æ•ˆæœ

* æ¯”å¦‚åœ¨ `onPress` æ‰§è¡Œäº†ä¸€ä¸ª `setState` çš„æ“ä½œï¼Œè¿™ä¸ªæ“ä½œéœ€è¦å¤§é‡è®¡ç®—å·¥ä½œå¹¶ä¸”å¯¼è‡´äº†æ‰å¸§

* å¯¹æ­¤çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å°† `onPress` å¤„ç†å‡½æ•°ä¸­çš„æ“ä½œå°è£…åˆ° `requestAnimationFrame` ä¸­ï¼š

```jsx
handleOnPress() {
  // è°¨è®°åœ¨ä½¿ç”¨requestAnimationFrameã€setTimeoutä»¥åŠsetIntervalæ—¶
  // è¦ä½¿ç”¨TimerMixinï¼ˆå…¶ä½œç”¨æ˜¯åœ¨ç»„ä»¶unmountæ—¶ï¼Œæ¸…é™¤æ‰€æœ‰å®šæ—¶å™¨ï¼‰
  this.requestAnimationFrame(() => {
    this.doExpensiveAction();
  });
}
```

### åˆ†æ

ä½ å¯ä»¥åˆ©ç”¨å†…ç½®çš„åˆ†æå™¨æ¥åŒæ—¶è·å– `JavaScript` çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸­ä»£ç æ‰§è¡Œæƒ…å†µçš„è¯¦ç»†ä¿¡æ¯

* å¯¹äº `iOS` æ¥è¯´ï¼Œ`Instruments` æ˜¯ä¸€ä¸ªå®è´µçš„å·¥å…·åº“

* å¯¹äº `Android` çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `systrace`

  * å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„ä½¿ç”¨ `systrace` è°ƒè¯• `Android UI` æ€§èƒ½ï¼š

    * é¦–å…ˆï¼Œç¡®ä¿å¼€å‘æ¨¡å¼å…³é—­ï¼

    * ä½ åº”è¯¥èƒ½åœ¨åº”ç”¨ç¨‹åºæ—¥å¿—ä¸­çœ‹åˆ° `__DEV__ === false, development-level warning are OFF, performance optimizations are ON`

å¦ä¸€ç§åˆ†æ `javascript` çš„æ–¹æ³•æ˜¯åœ¨è°ƒè¯•æ—¶ä½¿ç”¨chrome profiler

* è¿™ä¸ä¼šç»™æ‚¨å‡†ç¡®çš„ç»“æœï¼Œå› ä¸ºä»£ç æ˜¯åœ¨ `chrome` ä¸­è¿è¡Œçš„ï¼Œä½†ä¼šè®©æ‚¨å¤§è‡´äº†è§£ç“¶é¢ˆå¯èƒ½åœ¨å“ªé‡Œ

* åœ¨ `Chrome` çš„ **`æ€§èƒ½`** é€‰é¡¹å¡ä¸‹è¿è¡Œæ¢æŸ¥å™¨

* ç”¨æˆ·è®¡æ—¶ä¸‹ä¼šå‡ºç°ç«ç„°å›¾

* è¦ä»¥è¡¨æ ¼æ ¼å¼æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å•å‡»ä¸‹é¢çš„è‡ªä¸‹è€Œä¸Šé€‰é¡¹å¡ï¼Œç„¶ååœ¨å·¦ä¸Šè§’èœå•ä¸­é€‰æ‹© `DedicatedWorker` çº¿ç¨‹

[ã€ä½¿ç”¨ `systrace` è°ƒè¯• `Android` UI æ€§èƒ½ã€‘](https://reactnative.cn/docs/performance/#ä½¿ç”¨-systrace-è°ƒè¯•-android-ui-æ€§èƒ½)

![å›¾ç‰‡](https://reactnative.cn/docs/assets/SystraceExample.png)

### æ‹†åŒ…( `RAM bundles` )å’Œå†…è”å¼•ç”¨

> å¦‚æœä½ æœ‰ä¸€ä¸ªè¾ƒä¸ºåºå¤§çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½è¦è€ƒè™‘ä½¿ç”¨ `RAM` ( `Random Access Modules` ï¼Œéšæœºå­˜å–æ¨¡å—ï¼‰æ ¼å¼çš„ `bundle` å’Œå†…è”å¼•ç”¨

è¿™å¯¹äºå…·æœ‰å¤§é‡é¡µé¢çš„åº”ç”¨ç¨‹åºæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œè¿™äº›é¡µé¢åœ¨åº”ç”¨ç¨‹åºçš„å…¸å‹ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¸ä¼šè¢«æ‰“å¼€

* é€šå¸¸å¯¹äºå¯åŠ¨åä¸€æ®µæ—¶é—´å†…ä¸éœ€è¦å¤§é‡ä»£ç çš„åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„

* ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºåŒ…å«å¤æ‚çš„é…ç½®æ–‡ä»¶å±å¹•æˆ–è¾ƒå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä½†å¤§å¤šæ•°ä¼šè¯åªæ¶‰åŠè®¿é—®åº”ç”¨ç¨‹åºçš„ä¸»å±å¹•æ›´æ–°

* æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ `RAM` æ ¼å¼æ¥ä¼˜åŒ– `bundle` çš„åŠ è½½ï¼Œå¹¶ä¸”å†…è”å¼•ç”¨è¿™äº›åŠŸèƒ½å’Œé¡µé¢ï¼ˆå½“å®ƒä»¬è¢«å®é™…ä½¿ç”¨æ—¶ï¼‰

#### åŠ è½½ `JavaScript`

> åœ¨ `react-native` æ‰§è¡Œ `JavaScript` ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å°†ä»£ç åŠ è½½åˆ°å†…å­˜ä¸­å¹¶è¿›è¡Œè§£æ

å¦‚æœä½ åŠ è½½äº†ä¸€ä¸ª `50MB` çš„ `bundle` ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ `50mb` éƒ½å¿…é¡»è¢«åŠ è½½å’Œè§£ææ‰èƒ½è¢«æ‰§è¡Œ

* RAM æ ¼å¼çš„ bundle åˆ™å¯¹æ­¤è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå³ï¼š

  * å¯åŠ¨æ—¶åªåŠ è½½ 50MB ä¸­å®é™…éœ€è¦çš„éƒ¨åˆ†

  * ä¹‹åå†é€æ¸æŒ‰éœ€åŠ è½½æ›´å¤šçš„åŒ…

#### å†…è”å¼•ç”¨

> å†…è”å¼•ç”¨( `require` ä»£æ›¿ `import` )å¯ä»¥å»¶è¿Ÿæ¨¡å—æˆ–æ–‡ä»¶çš„åŠ è½½ï¼Œç›´åˆ°å®é™…éœ€è¦è¯¥æ–‡ä»¶

ä¸€ä¸ªåŸºæœ¬çš„ä¾‹å­çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

* ä¼˜åŒ–å‰

  ```jsx
  import React, { Component } from 'react';
  import { Text } from 'react-native';
  // ... import some very expensive modules

  // You may want to log at the file level to verify when this is happening - æ‚¨å¯èƒ½å¸Œæœ›åœ¨æ–‡ä»¶çº§åˆ«è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œä»¥ä¾¿åœ¨å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶è¿›è¡ŒéªŒè¯
  console.log('VeryExpensive component loaded');

  export default class VeryExpensive extends Component {
    // lots and lots of code - å¾ˆå¤šå¾ˆå¤šä»£ç 
    render() {
      return <Text>Very Expensive Component</Text>;
    }
  }
  ```

* ä¼˜åŒ–å

  ```jsx
  import React, { Component } from 'react';
  import { TouchableOpacity, View, Text } from 'react-native';

  let VeryExpensive = null;

  export default class Optimized extends Component {
    state = { needsExpensive: false };

    didPress = () => {
      if (VeryExpensive == null) {
        VeryExpensive = require('./VeryExpensive').default;
      }

      this.setState(() => ({
        needsExpensive: true,
      }));
    };

    render() {
      return (
        <View style={{ marginTop: 20 }}>
          <TouchableOpacity onPress={this.didPress}>
            <Text>Load</Text>
          </TouchableOpacity>
          {this.state.needsExpensive ? <VeryExpensive /> : null}
        </View>
      );
    }
  }
  ```

* å³ä¾¿ä¸ä½¿ç”¨ `RAM` æ ¼å¼ï¼Œå†…è”å¼•ç”¨ä¹Ÿä¼šä½¿å¯åŠ¨æ—¶é—´å‡å°‘

* å› ä¸ºä¼˜åŒ–åçš„ä»£ç åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ `require` æ—¶æ‰ä¼šæ‰§è¡Œ

#### å¯ç”¨ `RAM` æ ¼å¼

* åœ¨ `iOS` ä¸Šä½¿ç”¨ `RAM` æ ¼å¼å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç´¢å¼•æ–‡ä»¶ï¼Œ`React Native` å°†æ ¹æ®æ­¤æ–‡ä»¶ä¸€æ¬¡åŠ è½½ä¸€ä¸ªæ¨¡å—

  * åœ¨ `Xcode` ä¸­å¯ç”¨ `RAM` æ ¼å¼ï¼Œéœ€è¦ç¼–è¾‘ `build phase` é‡Œçš„ `Bundle React Native code and images`

    * åœ¨ `../node_modules/react-native/scripts/react-native-xcode.sh.sh` ä¸­æ·»åŠ  `export BUNDLE_COMMAND="ram-bundle"` :

      ```jsx
      export BUNDLE_COMMAND="ram-bundle"
      export NODE_BINARY=node
      ../node_modules/react-native/scripts/react-native-xcode.sh.sh
      ```

* åœ¨ `Android` ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºä¸€ç»„æ–‡ä»¶

  * ä½ å¯ä»¥åƒ `iOS` ä¸€æ ·ï¼Œå¼ºåˆ¶ `Android` åªåˆ›å»ºä¸€ä¸ªæ–‡ä»¶

  * ä½†ä½¿ç”¨å¤šä¸ªæ–‡ä»¶å¯ä»¥æé«˜æ€§èƒ½ï¼Œå¹¶é™ä½å†…å­˜å ç”¨

  * åœ¨ `Android` ä¸Šå¯ç”¨ `RAM` æ ¼å¼ï¼Œéœ€è¦ç¼–è¾‘ `android/app/build.gradle` æ–‡ä»¶

    * åœ¨ `apply from: "../../node_modules/react-native/react.gradle"` ä¹‹å‰ä¿®æ”¹æˆ–æ·»åŠ  `project.ext.react` ï¼š

      ```jsx
      project.ext.react = [
        bundleCommand: "ram-bundle",
      ]
      ```

  * å¦‚æœåœ¨ `Android` ä¸Šï¼Œä½ æƒ³ä½¿ç”¨å•ä¸ªç´¢å¼•æ–‡ä»¶ï¼ˆå¦‚å‰æ‰€è¿°ï¼‰ï¼Œè¯·åœ¨ `Android` ä¸Šä½¿ç”¨ä»¥ä¸‹è¡Œï¼š

  ```jsx
  project.ext.react = [
    bundleCommand: "ram-bundle",
    extraPackagerArgs: ["--indexed-ram-bundle"]
  ]
  ```

#### é…ç½®é¢„åŠ è½½åŠå†…è”å¼•ç”¨

ç°åœ¨æˆ‘ä»¬å·²ç»å¯ç”¨äº† `RAM` æ ¼å¼ï¼Œç„¶è€Œè°ƒç”¨ `require` ä¼šé€ æˆé¢å¤–çš„å¼€é”€

* å› ä¸ºå½“é‡åˆ°å°šæœªåŠ è½½çš„æ¨¡å—æ—¶ï¼Œ`require` éœ€è¦é€šè¿‡ `bridge` æ¥å‘é€æ¶ˆæ¯

  * è¿™ä¸»è¦ä¼šå½±å“åˆ°å¯åŠ¨é€Ÿåº¦ï¼Œå› ä¸ºåœ¨åº”ç”¨ç¨‹åºåŠ è½½åˆå§‹æ¨¡å—æ—¶å¯èƒ½è§¦å‘ç›¸å½“å¤§é‡çš„è¯·æ±‚è°ƒç”¨

* å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸€éƒ¨åˆ†æ¨¡å—è¿›è¡Œé¢„åŠ è½½

  * ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°†éœ€è¦å®ç°æŸç§å½¢å¼çš„å†…è”å¼•ç”¨

#### æ·»åŠ  `packager` é…ç½®æ–‡ä»¶

> åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `packager` çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåä¸º `config.js` çš„æ–‡ä»¶

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
const config = {
  transformer: {
    getTransformOptions: () => {
      return {
        transform: { inlineRequires: true },
      };
    },
  },
};

module.exports = config;
```

* åœ¨ `Xcode` çš„ `Build phase` ä¸­æ·»åŠ  `export BUNDLE_CONFIG="packager/config.js"`

```jsx
export BUNDLE_COMMAND="ram-bundle"
export BUNDLE_CONFIG="packager/config.js"
export NODE_BINARY=node
../node_modules/react-native/scripts/react-native-xcode.sh.sh
```

* ç¼–è¾‘ `android/app/build.gradle` æ–‡ä»¶ï¼Œæ·»åŠ  `bundleConfig: "packager/config.js"`

```jsx
project.ext.react = [
  bundleCommand: "ram-bundle",
  bundleConfig: "packager/config.js"
]
```

* æœ€åï¼Œåœ¨ `package.json` çš„ `scripts` ä¸‹ä¿®æ”¹ `start` å‘½ä»¤æ¥å¯ç”¨é…ç½®æ–‡ä»¶ï¼š

```jsx
"start": "node node_modules/react-native/local-cli/cli.js start --config ../../../../packager/config.js"
```

* æ­¤æ—¶ç”¨ `npm start` å¯åŠ¨ä½ çš„ `packager` æœåŠ¡å³ä¼šåŠ è½½é…ç½®æ–‡ä»¶

> è¯·æ³¨æ„ï¼šå¦‚æœä½ ä»ç„¶é€šè¿‡ `xcode` æˆ–æ˜¯ `react-native run-android` ç­‰æ–¹å¼è‡ªåŠ¨å¯åŠ¨ `packager` æœåŠ¡ï¼Œåˆ™ç”±äºæ²¡æœ‰ä½¿ç”¨ä¸Šé¢çš„å‚æ•°ï¼Œä¸ä¼šåŠ è½½é…ç½®æ–‡ä»¶

#### è°ƒè¯•é¢„åŠ è½½çš„æ¨¡å—

åœ¨æ‚¨çš„æ ¹æ–‡ä»¶ `index.(ios|android).js` ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨åˆå§‹å¯¼å…¥ `initial imports` ä¹‹åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
const modules = require.getModules();
const moduleIds = Object.keys(modules);
const loadedModuleNames = moduleIds
  .filter(moduleId => modules[moduleId].isInitialized)
  .map(moduleId => modules[moduleId].verboseName);
const waitingModuleNames = moduleIds
  .filter(moduleId => !modules[moduleId].isInitialized)
  .map(moduleId => modules[moduleId].verboseName);

// make sure that the modules you expect to be waiting are actually waiting
console.log(
  'loaded:',
  loadedModuleNames.length,
  'waiting:',
  waitingModuleNames.length
);

// grab this text blob, and put it in a file named packager/modulePaths.js
console.log(`module.exports = ${JSON.stringify(loadedModuleNames.sort())};`);
```

* å½“ä½ è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥æŸ¥çœ‹ `console` æ§åˆ¶å°ï¼Œæœ‰å¤šå°‘æ¨¡å—å·²ç»åŠ è½½ï¼Œæœ‰å¤šå°‘æ¨¡å—åœ¨ç­‰å¾…

* ä½ å¯èƒ½æƒ³æŸ¥çœ‹ `moduleNames` ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½•æ„å¤–

> æ³¨æ„ï¼šåœ¨é¦–æ¬¡ `import` æ—¶è°ƒç”¨çš„å†…è”å¼•ç”¨

* ä½ å¯èƒ½éœ€è¦æ£€æŸ¥å’Œé‡æ„ï¼Œä»¥ç¡®ä¿åªæœ‰ä½ æƒ³è¦çš„æ¨¡å—åœ¨å¯åŠ¨æ—¶åŠ è½½

æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ `Systrace` å¯¹è±¡ï¼Œä»¥å¸®åŠ©è°ƒè¯•æœ‰é—®é¢˜çš„å¼•ç”¨ï¼š

```jsx
require.Systrace.beginEvent = (message) => {
  if(message.includes(problematicModule)) {
    throw new Error();
  }
}
```

* è™½ç„¶æ¯ä¸ª `App` å„æœ‰ä¸åŒï¼Œä½†åªåŠ è½½ç¬¬ä¸€ä¸ªé¡µé¢æ‰€éœ€çš„æ¨¡å—æ˜¯æœ‰æ™®é€‚æ„ä¹‰çš„

* å½“ä½ æ»¡æ„æ—¶ï¼ŒæŠŠ `loadedModuleNames` çš„è¾“å‡ºæ”¾åˆ° `packager/modulePaths.js` æ–‡ä»¶ä¸­

#### æ›´æ–°é…ç½®æ–‡ä»¶

è¿”å› `packager/config.js` ï¼Œæˆ‘ä»¬åº”è¯¥æ›´æ–°å®ƒä»¥ä½¿ç”¨æ–°ç”Ÿæˆçš„ `modulePaths.js` æ–‡ä»¶

```jsx
const modulePaths = require('./modulePaths');
const resolve = require('path').resolve;
const fs = require('fs');

// Update the following line if the root folder of your app is somewhere else.
const ROOT_FOLDER = resolve(__dirname, '..');

const config = {
  transformer: {
    getTransformOptions: () => {
      const moduleMap = {};
      modulePaths.forEach(path => {
        if (fs.existsSync(path)) {
          moduleMap[resolve(path)] = true;
        }
      });
      return {
        preloadedModules: moduleMap,
        transform: { inlineRequires: { blacklist: moduleMap } },
      };
    },
  },
  projectRoot: ROOT_FOLDER,
};

module.exports = config;
```

* åœ¨å¯ç”¨ `RAM` æ ¼å¼ä¹‹åï¼Œé…ç½®æ–‡ä»¶ä¸­çš„ `preloadedModules` æ¡ç›®æŒ‡ç¤ºå“ªäº›æ¨¡å—éœ€è¦é¢„åŠ è½½

* å½“ `bundle` è¢«åŠ è½½æ—¶ï¼Œè¿™äº›æ¨¡å—ç«‹å³è¢«åŠ è½½ï¼Œç”šè‡³åœ¨ä»»ä½• `requires` æ‰§è¡Œä¹‹å‰

* `blacklist` è¡¨æ˜è¿™äº›æ¨¡å—ä¸åº”è¯¥è¢«è¦æ±‚å†…è”å¼•ç”¨ï¼Œå› ä¸ºå®ƒä»¬æ˜¯é¢„åŠ è½½çš„ï¼Œæ‰€ä»¥ä½¿ç”¨å†…è”æ²¡æœ‰æ€§èƒ½ä¼˜åŠ¿

  * å®é™…ä¸Šæ¯æ¬¡è§£æå†…è”å¼•ç”¨ `JavaScript` éƒ½ä¼šèŠ±è´¹é¢å¤–çš„æ—¶é—´

#### æµ‹è¯•å’Œè¡¡é‡æ”¹è¿›

> æ‚¨ç°åœ¨åº”è¯¥å‡†å¤‡å¥½ä½¿ç”¨ `RAM` æ ¼å¼å’Œå†…è”å¼•ç”¨æ¥æ„å»ºæ‚¨çš„åº”ç”¨äº†

ä¿å­˜å¯åŠ¨å‰åçš„æ—¶é—´ï¼Œæ¥æµ‹è¯•ä¸‹æœ‰å¤šå°‘æ”¹è¿›å§ï¼

## æ‰‹åŠ¿å“åº”ç³»ç»Ÿ

> ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ‰‹åŠ¿è¯†åˆ«è¦æ¯”åœ¨ web ä¸Šå¤æ‚å¾—å¤š

ç”¨æˆ·çš„ä¸€æ¬¡è§¦æ‘¸æ“ä½œçš„çœŸå®æ„å›¾æ˜¯ä»€ä¹ˆï¼Œ`App` è¦ç»è¿‡å¥½å‡ ä¸ªé˜¶æ®µæ‰èƒ½åˆ¤æ–­

* æ¯”å¦‚ `App` éœ€è¦åˆ¤æ–­ç”¨æˆ·çš„è§¦æ‘¸åˆ°åº•æ˜¯åœ¨æ»šåŠ¨é¡µé¢ï¼Œè¿˜æ˜¯æ»‘åŠ¨ä¸€ä¸ª `widget` ï¼Œæˆ–è€…åªæ˜¯ä¸€ä¸ªå•çº¯çš„ç‚¹å‡»

* ç”šè‡³éšç€æŒç»­æ—¶é—´çš„ä¸åŒï¼Œè¿™äº›æ“ä½œè¿˜ä¼šè½¬åŒ–

* æ­¤å¤–ï¼Œè¿˜æœ‰å¤šç‚¹åŒæ—¶è§¦æ§çš„æƒ…å†µ

æ‰‹åŠ¿å“åº”ç³»ç»Ÿå¯ä»¥ä½¿ç»„ä»¶åœ¨ä¸å…³å¿ƒçˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶çš„å‰æä¸‹è‡ªè¡Œå¤„ç†è§¦æ‘¸äº¤äº’

### æœ€ä½³å®è·µ

> ç”¨æˆ·ä¹‹æ‰€ä»¥ä¼šè§‰å¾— `web app` å’ŒåŸç”Ÿ `app` åœ¨ä½“éªŒä¸Šæœ‰å·¨å¤§çš„å·®å¼‚ï¼Œè§¦æ‘¸å“åº”æ˜¯ä¸€å¤§å…³é”®å› ç´ 

ç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œéƒ½åº”è¯¥å…·æœ‰ä¸‹åˆ—å±æ€§ï¼š

* `åé¦ˆ/é«˜äº®`

  è®©ç”¨æˆ·çœ‹åˆ°ä»–ä»¬åˆ°åº•æŒ‰åˆ°äº†ä»€ä¹ˆä¸œè¥¿ï¼Œä»¥åŠæ¾å¼€æ‰‹åä¼šå‘ç”Ÿä»€ä¹ˆ

* `å–æ¶ˆåŠŸèƒ½`

  å½“ç”¨æˆ·æ­£åœ¨è§¦æ‘¸æ“ä½œæ—¶ï¼Œåº”è¯¥æ˜¯å¯ä»¥é€šè¿‡æŠŠæ‰‹æŒ‡ç§»å¼€æ¥ç»ˆæ­¢æ“ä½œ

> è¿™äº›ç‰¹æ€§ä½¿å¾—ç”¨æˆ·åœ¨ä½¿ç”¨ `App` æ—¶ä½“éªŒæ›´å¥½ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è®©ç”¨æˆ·å¤§èƒ†è¯•ç”¨ï¼Œè€Œä¸å¿…æ‹…å¿ƒç‚¹é”™äº†ä»€ä¹ˆ

### `TouchableHighlight` ä¸ `Touchable` ç³»åˆ—ç»„ä»¶

> å“åº”ç³»ç»Ÿç”¨èµ·æ¥å¯èƒ½æ¯”è¾ƒå¤æ‚

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæŠ½è±¡çš„ `Touchable` å®ç°ï¼Œç”¨æ¥åš `å¯è§¦æ§` çš„ç»„ä»¶

* è¿™ä¸€å®ç°åˆ©ç”¨äº†å“åº”ç³»ç»Ÿï¼Œä½¿å¾—ä½ å¯ä»¥ç®€å•åœ°ä»¥å£°æ˜çš„æ–¹å¼æ¥é…ç½®è§¦æ§å¤„ç†

* å¦‚æœè¦åšä¸€ä¸ªæŒ‰é’®æˆ–è€…ç½‘é¡µé“¾æ¥ï¼Œé‚£ä¹ˆä½¿ç”¨ `TouchableHighlight` å°±å¯ä»¥

### å“åº”è€…çš„ç”Ÿå‘½å‘¨æœŸ

ä¸€ä¸ª `View` åªè¦å®ç°äº†æ­£ç¡®çš„åå•†æ–¹æ³•ï¼Œå°±å¯ä»¥æˆä¸ºè§¦æ‘¸äº‹ä»¶çš„å“åº”è€…

* æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªæ–¹æ³•å» `è¯¢é—®` ä¸€ä¸ª `View` æ˜¯å¦æ„¿æ„æˆä¸ºå“åº”è€…ï¼š

  * `View.props.onStartShouldSetResponder: (evt) => true`

    * åœ¨ç”¨æˆ·å¼€å§‹è§¦æ‘¸çš„æ—¶å€™ï¼ˆæ‰‹æŒ‡åˆšåˆšæ¥è§¦å±å¹•çš„ç¬é—´ï¼‰ï¼Œæ˜¯å¦æ„¿æ„æˆä¸ºå“åº”è€…ï¼Ÿ

  * `View.props.onMoveShouldSetResponder: (evt) => true`

    å¦‚æœ `View` ä¸æ˜¯å“åº”è€…

    * é‚£ä¹ˆåœ¨æ¯ä¸€ä¸ªè§¦æ‘¸ç‚¹å¼€å§‹ç§»åŠ¨ï¼ˆæ²¡æœ‰åœä¸‹ä¹Ÿæ²¡æœ‰ç¦»å¼€å±å¹•ï¼‰æ—¶å†è¯¢é—®ä¸€æ¬¡ï¼šæ˜¯å¦æ„¿æ„å“åº”è§¦æ‘¸äº¤äº’å‘¢ï¼Ÿ

* å¦‚æœ `View` è¿”å› `true` ï¼Œå¹¶å¼€å§‹å°è¯•æˆä¸ºå“åº”è€…ï¼Œé‚£ä¹ˆä¼šè§¦å‘ä¸‹åˆ—äº‹ä»¶ä¹‹ä¸€ï¼š

  * `View.props.onResponderGrant: (evt) => {}`

    * `View` ç°åœ¨è¦å¼€å§‹å“åº”è§¦æ‘¸äº‹ä»¶äº†

    * è¿™ä¹Ÿæ˜¯éœ€è¦åšé«˜äº®çš„æ—¶å€™ï¼Œä½¿ç”¨æˆ·çŸ¥é“ä»–åˆ°åº•ç‚¹åˆ°äº†å“ªé‡Œ

  * `View.props.onResponderReject: (evt) => {}`

    * å“åº”è€…ç°åœ¨ `å¦æœ‰å…¶äºº` è€Œä¸”æš‚æ—¶ä¸ä¼š `æ”¾æƒ`

    * è¯·å¦ä½œå®‰æ’

* å¦‚æœ `View` å·²ç»å¼€å§‹å“åº”è§¦æ‘¸äº‹ä»¶äº†ï¼Œé‚£ä¹ˆä¸‹åˆ—è¿™äº›å¤„ç†å‡½æ•°ä¼šè¢«ä¸€ä¸€è°ƒç”¨ï¼š

  * `View.props.onResponderMove: (evt) => {}`

    * ç”¨æˆ·æ­£åœ¨å±å¹•ä¸Šç§»åŠ¨æ‰‹æŒ‡æ—¶ï¼ˆæ²¡æœ‰åœä¸‹ä¹Ÿæ²¡æœ‰ç¦»å¼€å±å¹•ï¼‰

  * `View.props.onResponderRelease: (evt) => {}`

    * è§¦æ‘¸æ“ä½œç»“æŸæ—¶è§¦å‘

    * æ¯”å¦‚ `touchUp` ï¼ˆæ‰‹æŒ‡æŠ¬èµ·ç¦»å¼€å±å¹•ï¼‰

  * `View.props.onResponderTerminationRequest: (evt) => true`

    * æœ‰å…¶ä»–ç»„ä»¶è¯·æ±‚æ¥æ›¿å“åº”è€…

    * å½“å‰çš„ `View` æ˜¯å¦ `æ”¾æƒ` ï¼Ÿ

    * è¿”å› `true` çš„è¯åˆ™é‡Šæ”¾å“åº”è€…æƒåŠ›

  * `View.props.onResponderTerminate: (evt) => {}`

    * å“åº”è€…æƒåŠ›å·²ç»äº¤å‡º

    * è¿™å¯èƒ½æ˜¯ç”±äºå…¶ä»– `View` é€šè¿‡ `onResponderTerminationRequest` è¯·æ±‚çš„

    * å¯èƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿå¼ºåˆ¶å¤ºæƒï¼ˆæ¯”å¦‚ `iOS` ä¸Šçš„æ§åˆ¶ä¸­å¿ƒæˆ–æ˜¯é€šçŸ¥ä¸­å¿ƒï¼‰

#### `evt` æ˜¯ä¸€ä¸ªåˆæˆäº‹ä»¶

å®ƒåŒ…å«ä¸€ä¸ª `nativeEvent` å¯¹è±¡åŠå…¶ä»–å¯¹è±¡ï¼Œ`nativeEvent` å¯¹è±¡ç”±ä»¥ä¸‹ç»“æ„ç»„æˆï¼š

* `changedTouches`

  åœ¨ä¸Šä¸€æ¬¡äº‹ä»¶ä¹‹åï¼Œæ‰€æœ‰å‘ç”Ÿå˜åŒ–çš„è§¦æ‘¸äº‹ä»¶çš„æ•°ç»„é›†åˆ

  å³ä¸Šä¸€æ¬¡äº‹ä»¶åï¼Œæ‰€æœ‰ç§»åŠ¨è¿‡çš„è§¦æ‘¸ç‚¹

* `identifier`

  è§¦æ‘¸ç‚¹çš„ `ID`

* `locationX`

  è§¦æ‘¸ç‚¹ç›¸å¯¹äºå½“å‰å…ƒç´ çš„æ¨ªåæ ‡

* `locationY`

  è§¦æ‘¸ç‚¹ç›¸å¯¹äºå½“å‰å…ƒç´ çš„çºµåæ ‡

* `pageX`

  è§¦æ‘¸ç‚¹ç›¸å¯¹äºæ ¹å…ƒç´ çš„æ¨ªåæ ‡

* `pageY`

  è§¦æ‘¸ç‚¹ç›¸å¯¹äºæ ¹å…ƒç´ çš„çºµåæ ‡

* `target`

  è§¦æ‘¸ç‚¹æ‰€åœ¨çš„å…ƒç´  `ID`

* `timestamp`

  è§¦æ‘¸äº‹ä»¶çš„æ—¶é—´æˆ³ï¼Œå¯ç”¨äºç§»åŠ¨é€Ÿåº¦çš„è®¡ç®—

* `touches`

  å½“å‰å±å¹•ä¸Šçš„æ‰€æœ‰è§¦æ‘¸ç‚¹çš„é›†åˆ

### æ•è· `ShouldSet` äº‹ä»¶å¤„ç†

è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ä»¥å†’æ³¡çš„å½¢å¼è°ƒç”¨çš„ï¼Œå³åµŒå¥—æœ€æ·±çš„èŠ‚ç‚¹æœ€å…ˆè°ƒç”¨ï¼š

* `onStartShouldSetResponder`

* `onMoveShouldSetResponder`

è¿™æ„å‘³ç€å½“å¤šä¸ª `View` åŒæ—¶åœ¨ `*ShouldSetResponder` ä¸­è¿”å› `true` æ—¶ï¼Œæœ€åº•å±‚çš„ `View` å°†ä¼˜å…ˆ `å¤ºæƒ`

* åœ¨å¤šæ•°æƒ…å†µä¸‹è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ç¡®ä¿æ‰€æœ‰æ§ä»¶å’ŒæŒ‰é’®æ˜¯å¯ç”¨çš„

* ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼ŒæŸä¸ªçˆ¶ `View` ä¼šå¸Œæœ›èƒ½å…ˆæˆä¸ºå“åº”è€…

  * æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `æ•è·æœŸ` æ¥è§£å†³è¿™ä¸€éœ€æ±‚

  * å“åº”ç³»ç»Ÿåœ¨ä»æœ€åº•å±‚çš„ç»„ä»¶å¼€å§‹å†’æ³¡ä¹‹å‰ï¼Œä¼šé¦–å…ˆæ‰§è¡Œä¸€ä¸ª `æ•è·æœŸ` ï¼Œåœ¨æ­¤æœŸé—´ä¼šè§¦å‘ `on*ShouldSetResponderCapture` ç³»åˆ—äº‹ä»¶

* å› æ­¤ï¼Œå¦‚æœæŸä¸ªçˆ¶ `View` æƒ³è¦åœ¨è§¦æ‘¸æ“ä½œå¼€å§‹æ—¶é˜»æ­¢å­ç»„ä»¶æˆä¸ºå“åº”è€…ï¼Œé‚£å°±åº”è¯¥å¤„ç† `onStartShouldSetResponderCapture` äº‹ä»¶å¹¶è¿”å› `true` å€¼

  * `View.props.onStartShouldSetResponderCapture: (evt) => true`

  * `View.props.onMoveShouldSetResponderCapture: (evt) => true`

### `PanResponder` ç±»

è¦ä½¿ç”¨æ›´é«˜çº§çš„æ‰‹åŠ¿åŠŸèƒ½ï¼Œè¯·å‚çœ‹[ã€ `PanResponder` ã€‘](https://reactnative.cn/docs/panresponder/)

## `JavaScript` ç¯å¢ƒ

### `JavaScript` è¿è¡Œæ—¶çš„ç¯å¢ƒ

åœ¨ä½¿ç”¨ `React Native` æ—¶ï¼Œä½ çš„ `JavaScript` ä»£ç å°†ä¼šè¿è¡Œåœ¨ä¸¤ä¸ªä¸åŒçš„ç¯å¢ƒä¸Šï¼š

* å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`React Native` ä½¿ç”¨çš„æ˜¯ `JavaScriptCore` ï¼Œä¹Ÿå°±æ˜¯ `Safari` æ‰€ä½¿ç”¨çš„ `JavaScript` å¼•æ“

  * ä½†æ˜¯åœ¨ `iOS` ä¸Š[ã€ `JavaScriptCore` ã€‘](http://trac.webkit.org/wiki/JavaScriptCore)å¹¶æ²¡æœ‰ä½¿ç”¨å³æ—¶ç¼–è¯‘æŠ€æœ¯ï¼ˆ `JIT` ï¼‰

  * å› ä¸ºåœ¨ `iOS` ä¸­åº”ç”¨æ— æƒæ‹¥æœ‰å¯å†™å¯æ‰§è¡Œçš„å†…å­˜é¡µï¼ˆå› æ­¤æ— æ³•åŠ¨æ€ç”Ÿæˆä»£ç ï¼‰

* åœ¨ä½¿ç”¨ `Chrome` è°ƒè¯•æ—¶ï¼Œæ‰€æœ‰çš„ `JavaScript` ä»£ç éƒ½è¿è¡Œåœ¨ `Chrome` ä¸­ï¼Œå¹¶ä¸”é€šè¿‡ `WebSocket` ä¸åŸç”Ÿä»£ç é€šä¿¡

  * æ­¤æ—¶çš„è¿è¡Œç¯å¢ƒæ˜¯[ã€ `V8` å¼•æ“ã€‘](https://code.google.com/p/v8/)

* è™½ç„¶ä¸¤ä¸ªç¯å¢ƒéå¸¸ç±»ä¼¼ï¼Œä½†å¼€å‘è€…è¿˜æ˜¯å¯èƒ½ç¢°åˆ°ä¸€äº›ä¸ä¸€è‡´çš„åœ°æ–¹

  * æœªæ¥æˆ‘ä»¬å¾ˆå¯èƒ½ä¼šå°è¯•ä¸€äº›å…¶ä»–çš„ `JavaScript` å¼•æ“ï¼Œæ‰€ä»¥è¯·å°½é‡é¿å…ä½¿ç”¨ä¾èµ–äºç‰¹å®šè¿è¡Œç¯å¢ƒçš„ä»£ç 

* å¸¸è§çš„ä¸ä¸€è‡´æ¯”å¦‚æœ‰ï¼š

  * `iOS` ä¸Šæœ‰éƒ¨åˆ†æ—¥æœŸæ„é€ å‡½æ•°æœªå®ç°

  * `Android` ä¸Šé‡å¤å®šä¹‰çš„ `props` å¯èƒ½ä¼šå¯¼è‡´æŠ¥é”™

### `JavaScript` è¯­æ³•è½¬æ¢å™¨

> è¯­æ³•è½¬æ¢å™¨å¯ä»¥ä½¿ç¼–å†™ä»£ç çš„è¿‡ç¨‹æ›´åŠ äº«å—ï¼Œå› ä¸ºå¼€å‘è€…å¯ä»¥å€ŸåŠ©è½¬æ¢å™¨ç›´æ¥ä½¿ç”¨æ–°çš„ `JavaScirpt` è¯­æ³•æ ‡å‡†ï¼Œè€Œæ— éœ€ç­‰å¾… `JavaScirpt` è§£é‡Šå™¨çš„æ”¯æŒ

`React Native` å†…ç½®äº†[ã€ `Babel` è½¬æ¢å™¨ã€‘](https://babeljs.io/)

* ä½ å¯ä»¥æŸ¥çœ‹[ã€ `Babel` çš„æ–‡æ¡£ã€‘](https://babeljs.io/docs/plugins/#transform-plugins)æ¥äº†è§£æœ‰å…³å®ƒå¯ä»¥è½¬æ¢çš„è¯­æ³•çš„è¯¦æƒ…

* åœ¨[ã€ `metro-react-native-babel-preset` ã€‘](https://github.com/facebook/metro/tree/master/packages/metro-react-native-babel-preset)ä¸­å¯ä»¥çœ‹åˆ°ç›®å‰ `React Native` é»˜è®¤å¼€å¯çš„è¯­æ³•è½¬æ¢ç‰¹æ€§

  > æ³¨ï¼šè‹¥æƒ³å­¦ä¹ ç›¸å…³è¯­æ³•ï¼Œè¯‘è€…æ¨èé˜®ä¸€å³°è€å¸ˆçš„[ ã€ŠECMAScript 6 å…¥é—¨ã€‹ ](http://es6.ruanyifeng.com/)ä»¥åŠè®ºå›çš„[ã€è®¨è®ºå¸–ã€‘](http://bbs.reactnative.cn/topic/15)

* `ES5`

  * ä¿ç•™å…³é”®å­—: `promise.catch(function() { })`;

* `ES6`

  * [ã€äº†è§£æ›´å¤šå¯ç‚¹å‡»å‰å¾€å®˜æ–¹æ–‡æ¡£ã€‘](https://reactnative.cn/docs/javascript-environment/#javascript-è¯­æ³•è½¬æ¢å™¨)

### æ¥å£å…¼å®¹ `Polyfills`

è®¸å¤šæ ‡å‡†åŠŸèƒ½ä¹Ÿéƒ½åœ¨æ”¯æŒçš„ `JavaScript` è¿è¡Œç¯å¢ƒä¸Šåšäº†å…¼å®¹æ”¯æŒ

* æµè§ˆå™¨

  * `console.{log, warn, error, info, trace, table, group, groupEnd}`
  * `CommonJS require`
  * `XMLHttpRequest, fetch`
  * `{set, clear}{Timeout, Interval, Immediate}, {request, cancel}AnimationFrame`
  * `navigator.geolocation`

* `ES6`

  * `Object.assign`
  * `String.prototype.{startsWith, endsWith, repeat, includes}`
  * `Array.from`
  * `Array.prototype.{find, findIndex}`

* `ES7`

  * `Array.prototype.{includes}`

* `ES8`

  * `Object.{entries, values}`

* å…¶ä»–ç‰¹æ€§

  * `__DEV__` ç”¨äºåˆ¤æ–­å½“å‰æ˜¯å¦å¼€å‘ç¯å¢ƒçš„å…¨å±€å˜é‡

## ç›´æ¥æ“ä½œ

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç›´æ¥æ”¹åŠ¨ç»„ä»¶å¹¶è§¦å‘å±€éƒ¨çš„åˆ·æ–°ï¼Œä½†ä¸ä½¿ç”¨ `state` æˆ–æ˜¯ `props`

* è­¬å¦‚åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ `React` åº“ï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦ç›´æ¥ä¿®æ”¹ä¸€ä¸ª `DOM` èŠ‚ç‚¹ï¼Œè€Œåœ¨æ‰‹æœº `App` ä¸­æ“ä½œ `View` æ—¶ä¹Ÿä¼šç¢°åˆ°åŒæ ·çš„æƒ…å†µ

* åœ¨ `React Native` ä¸­ï¼Œ`setNativeProps` å°±æ˜¯ç­‰ä»·äºç›´æ¥æ“ä½œ `DOM` èŠ‚ç‚¹çš„æ–¹æ³•

Qï¼šä»€ä¹ˆæ—¶å€™ä½¿ç”¨ `setNativeProps` å‘¢ï¼Ÿ

Aï¼šåœ¨ï¼ˆä¸å¾—ä¸ï¼‰é¢‘ç¹åˆ·æ–°è€Œåˆé‡åˆ°äº†æ€§èƒ½ç“¶é¢ˆçš„æ—¶å€™

ç›´æ¥æ“ä½œç»„ä»¶å¹¶ä¸æ˜¯åº”è¯¥ç»å¸¸ä½¿ç”¨çš„å·¥å…·

* ä¸€èˆ¬æ¥è¯´åªæ˜¯ç”¨æ¥åˆ›å»ºè¿ç»­çš„åŠ¨ç”»ï¼ŒåŒæ—¶é¿å…æ¸²æŸ“ç»„ä»¶ç»“æ„å’ŒåŒæ­¥å¤ªå¤šè§†å›¾å˜åŒ–æ‰€å¸¦æ¥çš„å¤§é‡å¼€é”€

* `setNativeProps` æ˜¯ä¸€ä¸ª `ç®€å•ç²—æš´` çš„æ–¹æ³•ï¼Œå®ƒç›´æ¥åœ¨åº•å±‚ï¼ˆ `DOM` ã€`UIView` ç­‰ï¼‰è€Œä¸æ˜¯ `React` ç»„ä»¶ä¸­è®°å½• `state` ï¼Œè¿™æ ·ä¼šä½¿ä»£ç é€»è¾‘éš¾ä»¥ç†æ¸…

  * æ‰€ä»¥åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œè¯·å°½é‡å…ˆå°è¯•ç”¨ `setState` å’Œ[ã€ `shouldComponentUpdate` ã€‘](http://facebook.github.io/react/docs/advanced-performance.html#shouldcomponentupdate-in-action)æ–¹æ³•æ¥è§£å†³é—®é¢˜

### `setNativeProps` ä¸ `TouchableOpacity`

[ã€ `TouchableOpacity` ã€‘](https://github.com/facebook/react-native/blob/master/Libraries/Components/Touchable/TouchableOpacity.js)è¿™ä¸ªç»„ä»¶å°±åœ¨å†…éƒ¨ä½¿ç”¨äº† `setNativeProps` æ–¹æ³•æ¥æ›´æ–°å…¶å­ç»„ä»¶çš„é€æ˜åº¦ï¼š

```jsx
setOpacityTo(value) {
  // Redacted: animation related code
  this.refs[CHILD_REF].setNativeProps({
    opacity: value
  });
},
```

* ç”±æ­¤æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š

  * å­ç»„ä»¶å¯ä»¥å“åº”ç‚¹å‡»äº‹ä»¶ï¼Œæ›´æ”¹è‡ªå·±çš„é€æ˜åº¦

  * è€Œå­ç»„ä»¶è‡ªèº«å¹¶ä¸éœ€è¦å¤„ç†è¿™ä»¶äº‹æƒ…ï¼Œä¹Ÿä¸éœ€è¦åœ¨å®ç°ä¸­åšä»»ä½•ä¿®æ”¹

  ```jsx
  <TouchableOpacity onPress={this._handlePress}>
  <View style={styles.button}>
    <Text>Press me!</Text>
  </View>
  </TouchableOpacity>
  ```

* å¦‚æœä¸ä½¿ç”¨ `setNativeProps` æ¥å®ç°è¿™ä¸€éœ€æ±‚ï¼Œé‚£ä¹ˆä¸€ç§å¯èƒ½çš„åŠæ³•æ˜¯æŠŠé€æ˜å€¼ä¿å­˜åˆ° `state` ä¸­ï¼Œç„¶ååœ¨ `onPress` äº‹ä»¶è§¦å‘æ—¶æ›´æ–°è¿™ä¸ªå€¼ï¼š

```jsx
constructor(props) {
  super(props);
  this.state = { myButtonOpacity: 1, };
}

render() {
  return (
    <TouchableOpacity onPress={() => this.setState({myButtonOpacity: 0.5})}
                      onPressOut={() => this.setState({myButtonOpacity: 1})}>
      <View style={[styles.button, {opacity: this.state.myButtonOpacity}]}>
        <Text>Press me!</Text>
      </View>
    </TouchableOpacity>
  )
}
```

* æ¯”èµ·ä¹‹å‰çš„ä¾‹å­ï¼Œè¿™ä¸€åšæ³•ä¼šæ¶ˆè€—å¤§é‡çš„è®¡ç®—ï¼š

  * æ¯ä¸€æ¬¡é€æ˜å€¼å˜æ›´çš„æ—¶å€™ `React` éƒ½è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ç»“æ„

  * å³ä¾¿è§†å›¾çš„å…¶ä»–å±æ€§å’Œå­ç»„ä»¶å¹¶æ²¡æœ‰å˜åŒ–

* ä¸€èˆ¬æ¥è¯´è¿™ä¸€å¼€é”€ä¹Ÿä¸è¶³ä¸ºè™‘ï¼Œä½†å½“æ‰§è¡Œè¿ç»­çš„åŠ¨ç”»ä»¥åŠå“åº”ç”¨æˆ·æ‰‹åŠ¿çš„æ—¶å€™ï¼Œåªæœ‰æ­£ç¡®åœ°ä¼˜åŒ–ç»„ä»¶æ‰èƒ½æé«˜åŠ¨ç”»çš„æµç•…åº¦

å¦‚æœä½ çœ‹è¿‡[ã€ `NativeMethodsMixin` ã€‘](https://github.com/facebook/react-native/blob/master/Libraries/Renderer/oss/ReactNativeRenderer-prod.js)ä¸­çš„ `setNativeProps` æ–¹æ³•çš„å®ç°ï¼Œä½ å°±ä¼šå‘ç°å®ƒå®é™…æ˜¯å¯¹ `RCTUIManager.updateView` çš„å°è£…

* è€Œè¿™æ­£æ˜¯é‡æ¸²æŸ“æ‰€è§¦å‘çš„å‡½æ•°è°ƒç”¨ï¼Œå…·ä½“å¯ä»¥å‚çœ‹[ã€ `ReactNativeBaseComponent.js` ä¸­çš„ `receiveComponent` ã€‘](https://github.com/facebook/react/blob/master/src/renderers/native/ReactNativeBaseComponent.js)

### å¤åˆç»„ä»¶ä¸ `setNativeProps`

> å¤åˆç»„ä»¶å¹¶ä¸æ˜¯å•çº¯çš„ç”±ä¸€ä¸ªåŸç”Ÿè§†å›¾æ„æˆï¼Œæ‰€ä»¥ä½ ä¸èƒ½å¯¹å…¶ç›´æ¥ä½¿ç”¨ `setNativeProps`

æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```jsx
import React from 'react';
import { Text, TouchableOpacity, View } from 'react-native';

class MyButton extends React.Component {
  render() {
    return (
      <View>
        <Text>{this.props.label}</Text>
      </View>
    )
  }
}

export default class App extends React.Component {
  render() {
    return (
      <TouchableOpacity>
        <MyButton label="Press me!" />
      </TouchableOpacity>
    )
  }
}
```

* è·‘è¿™ä¸ªä¾‹å­ä¼šé©¬ä¸Šçœ‹åˆ°ä¸€è¡ŒæŠ¥é”™ï¼š

  * `Touchable child must either be native or forward setNativeProps to a native component`

* è¿™æ˜¯å› ä¸º `MyButton` å¹¶éç›´æ¥ç”±åŸç”Ÿè§†å›¾æ„æˆï¼Œè€Œæˆ‘ä»¬åªèƒ½ç»™åŸç”Ÿè§†å›¾è®¾ç½®é€æ˜å€¼

* ä½ å¯ä»¥å°è¯•è¿™æ ·å»ç†è§£ï¼š

  * å¦‚æœä½ é€šè¿‡ `React.createClass` æ–¹æ³•è‡ªå®šä¹‰äº†ä¸€ä¸ªç»„ä»¶

  * ç›´æ¥ç»™å®ƒè®¾ç½®æ ·å¼ prop æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„

  * ä½ å¾—æŠŠæ ·å¼ `props` å±‚å±‚å‘ä¸‹ä¼ é€’ç»™å­ç»„ä»¶

  * ç›´åˆ°å­ç»„ä»¶æ˜¯ä¸€ä¸ªèƒ½å¤Ÿç›´æ¥å®šä¹‰æ ·å¼çš„åŸç”Ÿç»„ä»¶

* åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æŠŠ `setNativeProps` ä¼ é€’ç»™ç”±åŸç”Ÿç»„ä»¶å°è£…çš„å­ç»„ä»¶

#### å°† `setNativeProps` ä¼ é€’ç»™å­ç»„ä»¶

å…·ä½“è¦åšçš„å°±æ˜¯åœ¨æˆ‘ä»¬çš„è‡ªå®šä¹‰ç»„ä»¶ä¸­å†å°è£…ä¸€ä¸ª `setNativeProps` æ–¹æ³•

* å…¶å†…å®¹ä¸ºå¯¹åˆé€‚çš„å­ç»„ä»¶è°ƒç”¨çœŸæ­£çš„ `setNativeProps` æ–¹æ³•

* å¹¶ä¼ é€’è¦è®¾ç½®çš„å‚æ•°

```jsx
import React from 'react';
import { Text, TouchableOpacity, View } from 'react-native';

class MyButton extends React.Component {
  setNativeProps = (nativeProps) => {
    this._root.setNativeProps(nativeProps);
  }

  render() {
    return (
      <View ref={component => this._root = component} {...this.props}>
        <Text>{this.props.label}</Text>
      </View>
    )
  }
}

export default class App extends React.Component {
  render() {
    return (
      <TouchableOpacity>
        <MyButton label="Press me!" />
      </TouchableOpacity>
    )
  }
}
```

* ç°åœ¨ä½ å¯ä»¥ç”¨ `MyButton` æ¥ä»£æ›¿ `TouchableOpacity` äº†

* æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜ï¼š

  * è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†[ã€ `ref` å›è°ƒè¯­æ³•ã€‘](https://doc.react-china.org/docs/refs-and-the-dom.html)ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„å­—ç¬¦ä¸²å‹ `ref` å¼•ç”¨

* å¯èƒ½è¿˜ä¼šæ³¨æ„åˆ°æˆ‘ä»¬åœ¨å‘ä¸‹ä¼ é€’ `props` æ—¶ä½¿ç”¨äº† `{...this.props}` è¯­æ³•

  * è¿™ä¸€ç”¨æ³•çš„è¯´æ˜è¯·å‚è€ƒ[ã€å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ã€‘](http://es6.ruanyifeng.com/#docs/object)

* è¿™æ˜¯å› ä¸º `TouchableOpacity` æœ¬èº«å…¶å®ä¹Ÿæ˜¯ä¸ªå¤åˆç»„ä»¶

  * å®ƒé™¤äº†è¦æ±‚åœ¨å­ç»„ä»¶ä¸Šæ‰§è¡Œ `setNativeProps` ä»¥å¤–

  * è¿˜è¦æ±‚å­ç»„ä»¶å¯¹è§¦æ‘¸äº‹ä»¶è¿›è¡Œå¤„ç†

* å› æ­¤ï¼Œå®ƒä¼šä¼ é€’å¤šä¸ª `props` ï¼Œå…¶ä¸­åŒ…å«äº†[ã€ `onmoveshouldsetresponder` å‡½æ•°ã€‘](https://reactnative.cn/docs/direct-manipulation/view.html#onmoveshouldsetresponder)

  * è¿™ä¸ªå‡½æ•°éœ€è¦å›è°ƒç»™ `TouchableOpacity` ç»„ä»¶ï¼Œä»¥å®Œæˆè§¦æ‘¸äº‹ä»¶çš„å¤„ç†

* ä¸ä¹‹ç›¸å¯¹çš„æ˜¯ `TouchableHighlight` ç»„ä»¶ï¼Œå®ƒæœ¬èº«æ˜¯ç”±åŸç”Ÿè§†å›¾æ„æˆï¼Œå› è€Œåªéœ€è¦æˆ‘ä»¬å®ç° `setNativeProps`

### `setNativeProps` æ¸…é™¤ `TextInput` çš„å€¼

> `setNativeProps` çš„å¦ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹æ˜¯æ¸…é™¤ `TextInput` çš„å€¼

å½“ç¼“å†²å»¶è¿Ÿå¾ˆä½å¹¶ä¸”ç”¨æˆ·è¾“å…¥å¾ˆå¿«æ—¶ï¼Œå—æ§åˆ¶çš„æ–‡æœ¬è¾“å…¥å±æ€§æœ‰æ—¶ä¼šåˆ é™¤å­—ç¬¦

* æœ‰äº›å¼€å‘äººå‘˜å–œæ¬¢å®Œå…¨è·³è¿‡è¿™ä¸ªå±æ€§ï¼Œè€Œåœ¨å¿…è¦æ—¶ä½¿ç”¨ `setNativeProps` ç›´æ¥æ“ä½œ `textInput` å€¼

* ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†åœ¨ç‚¹å‡»æŒ‰é’®æ—¶æ¸…é™¤è¾“å…¥ï¼š

```jsx
import React from 'react';
import { TextInput, Text, TouchableOpacity, View } from 'react-native';

export default class App extends React.Component {
  clearText = () => {
    this._textInput.setNativeProps({text: ''});
  }

  render() {
    return (
      <View style={{flex: 1}}>
        <TextInput
          ref={component => this._textInput = component}
          style={{height: 50, flex: 1, marginHorizontal: 20, borderWidth: 1, borderColor: '#ccc'}}
        />
        <TouchableOpacity onPress={this.clearText}>
          <Text>Clear text</Text>
        </TouchableOpacity>
      </View>
    );
  }
}
```

### é¿å…å’Œ `render` æ–¹æ³•çš„å†²çª

å¦‚æœè¦æ›´æ–°ä¸€ä¸ªç”± `render` æ–¹æ³•æ¥ç»´æŠ¤çš„å±æ€§ï¼Œåˆ™å¯èƒ½ä¼šç¢°åˆ°ä¸€äº›å‡ºäººæ„æ–™çš„ `bug`

* å› ä¸ºæ¯ä¸€æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“éƒ½å¯èƒ½å¼•èµ·å±æ€§å˜åŒ–

* è¿™æ ·ä¸€æ¥ï¼Œä¹‹å‰é€šè¿‡ `setNativeProps` æ‰€è®¾å®šçš„å€¼å°±è¢«å®Œå…¨å¿½ç•¥å’Œè¦†ç›–æ‰äº†

### `setNativeProps` ä¸ `shouldComponentUpdate`

é€šè¿‡å·§å¦™è¿ç”¨ `shouldComponentUpdate` æ–¹æ³•ï¼š

* å¯ä»¥é¿å…é‡æ–°æ¸²æŸ“é‚£äº›å®é™…æ²¡æœ‰å˜åŒ–çš„å­ç»„ä»¶æ‰€å¸¦æ¥çš„é¢å¤–å¼€é”€

* æ­¤æ—¶ä½¿ç”¨ `setState` çš„æ€§èƒ½å·²ç»å¯ä»¥ä¸ `setNativeProps` ç›¸åª²ç¾äº†

### å…¶ä»– native methods

è¿™é‡Œæè¿°çš„æ–¹æ³•å¯ç”¨äº `react native` æä¾›çš„å¤§å¤šæ•°é»˜è®¤ç»„ä»¶

* ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼š

  * å®ƒä»¬åœ¨æ²¡æœ‰ç›´æ¥ç”±æœ¬æœºè§†å›¾æ”¯æŒçš„å¤åˆç»„ä»¶ä¸Šä¸å¯ç”¨

  * è¿™é€šå¸¸åŒ…æ‹¬æ‚¨åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­å®šä¹‰çš„å¤§å¤šæ•°ç»„ä»¶

#### `measure(callback)`

> ç¡®å®šç»™å®šè§†å›¾åœ¨å±å¹•ä¸Šçš„ä½ç½®ã€å®½åº¦å’Œé«˜åº¦ï¼Œå¹¶é€šè¿‡å¼‚æ­¥å›è°ƒè¿”å›å€¼

å¦‚æœæˆåŠŸï¼Œå°†ä½¿ç”¨ä»¥ä¸‹å‚æ•°è°ƒç”¨å›è°ƒï¼š

* `x`
* `y`
* `width`
* `height`
* `pageX`
* `pageY`

> è¯·æ³¨æ„ï¼Œç›´åˆ°åœ¨æœ¬æœºä¸­å®Œæˆæ¸²æŸ“åï¼Œè¿™äº›åº¦é‡æ‰å¯ç”¨

å¦‚æœæ‚¨éœ€è¦å°½å¿«æµ‹é‡ï¼Œè¯·è€ƒè™‘æ”¹ç”¨[ã€ `OnLayout` å±æ€§ã€‘](https://reactnative.cn/docs/view#onlayout)

#### `measureInWindow(callback)`

> ç¡®å®šç»™å®šè§†å›¾åœ¨çª—å£ä¸­çš„ä½ç½®ï¼Œå¹¶é€šè¿‡å¼‚æ­¥å›è°ƒè¿”å›å€¼

* å¦‚æœ `React` æ ¹è§†å›¾åµŒå…¥åˆ°å¦ä¸€ä¸ªæœ¬æœºè§†å›¾ä¸­ï¼Œè¿™å°†ä¸ºæ‚¨æä¾›ç»å¯¹åæ ‡

å¦‚æœæˆåŠŸï¼Œå°†ä½¿ç”¨ä»¥ä¸‹å‚æ•°è°ƒç”¨å›è°ƒï¼š

* `x`
* `y`
* `width`
* `height`

#### `measureLayout(relativeToNativeNode, onSuccess, onFail)`

> ä¸ `measure()` ç±»ä¼¼ï¼Œä½†æµ‹é‡è§†å›¾çš„ç›¸å¯¹ç¥–å…ˆï¼ŒæŒ‡å®šä¸º `relativeNativeNode`

* è¿™æ„å‘³ç€è¿”å›çš„ `x` ï¼Œ`y` ç›¸å¯¹äºç¥–å…ˆè§†å›¾çš„åŸç‚¹ `x` ï¼Œ`y`

* å’Œå¾€å¸¸ä¸€æ ·ï¼Œè¦è·å–ç»„ä»¶çš„æœ¬æœºèŠ‚ç‚¹å¥æŸ„ï¼Œå¯ä»¥ä½¿ç”¨ `findNodeHandle(component)`

```jsx
import {findNodeHandle} from 'react-native';
```

#### `focus()`

> ä¸ºç»™å®šçš„è¾“å…¥æˆ–è§†å›¾è¯·æ±‚ç„¦ç‚¹

è§¦å‘çš„ç¡®åˆ‡è¡Œä¸ºå°†å–å†³äºå¹³å°å’Œè§†å›¾ç±»å‹

#### `blur()`

> ä»è¾“å…¥æˆ–è§†å›¾ä¸­ç§»é™¤ç„¦ç‚¹

è¿™ä¸ `focus()` ç›¸å

## é¢œè‰²

* `react native` ä¸­çš„ç»„ä»¶ä½¿ç”¨[ã€ `javascript` è®¾è®¡æ ·å¼ã€‘](https://reactnative.cn/docs/style)

* é¢œè‰²å±æ€§é€šå¸¸ä¸[ã€ `CSS` åœ¨ `Web` ä¸Šçš„å·¥ä½œæ–¹å¼ã€‘](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value)ç›¸åŒ¹é…

### çº¢-ç»¿-è“

`React Native ` æ”¯æŒ `rgb()` å’Œ rgba() ä¸¤ç§åå…­è¿›åˆ¶ä¸å‡½æ•°æ–¹æ³•ï¼š

* `'#f0f' (#rgb)`

* `'#ff00ff' (#rrggbb)`

* `'rgb(255, 0, 255)'`

* `'rgba(255, 255, 255, 1.0)'`

*   `'#f0ff' (#rgba)`

*  `'#ff00ff00' (#rrggbbaa)`

### è‰²è°ƒ-é¥±å’Œåº¦-äº®åº¦

æ”¯æŒ `hsl()` å’Œ `hsla()` å‡½æ•°æ–¹æ³•ï¼š

* `hsl(360, 100%, 100%)`
* `hsla(360, 100%, 100%, 1.0)`

#### é€æ˜åº¦

`rgba(0,0,0,0)` çš„å¿«æ·æ–¹å¼æ˜¯ï¼š

* `transparent`

### ç§°è°“é¢œè‰²

ä½ è¿˜å¯ä»¥ä½¿ç”¨é¢œè‰²åç§°æ¥ä½œä¸ºé¢œè‰²å€¼ `React Native` éµå¾ª[ã€ `CSS3` è§„èŒƒã€‘](http://www.w3.org/TR/css3-color/#svg-color)ï¼š

* `aliceblue (#f0f8ff)`
* `antiquewhite (#faebd7)`
* `aqua (#00ffff)`
* `aquamarine (#7fffd4)`
* `azure (#f0ffff)`
* `beige (#f5f5dc)`
* `bisque (#ffe4c4)`
* `black (#000000)`
* `blanchedalmond (#ffebcd)`
* `blue (#0000ff)`
* [ã€æ›´å¤šå¯ç‚¹å‡»æŸ¥çœ‹ã€‘](https://reactnative.cn/docs/colors/#ç§°è°“é¢œè‰²)

## é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨

> åªéœ€ç®€å•å‡ æ­¥ï¼Œä½ å°±å¯ä»¥ç»™åŸæœ‰åº”ç”¨åŠ ä¸Šæ–°çš„åŸºäº `React Native` çš„ç‰¹æ€§ã€ç”»é¢å’Œè§†å›¾ç­‰

å…·ä½“çš„æ­¥éª¤æ ¹æ®ä½ æ‰€å¼€å‘çš„ç›®æ ‡å¹³å°ä¸åŒè€Œä¸åŒï¼š

* `iOS (Objective-C)`
* `iOS (Swift)`
* `Android (Java)`

> [ã€è¯¦ç»†å¯ç‚¹å‡»æŸ¥çœ‹ã€‘](https://reactnative.cn/docs/integration-with-existing-apps/#é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨)ï¼Œä»¥ä¸‹ä»…ä»¥ `Android (Java)` ä¸ºä¾‹

### æ ¸å¿ƒæ¦‚å¿µ

æŠŠ `React Native` ç»„ä»¶é›†æˆåˆ° `Android` åº”ç”¨ä¸­æœ‰å¦‚ä¸‹å‡ ä¸ªä¸»è¦æ­¥éª¤ï¼š

* é…ç½®å¥½ `React Native` ä¾èµ–å’Œé¡¹ç›®ç»“æ„

* åˆ›å»º `JavaScript` æ–‡ä»¶ï¼Œç¼–å†™ `React Native` ç»„ä»¶çš„ `JavaScript` ä»£ç 

* åœ¨åº”ç”¨ä¸­æ·»åŠ ä¸€ä¸ª `RCTRootView`

  * è¿™ä¸ª `RCTRootView` æ­£æ˜¯ç”¨æ¥æ‰¿è½½ä½ çš„ `React Native` ç»„ä»¶çš„å®¹å™¨

* å¯åŠ¨ `React Native` çš„ `Packager` æœåŠ¡ï¼Œè¿è¡Œåº”ç”¨

* éªŒè¯è¿™éƒ¨åˆ†ç»„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ

### å¼€å‘ç¯å¢ƒå‡†å¤‡

é¦–å…ˆæŒ‰ç…§[ã€å¼€å‘ç¯å¢ƒæ­å»ºæ•™ç¨‹ã€‘](https://reactnative.cn/docs/getting-started)æ¥å®‰è£… `React Native` åœ¨ `Android` å¹³å°ä¸Šæ‰€éœ€çš„ä¸€åˆ‡ä¾èµ–è½¯ä»¶

#### é…ç½®é¡¹ç›®ç›®å½•ç»“æ„

é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ç”¨äºå­˜æ”¾ `React Native` é¡¹ç›®ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª `/android` å­ç›®å½•ï¼ŒæŠŠä½ ç°æœ‰çš„ `Android` é¡¹ç›®æ‹·è´åˆ° `/android` å­ç›®å½•ä¸­

#### å®‰è£… `JavaScript` ä¾èµ–åŒ…

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `package.json` çš„ç©ºæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```json
{
  "name": "MyReactNativeApp",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node node_modules/react-native/local-cli/cli.js start"
  }
}
```

* ç¤ºä¾‹ä¸­çš„ `version` å­—æ®µæ²¡æœ‰å¤ªå¤§æ„ä¹‰

  * é™¤éä½ è¦æŠŠä½ çš„é¡¹ç›®å‘å¸ƒåˆ° `npm` ä»“åº“

  * `scripts` ä¸­æ˜¯ç”¨äºå¯åŠ¨ `packager` æœåŠ¡çš„å‘½ä»¤

æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ `yarn` æˆ– `npm` ï¼ˆä¸¤è€…éƒ½æ˜¯ `node` çš„åŒ…ç®¡ç†å™¨ï¼‰æ¥å®‰è£… `React` å’Œ `React Native` æ¨¡å—

* è¯·æ‰“å¼€ä¸€ä¸ªç»ˆç«¯/å‘½ä»¤æç¤ºè¡Œï¼Œè¿›å…¥åˆ°é¡¹ç›®ç›®å½•ä¸­ï¼ˆå³åŒ…å«æœ‰ `package.json` æ–‡ä»¶çš„ç›®å½•ï¼‰ï¼Œç„¶åè¿è¡Œä¸‹åˆ—å‘½ä»¤æ¥å®‰è£…ï¼š

```
$ yarn add react-native
```

è¿™æ ·é»˜è®¤ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ `React Native` ï¼ŒåŒæ—¶ä¼šæ‰“å°å‡ºç±»ä¼¼ä¸‹é¢çš„è­¦å‘Šä¿¡æ¯ï¼ˆä½ å¯èƒ½éœ€è¦æ»šåŠ¨å±å¹•æ‰èƒ½æ³¨æ„åˆ°ï¼‰ï¼š

```
warning "react-native@0.52.2" has unmet peer dependency "react@16.2.0".
```

è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæ„å‘³ç€æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ `React` ï¼š

```
$ yarn add react@16.2.0
```

> æ³¨æ„: å¿…é¡»ä¸¥æ ¼åŒ¹é…è­¦å‘Šä¿¡æ¯ä¸­æ‰€åˆ—å‡ºçš„ç‰ˆæœ¬ï¼Œé«˜äº†æˆ–è€…ä½äº†éƒ½ä¸å¯ä»¥

> å¦‚æœä½ ä½¿ç”¨å¤šä¸ªç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¯èƒ½è¿™äº›ç¬¬ä¸‰æ–¹å„è‡ªè¦æ±‚çš„ `react` ç‰ˆæœ¬æœ‰æ‰€å†²çªï¼Œæ­¤æ—¶åº”ä¼˜å…ˆæ»¡è¶³ `react-native` æ‰€éœ€è¦çš„ `react` ç‰ˆæœ¬
>> å…¶ä»–ç¬¬ä¸‰æ–¹èƒ½ç”¨åˆ™ç”¨ï¼Œä¸èƒ½ç”¨åˆ™åªèƒ½è€ƒè™‘é€‰æ‹©å…¶ä»–åº“

æ‰€æœ‰ `JavaScript` ä¾èµ–æ¨¡å—éƒ½ä¼šè¢«å®‰è£…åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `node_modules/` ç›®å½•ä¸­

* è¿™ä¸ªç›®å½•æˆ‘ä»¬åŸåˆ™ä¸Šä¸å¤åˆ¶ã€ä¸ç§»åŠ¨ã€ä¸ä¿®æ”¹ã€ä¸ä¸Šä¼ ï¼Œéšç”¨éšè£…

æŠŠ `node_modules/` ç›®å½•è®°å½•åˆ° `.gitignore` æ–‡ä»¶ä¸­

* ä¸ç”¨ä¸Šä¼ åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåªä¿ç•™åœ¨æœ¬åœ°

### æŠŠ `React Native` æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­

#### é…ç½® `maven`

åœ¨ä½ çš„ `app` ä¸­ `build.gradle` æ–‡ä»¶ä¸­æ·»åŠ  `React Native` ä¾èµ–ï¼š

```jsx
dependencies {
    implementation 'com.android.support:appcompat-v7:27.1.1'
    ...
    implementation "com.facebook.react:react-native:+"
    // From node_modules
}
```

* å¦‚æœæƒ³è¦æŒ‡å®šç‰¹å®šçš„ `React Native` ç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨å…·ä½“çš„ç‰ˆæœ¬å·æ›¿æ¢ `+`

  * å½“ç„¶å‰ææ˜¯ä½ ä» `npm` é‡Œä¸‹è½½çš„æ˜¯è¿™ä¸ªç‰ˆæœ¬

åœ¨é¡¹ç›®çš„ `build.gradle` æ–‡ä»¶ä¸­ä¸º `React Native` æ·»åŠ ä¸€ä¸ª `maven` ä¾èµ–çš„å…¥å£ï¼Œå¿…é¡»å†™åœ¨ `allprojects` ä»£ç å—ä¸­ï¼š

```jsx
allprojects {
    repositories {
        maven {
            // All of React Native (JS, Android binaries) is installed from npm
            url "$rootDir/../node_modules/react-native/android"
        }
        ...
    }
    ...
}
```

> ç¡®ä¿ä¾èµ–è·¯å¾„çš„æ­£ç¡®ï¼
>> ä»¥å…åœ¨ Android Studio è¿è¡Œ Gradle åŒæ­¥æ„å»ºæ—¶æŠ›å‡º â€œFailed to resolve: com.facebook.react:react-native:0.x.x" å¼‚å¸¸

#### é…ç½®æƒé™

æ¥ç€ï¼Œåœ¨ `AndroidManifest.xml` æ¸…å•æ–‡ä»¶ä¸­å£°æ˜ç½‘ç»œæƒé™ï¼š

```
<uses-permission android:name="android.permission.INTERNET" />
```

å¦‚æœéœ€è¦è®¿é—® `DevSettingsActivity` ç•Œé¢ï¼ˆå³å¼€å‘è€…èœå•ï¼‰

* åˆ™è¿˜éœ€è¦åœ¨ `AndroidManifest.xml` ä¸­å£°æ˜

```
<activity android:name="com.facebook.react.devsupport.DevSettingsActivity" />
```

å¼€å‘è€…èœå•ä¸€èˆ¬ä»…ç”¨äºåœ¨å¼€å‘æ—¶ä» `Packager` æœåŠ¡å™¨åˆ·æ–° `JavaScript` ä»£ç 

* åœ¨æ­£å¼å‘å¸ƒæ—¶ä½ å¯ä»¥å»æ‰è¿™ä¸€æƒé™

#### ç½‘ç»œå®‰å…¨é…ç½® `(API level 28+)`

ä» `Android 9 (API level 28+)` å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨æ˜æ–‡é€šä¿¡

* è¿™ä¼šé˜»æ­¢åº”ç”¨ç¨‹åºè¿æ¥åˆ° `React Native` æ‰“åŒ…ç¨‹åº

* ä¸‹æ–‡è¿™äº›æ›´æ”¹æ·»åŠ äº†ä¸“é—¨å…è®¸åˆ° `Packager IP` çš„æ˜æ–‡é€šä¿¡çš„åŸŸè§„åˆ™

åˆ›å»ºä»¥ä¸‹èµ„æºæ–‡ä»¶

```
app/src/debug/res/xml/network_security_config.xml:
```

```jsx
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
  <!-- allow cleartext traffic for React Native packager ips in debug -->
  <domain-config cleartextTrafficPermitted="true">
    <domain includeSubdomains="false">localhost</domain>
    <domain includeSubdomains="false">10.0.2.2</domain>
    <domain includeSubdomains="false">10.0.3.2</domain>
  </domain-config>
</network-security-config>
```

```
app/src/release/res/xml/network_security_config.xml:
```

```jsx
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
  <!-- deny cleartext traffic for React Native packager ips in release -->
  <domain-config cleartextTrafficPermitted="false">
    <domain includeSubdomains="false">localhost</domain>
    <domain includeSubdomains="false">10.0.2.2</domain>
    <domain includeSubdomains="false">10.0.3.2</domain>
  </domain-config>
</network-security-config>
```

å°†é…ç½®åº”ç”¨äº `AndroidManifest.xml`

```jsx
<!-- ... -->
<application
  android:networkSecurityConfig="@xml/network_security_config">
  <!-- ... -->
</application>
<!-- ... -->
```

è¦äº†è§£æœ‰å…³ç½‘ç»œå®‰å…¨é…ç½®å’Œæ˜æ–‡é€šä¿¡ç­–ç•¥çš„æ›´å¤šä¿¡æ¯[ã€è¯·å‚é˜…æ­¤é“¾æ¥ã€‘](https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted)

#### ä»£ç é›†æˆ

ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®é™…ä¿®æ”¹æœ¬æœº `Android` åº”ç”¨ç¨‹åºä»¥é›†æˆ `React Native`

* `React Native` ç»„ä»¶

  > æˆ‘ä»¬é¦–å…ˆè¦å†™çš„æ˜¯ `High Score` ï¼ˆå¾—åˆ†æ’è¡Œæ¦œï¼‰çš„ `JavaScript` ç«¯çš„ä»£ç 

  * åˆ›å»ºä¸€ä¸ª `index.js` æ–‡ä»¶

    * é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„ `index.js` æ–‡ä»¶

      > æ³¨æ„ï¼šåœ¨ `0.49` ç‰ˆæœ¬ä¹‹å‰æ˜¯ `index.android.js` æ–‡ä»¶

    * `index.js` æ˜¯ `React Native` åº”ç”¨åœ¨ `Android` ä¸Šçš„å…¥å£æ–‡ä»¶

      > æ³¨æ„ï¼šå®ƒæ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼
      >> å®ƒå¯ä»¥æ˜¯ä¸ªå¾ˆç®€å•çš„æ–‡ä»¶ï¼Œç®€å•åˆ°å¯ä»¥åªåŒ…å«ä¸€è¡Œ `require/import` å¯¼å…¥è¯­å¥
      >>> æ•™ç¨‹ä¸­ä¸ºäº†ç®€å•ç¤ºèŒƒï¼ŒæŠŠå…¨éƒ¨çš„ä»£ç éƒ½å†™åˆ°äº† `index.js` é‡Œï¼›å½“ç„¶å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¹¶ä¸æ¨èè¿™æ ·åš

  * æ·»åŠ ä½ è‡ªå·±çš„ `React Native` ä»£ç 

    * è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•çš„æ·»åŠ ä¸€ä¸ª `<Text>` ç»„ä»¶ï¼Œç„¶åç”¨ä¸€ä¸ªå¸¦æœ‰æ ·å¼çš„ `<View>` ç»„ä»¶æŠŠå®ƒåŒ…èµ·æ¥

      ```jsx
      import React from 'react';
      import {AppRegistry, StyleSheet, Text, View} from 'react-native';

      class HelloWorld extends React.Component {
        render() {
          return (
            <View style={styles.container}>
              <Text style={styles.hello}>Hello, World</Text>
            </View>
          );
        }
      }
      var styles = StyleSheet.create({
        container: {
          flex: 1,
          justifyContent: 'center',
        },
        hello: {
          fontSize: 20,
          textAlign: 'center',
          margin: 10,
        },
      });

      AppRegistry.registerComponent('MyReactNativeApp', () => HelloWorld);
      ```

  * é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º

    * å¦‚æœä½ çš„åº”ç”¨ä¼šè¿è¡Œåœ¨ `Android 6.0ï¼ˆAPI level 23ï¼‰` æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œè¯·ç¡®ä¿ä½ åœ¨å¼€å‘ç‰ˆæœ¬ä¸­æœ‰æ‰“å¼€æ‚¬æµ®çª—( `overlay` )æƒé™

    * ä½ å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ `Settings.canDrawOverlays(this)` æ¥æ£€æŸ¥

      > ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸€æƒé™ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šæŠŠå¼€å‘ä¸­çš„æŠ¥é”™æ˜¾ç¤ºåœ¨æ‚¬æµ®çª—ä¸­ï¼ˆä»…åœ¨å¼€å‘é˜¶æ®µéœ€è¦ï¼‰
      >> åœ¨ `Android 6.0ï¼ˆAPI level 23ï¼‰` ä¸­ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åŒæ„æˆæƒ
      >>> å…·ä½“è¯·æ±‚æˆæƒçš„åšæ³•æ˜¯åœ¨ `onCreate()` ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 
      >>>> å…¶ä¸­ `OVERLAY_PERMISSION_REQ_CODE` æ˜¯ç”¨äºå›ä¼ æˆæƒç»“æœçš„å­—æ®µ

    ```jsx
    private final int OVERLAY_PERMISSION_REQ_CODE = 1;  // ä»»å†™ä¸€ä¸ªå€¼

    ...

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
        if (!Settings.canDrawOverlays(this)) {
            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,
                                      Uri.parse("package:" + getPackageName()));
            startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE);
        }
    }
    ```

    * æœ€åï¼Œå¿…é¡»é‡å†™ `onActivityResult()` æ–¹æ³•ï¼ˆå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼‰ï¼Œä»¥å¤„ç†ä¸€è‡´ `UX` æ¥å—æˆ–æ‹’ç»çš„æƒé™æƒ…å†µ

    * æ­¤å¤–ï¼Œå¯¹äºé›†æˆä½¿ç”¨ `startActivityForResult` çš„æœ¬æœºæ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»“æœä¼ é€’ç»™æˆ‘ä»¬çš„ `ReactInstanceManager` å®ä¾‹çš„ `onActivityResult` æ–¹æ³•

    ```jsx
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == OVERLAY_PERMISSION_REQ_CODE) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                if (!Settings.canDrawOverlays(this)) {
                    // SYSTEM_ALERT_WINDOW permission not granted
                }
            }
        }
        mReactInstanceManager.onActivityResult( this, requestCode, resultCode, data );
    }
    ```

#### æŒæ¡æ ¸å¿ƒç§‘æŠ€ï¼š`ReactRootView`

æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€äº›åŸç”Ÿä»£ç æ¥å¯åŠ¨ `React Native` çš„è¿è¡Œæ—¶ç¯å¢ƒå¹¶è®©å®ƒå¼€å§‹æ¸²æŸ“

* é¦–å…ˆéœ€è¦åœ¨ä¸€ä¸ª `Activity` ä¸­åˆ›å»ºä¸€ä¸ª `ReactRootView` å¯¹è±¡

* ç„¶ååœ¨è¿™ä¸ªå¯¹è±¡ä¹‹ä¸­å¯åŠ¨ `React Native` åº”ç”¨ï¼Œå¹¶å°†å®ƒè®¾ä¸ºç•Œé¢çš„ä¸»è§†å›¾

  > å¦‚æœä½ æƒ³åœ¨å®‰å“ `5.0` ä»¥ä¸‹çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œè¯·ç”¨ `com.android.support:appcompat` åŒ…ä¸­çš„ `AppCompatActivity` ä»£æ›¿ `Activity`

```jsx
public class MyReactActivity extends Activity implements DefaultHardwareBackBtnHandler {
    private ReactRootView mReactRootView;
    private ReactInstanceManager mReactInstanceManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mReactRootView = new ReactRootView(this);
        mReactInstanceManager = ReactInstanceManager.builder()
                .setApplication(getApplication())
                .setCurrentActivity(this)
                .setBundleAssetName("index.android.bundle")
                .setJSMainModulePath("index")
                .addPackage(new MainReactPackage())
                .setUseDeveloperSupport(BuildConfig.DEBUG)
                .setInitialLifecycleState(LifecycleState.RESUMED)
                .build();
        // æ³¨æ„è¿™é‡Œçš„MyReactNativeAppå¿…é¡»å¯¹åº”â€œindex.jsâ€ä¸­çš„
        // â€œAppRegistry.registerComponent()â€çš„ç¬¬ä¸€ä¸ªå‚æ•°
        mReactRootView.startReactApplication(mReactInstanceManager, "MyReactNativeApp", null);

        setContentView(mReactRootView);
    }

    @Override
    public void invokeDefaultOnBackPressed() {
        super.onBackPressed();
    }
}
```

* å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ `React Native` çš„å…¥é—¨å·¥å…·åŒ…

* å°† `HelloWorld` å­—ç¬¦ä¸²æ›¿æ¢ä¸º `index.js` æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²

  * è¿™æ˜¯ `appRegistry.registerComponent()` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `Android Studio` , å¯ä»¥ä½¿ç”¨ `Alt + Enter` å¿«æ·é”®æ¥è‡ªåŠ¨ä¸º `MyReactActivity` ç±»è¡¥ä¸Šç¼ºå¤±çš„ `import` è¯­å¥

* æ³¨æ„ `BuildConfig` åº”è¯¥æ˜¯åœ¨ä½ è‡ªå·±çš„åŒ…ä¸­è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€é¢å¤–å¼•å…¥

  > åƒä¸‡ä¸è¦ä» `com.facebook...` çš„åŒ…ä¸­å¼•å…¥ï¼

æˆ‘ä»¬éœ€è¦æŠŠ `MyReactActivity` çš„ä¸»é¢˜è®¾å®šä¸º `Theme.AppCompat.Light.NoActionBar` ï¼Œå› ä¸ºé‡Œé¢æœ‰è®¸å¤šç»„ä»¶éƒ½ä½¿ç”¨äº†è¿™ä¸€ä¸»é¢˜ï¼š

```jsx
<activity
  android:name=".MyReactActivity"
  android:label="@string/app_name"
  android:theme="@style/Theme.AppCompat.Light.NoActionBar">
</activity>
```

> ä¸€ä¸ª `ReactInstanceManager` å¯ä»¥åœ¨å¤šä¸ª `activities` æˆ– `fragments` é—´å…±äº«
>> æ‚¨å°†éœ€è¦åˆ›å»ºè‡ªå·±çš„ `ReactFragment` æˆ– `ReactActivity` ï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªæŒæœ‰ `ReactInstanceManager` çš„å•ä¾‹æŒæœ‰äºº
>>> å½“æ‚¨éœ€è¦ `ReactInstanceManager` æ—¶ï¼Œä½¿ç”¨å•ä»¶æä¾›çš„é‚£ä¸ª
>>>> ä¾‹å¦‚ï¼Œå°† `ReactInstanceManager` è¿æ¥åˆ°è¿™äº›æ´»åŠ¨æˆ–ç‰‡æ®µçš„ç”Ÿå‘½å‘¨æœŸ

ä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦æŠŠä¸€äº› `activity` çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒä¼ é€’ç»™ `ReactInstanceManager` ï¼š

```jsx
@Override
protected void onPause() {
    super.onPause();

    if (mReactInstanceManager != null) {
        mReactInstanceManager.onHostPause(this);
    }
}

@Override
protected void onResume() {
    super.onResume();

    if (mReactInstanceManager != null) {
        mReactInstanceManager.onHostResume(this, this);
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();

    if (mReactInstanceManager != null) {
        mReactInstanceManager.onHostDestroy(this);
    }
    if (mReactRootView != null) {
        mReactRootView.unmountReactApplication();
    }
}
```

æˆ‘ä»¬è¿˜éœ€è¦æŠŠåé€€æŒ‰é’®äº‹ä»¶ä¼ é€’ç»™ `React Native` ï¼š

```jsx
@Override
 public void onBackPressed() {
    if (mReactInstanceManager != null) {
        mReactInstanceManager.onBackPressed();
    } else {
        super.onBackPressed();
    }
}
```

* è¿™å…è®¸ `JavaScript ` æ§åˆ¶å½“ç”¨æˆ·æŒ‰ä¸‹ç¡¬ä»¶åé€€æŒ‰é’®æ—¶å‘ç”Ÿçš„æƒ…å†µ

  * ä¾‹å¦‚å®ç°å¯¼èˆª

* å½“ `JavaScript ` ä¸å¤„ç†åé€€æŒ‰é’®æ—¶ï¼ŒæŒ‰ä¸‹

  * å°†è°ƒç”¨ `invokeDefaultOnBackPressed` æ–¹æ³•

* é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™åªä¼šå®Œæˆæ‚¨çš„ `Activity`

æœ€åï¼Œæˆ‘ä»¬éœ€è¦è¿æ¥devèœå•

* é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯é€šè¿‡æ‘‡åŠ¨è®¾å¤‡æ¥æ¿€æ´»çš„

  * ä½†è¿™åœ¨æ¨¡æ‹Ÿå™¨ä¸­å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨

* æ‰€ä»¥å½“ä½ æŒ‰ä¸‹ç¡¬ä»¶èœå•æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬ä¼šè®©å®ƒæ˜¾ç¤ºå‡ºæ¥

  * å¦‚æœä½¿ç”¨ `Android Studio` æ¨¡æ‹Ÿå™¨ ï¼Œè¯·ä½¿ç”¨ `Ctrl + M`

```jsx
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU && mReactInstanceManager != null) {
        mReactInstanceManager.showDevOptionsDialog();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}
```

ç°åœ¨ activity å·²å°±ç»ªï¼Œå¯ä»¥è¿è¡Œä¸€äº› JavaScript ä»£ç äº†

### æµ‹è¯•é›†æˆç»“æœ

> æ‚¨å·²ç»å®Œæˆäº†å°† `react native` ä¸å½“å‰åº”ç”¨ç¨‹åºé›†æˆçš„æ‰€æœ‰åŸºæœ¬æ­¥éª¤

ç°åœ¨ï¼Œæˆ‘ä»¬å°†å¯åŠ¨ `React Native` æ‰“åŒ…ç¨‹åºæ¥æ„å»º `index.bundle` ï¼Œå¹¶åœ¨ `localhost` ä¸Šè¿è¡ŒæœåŠ¡å™¨æ¥ä¸ºå…¶æä¾›æœåŠ¡

* è¿è¡Œ `Packager`

  * è¿è¡Œåº”ç”¨é¦–å…ˆéœ€è¦å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆ `Packager` ï¼‰

  * ä½ åªéœ€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

  ```
  $ yarn start
  ```

* è¿è¡Œä½ çš„åº”ç”¨

  * ä¿æŒ `packager` çš„çª—å£è¿è¡Œä¸è¦å…³é—­ï¼Œç„¶ååƒå¾€å¸¸ä¸€æ ·ç¼–è¯‘è¿è¡Œä½ çš„ `Android` åº”ç”¨

  * åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ `./gradlew installDebug` æˆ–æ˜¯åœ¨ `Android Studio` ä¸­ç¼–è¯‘è¿è¡Œ

  * ç¼–è¯‘æ‰§è¡Œä¸€åˆ‡é¡ºåˆ©è¿›è¡Œä¹‹åï¼Œåœ¨è¿›å…¥åˆ° `MyReactActivity` æ—¶åº”è¯¥å°±èƒ½ç«‹åˆ»ä» `packager` ä¸­è¯»å– `JavaScript` ä»£ç å¹¶æ‰§è¡Œå’Œæ˜¾ç¤ºï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/EmbeddedAppAndroid.png)

### åœ¨ `Android Studio` ä¸­æ‰“åŒ…

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `Android Studio` æ¥æ‰“ `release` åŒ…ï¼

* å…¶æ­¥éª¤åŸºæœ¬å’ŒåŸç”Ÿåº”ç”¨ä¸€æ ·

* åªæ˜¯åœ¨æ¯æ¬¡ç¼–è¯‘æ‰“åŒ…ä¹‹å‰éœ€è¦å…ˆæ‰§è¡Œ `JavaScript` æ–‡ä»¶çš„æ‰“åŒ…

  * å³ç”Ÿæˆç¦»çº¿çš„ `jsbundle` æ–‡ä»¶

* å…·ä½“çš„ `JavaScript` æ‰“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼š

```
$ react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/com/your-company-name/app-package-name/src/main/assets/index.android.bundle --assets-dest android/com/your-company-name/app-package-name/src/main/res/
```

* æ³¨æ„æŠŠä¸Šè¿°å‘½ä»¤ä¸­çš„è·¯å¾„æ›¿æ¢ä¸ºä½ å®é™…é¡¹ç›®çš„è·¯å¾„

  * å¦‚æœ `assets` ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™éœ€è¦æå‰è‡ªå·±åˆ›å»ºä¸€ä¸ª

* ç„¶ååœ¨` Android Studio` ä¸­æ­£å¸¸ç”Ÿæˆ release ç‰ˆæœ¬å³å¯ï¼

## ä¸ºç”µè§†å’Œæœºé¡¶ç›’åˆ¶ä½œåº”ç”¨

ç›®å‰çš„ `React Native` åº”ç”¨åªéœ€åœ¨ `JavaScript` ç«¯ç®€å•ä¿®æ”¹ç”šè‡³æ— éœ€ä¿®æ”¹ï¼Œåœ¨ç”µè§†å’Œæœºé¡¶ç›’è®¾å¤‡ä¸Šå°±åŸºæœ¬å¯ç”¨äº†

* `iOS`
* `Android`

[ã€äº†è§£æ›´å¤šå¯ç‚¹å‡»æŸ¥çœ‹ `iOS` åŠ `Android` ç‰ˆæœ¬çš„è¯¦ç»†æƒ…å†µã€‘](https://reactnative.cn/docs/building-for-apple-tv/#ä¸ºç”µè§†å’Œæœºé¡¶ç›’åˆ¶ä½œåº”ç”¨)

### ç¼–è¯‘ä¿®æ”¹

* åŸç”Ÿç«¯ï¼š

  * åœ¨ `Android TV` ä¸Šè¿è¡Œ `React Native` é¡¹ç›®è¯·å…ˆåœ¨ `AndroidManifest.xml` ä¸­åŠ å…¥ä¸‹åˆ—é…ç½®ï¼š

```jsx
 <!-- åŠ å…¥è‡ªå®šä¹‰çš„bannerå›¾ä½œä¸ºTVè®¾å¤‡ä¸Šçš„å›¾æ ‡ -->
 <application
  ...
  android:banner="@drawable/tv_banner"
  >
    ...
    <intent-filter>
      ...
      <!-- Needed to properly create a launch intent when running on Android TV -->
      <category android:name="android.intent.category.LEANBACK_LAUNCHER"/>
    </intent-filter>
    ...
  </application>
  ```

* `JavaScript` ç«¯ï¼š

  * å¯¹äºç”µè§†è®¾å¤‡çš„æ£€æµ‹ä»£ç å·²ç»åŠ å…¥åˆ°äº† `Platform` æ¨¡å—ä¸­

  * ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥æ£€æµ‹å½“å‰è¿è¡Œè®¾å¤‡æ˜¯å¦æ˜¯ç”µè§†è®¾å¤‡ï¼š

```jsx
import {Platform} from 'react-native';
const running_on_tv = Platform.isTV;
```

### ä»£ç ä¿®æ”¹

* è®¿é—®å¯ç‚¹å‡»çš„æ§ä»¶ï¼š

  * åœ¨ `Android` ç”µè§†ä¸Šè¿è¡Œæ—¶ï¼Œ`Android` æ¡†æ¶å°†æ ¹æ®è§†å›¾ä¸­å¯èšç„¦å…ƒç´ çš„ç›¸å¯¹ä½ç½®è‡ªåŠ¨åº”ç”¨å®šå‘å¯¼èˆªæ–¹æ¡ˆ

  * `Touchable mixin` æ·»åŠ äº†ç”¨äºæ£€æµ‹ç„¦ç‚¹å˜åŒ–çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨ç°æœ‰æ–¹æ³•æ­£ç¡®è®¾ç½®ç»„ä»¶æ ·å¼ï¼Œå¹¶åœ¨ä½¿ç”¨ç”µè§†é¥æ§å™¨é€‰æ‹©è§†å›¾æ—¶å¯åŠ¨æ­£ç¡®çš„æ“ä½œ

  * æ‰€ä»¥å¯ä»¥ç”¨å¤–åé¦ˆï¼Œå¯è§¦æ‘¸çš„çªå‡ºæ˜¾ç¤ºï¼Œ`TouchableOpacity` å’Œ `TouchableNativeFeedback` å°† `åªèµ·ä½œç”¨` ï¼š

    * `onFocus`

      å°†åœ¨å¯è§¦æ‘¸è§†å›¾è¿›å…¥ç„¦ç‚¹æ—¶æ‰§è¡Œ

    * `onBlur`

      å°†åœ¨å¯è§¦æ‘¸è§†å›¾å¤±å»ç„¦ç‚¹æ—¶æ‰§è¡Œ

    * `onPress`

      å½“é€šè¿‡æŒ‰ç”µè§†é¥æ§å™¨ä¸Šçš„ `é€‰æ‹©` æŒ‰é’®å®é™…é€‰æ‹©å¯è§¦æ‘¸è§†å›¾æ—¶ï¼Œå°†æ‰§è¡Œ

* ç”µè§†é¥æ§å™¨è¾“å…¥ï¼š

  * ä¸€ä¸ªæ–°çš„æœ¬åœ°ç±»ï¼Œååº”ç‰©å¯¼å‘é˜€è§‚å¯ŸåŠ©æ‰‹ï¼Œä¸ºç”µè§†è¿œç¨‹äº‹ä»¶è®¾ç½®å…³é”®äº‹ä»¶å¤„ç†ç¨‹åº

    * å½“ç”µè§†é¥æ§äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ­¤ç±»è§¦å‘ `JavaScript` äº‹ä»¶

  * `TVEventHandler JavaScript` å¯¹è±¡çš„å®ä¾‹å°†æ•è·æ­¤äº‹ä»¶

    * éœ€è¦å®ç°ç”µè§†è¿œç¨‹äº‹ä»¶è‡ªå®šä¹‰å¤„ç†çš„åº”ç”¨ç¨‹åºä»£ç å¯ä»¥åˆ›å»º `TveEventHandler` å®ä¾‹å¹¶ä¾¦å¬è¿™äº›äº‹ä»¶ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºï¼š

      ```jsx
      var TVEventHandler = require('TVEventHandler');

      class Game2048 extends React.Component {
        _tvEventHandler: any;

        _enableTVEventHandler() {
          this._tvEventHandler = new TVEventHandler();
          this._tvEventHandler.enable(this, function(cmp, evt) {
            if (evt && evt.eventType === 'right') {
              cmp.setState({board: cmp.state.board.move(2)});
            } else if(evt && evt.eventType === 'up') {
              cmp.setState({board: cmp.state.board.move(1)});
            } else if(evt && evt.eventType === 'left') {
              cmp.setState({board: cmp.state.board.move(0)});
            } else if(evt && evt.eventType === 'down') {
              cmp.setState({board: cmp.state.board.move(3)});
            } else if(evt && evt.eventType === 'playPause') {
              cmp.restartGame();
            }
          });
        }

        _disableTVEventHandler() {
          if (this._tvEventHandler) {
            this._tvEventHandler.disable();
            delete this._tvEventHandler;
          }
        }

        componentDidMount() {
          this._enableTVEventHandler();
        }

        componentWillUnmount() {
          this._disableTVEventHandler();
        }
      ```

* å¼€å‘èœå•æ”¯æŒï¼š

  * åœ¨æ¨¡æ‹Ÿå™¨ä¸Šï¼Œ`Cmd-M` ä¼šå¼¹å‡ºå¼€å‘è€…èœå•ï¼Œå°±åƒå®‰å“ä¸€æ ·

  * è¦åœ¨çœŸæ­£çš„ `Android` ç”µè§†è®¾å¤‡ä¸Šæ˜¾ç¤ºå®ƒï¼Œé•¿æŒ‰é¥æ§å™¨ä¸Šçš„ `æ’­æ”¾/æš‚åœ` æŒ‰é’®

    * è¯·ä¸è¦æ‘‡æ™ƒ `Android` ç”µè§†è®¾å¤‡ï¼Œé‚£ä¸èµ·ä½œç”¨

> å·²çŸ¥é—®é¢˜ï¼š
>> `TextInput` ç»„ä»¶æš‚æ—¶ä¸å·¥ä½œ
>>> ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬æ— æ³•è·å¾—ç„¦ç‚¹

## åœ¨è®¾å¤‡ä¸Šè¿è¡Œ

åœ¨çœŸæœºä¸Šæµ‹è¯• `app` åå†å°†å…¶å‘å¸ƒç»™ç”¨æˆ·æ€»æ˜¯å¥½çš„

* æœ¬æ–‡æ¡£å°†æŒ‡å¯¼ä½ é€šè¿‡å¿…é¡»çš„æ­¥éª¤åœ¨è®¾å¤‡ä¸Šè¿è¡Œ `React Native app` ï¼Œä¸ºç”Ÿäº§åšå‡†å¤‡

* å¦‚æœä½¿ç”¨ `Create React Native App` æ¥å»ºç«‹å·¥ç¨‹ï¼Œå¯ä»¥é€šè¿‡ `Expo App` æ‰«æ `QR` ä»£ç åœ¨è®¾å¤‡ä¸Šé¢„è§ˆ `app`

* ä¸ºäº†åœ¨è®¾å¤‡ä¸Šç¼–è¯‘å’Œè¿è¡Œ `app` ï¼Œéœ€è¦é€å‡ºå¹¶ä»æ­å»ºå¼€å‘ç¯å¢ƒå®‰è£…åŸç”Ÿä»£ç ä¾èµ–

  * `iOS`
  * `Android`

[ã€ç‚¹å‡»å¯æŸ¥çœ‹ `iOS` åŠ `Android` ç‰ˆæœ¬çš„è¯¦ç»†æƒ…å†µã€‘](https://reactnative.cn/docs/running-on-device/#åœ¨è®¾å¤‡ä¸Šè¿è¡Œ)

### åœ¨ `Android` è®¾å¤‡ä¸Šè¿è¡Œåº”ç”¨

> ä¸‹æ–‡æ‰€æŒ‡çš„è®¾å¤‡åŒ…æ‹¬ `Android` æ‰‹æœºå’Œæ¨¡æ‹Ÿå™¨ã€[å…¶ä»–å¼€å‘å¹³å°å¯ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æƒ…å†µã€‘](https://reactnative.cn/docs/running-on-device/#åœ¨-android-è®¾å¤‡ä¸Šè¿è¡Œåº”ç”¨)

#### å¼€å¯ `USB` è°ƒè¯•

åœ¨é»˜è®¤æƒ…å†µä¸‹ `Android` è®¾å¤‡åªèƒ½ä»åº”ç”¨å¸‚åœºæ¥å®‰è£…åº”ç”¨

* ä½ éœ€è¦å¼€å¯ `USB` è°ƒè¯•æ‰èƒ½è‡ªç”±å®‰è£…å¼€å‘ç‰ˆæœ¬çš„ `APP`

* é¦–å…ˆï¼Œç¡®å®š[ã€ä½ å·²ç»æ‰“å¼€è®¾å¤‡çš„ `USB` è°ƒè¯•å¼€å…³ã€‘](https://www.baidu.com/s?wd=%E6%89%93%E5%BC%80usb%E8%B0%83%E8%AF%95)

#### é€šè¿‡ `USB` æ•°æ®çº¿è¿æ¥è®¾å¤‡

ç°åœ¨è®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ª `Android` è®¾å¤‡æ¥è¿è¡Œæˆ‘ä»¬çš„ `React` æœ¬åœ°é¡¹ç›®

* é€šè¿‡USBå°†è®¾å¤‡æ’å…¥å¼€å‘æœºå™¨

* ä¸‹é¢æ£€æŸ¥ä½ çš„è®¾å¤‡æ˜¯å¦èƒ½æ­£ç¡®è¿æ¥åˆ° `ADBï¼ˆAndroid Debug Bridgeï¼‰`ï¼Œä½¿ç”¨ `adb devices` å‘½ä»¤ï¼š

```
$ adb devices
List of devices attached
emulator-5554 offline   # Google emulator
14ed2fcc device         # Physical device
```

* åœ¨å³è¾¹é‚£åˆ—çœ‹åˆ° `device` è¯´æ˜ä½ çš„è®¾å¤‡å·²ç»è¢«æ­£ç¡®è¿æ¥äº†

  * æ³¨æ„ï¼Œä½ æ¯æ¬¡åªåº”å½“è¿æ¥ä¸€ä¸ªè®¾å¤‡

> è¯‘æ³¨ï¼šå¦‚æœä½ è¿æ¥äº†å¤šä¸ªè®¾å¤‡ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨åœ¨å†…ï¼‰ï¼Œåç»­çš„ä¸€äº›æ“ä½œå¯èƒ½ä¼šå¤±è´¥
>> æ‹”æ‰ä¸éœ€è¦çš„è®¾å¤‡ï¼Œæˆ–è€…å…³æ‰æ¨¡æ‹Ÿå™¨ï¼Œç¡®ä¿ `adb devices` çš„è¾“å‡ºåªæœ‰ä¸€ä¸ªæ˜¯è¿æ¥çŠ¶æ€

#### è¿è¡Œåº”ç”¨

ç°åœ¨ä½ å¯ä»¥è¿è¡Œ `react-native run-android` æ¥åœ¨è®¾å¤‡ä¸Šå®‰è£…å¹¶å¯åŠ¨åº”ç”¨äº†

> å¦‚æœå‡ºç° `bridge configuration isn't available` é”™è¯¯ï¼Œè¯·å‚é˜…[ã€ä½¿ç”¨ `ADB REVERSE` ã€‘](https://reactnative.cn/docs/running-on-device#method-1-using-adb-reverse-recommended)

> æç¤ºï¼šä½ è¿˜å¯ä»¥è¿è¡Œ `react-native run-android --variant=release` æ¥å®‰è£… `release` ç‰ˆçš„åº”ç”¨
>> å½“ç„¶ä½ éœ€è¦[ã€å…ˆé…ç½®å¥½ç­¾åã€‘](https://reactnative.cn/docs/running-on-device/signed-apk-android.html)ï¼Œä¸”æ­¤æ—¶æ— æ³•å†å¼€å¯å¼€å‘è€…èœå•
>>> æ³¨æ„åœ¨ `debug` å’Œ `release` ç‰ˆæœ¬é—´æ¥å›åˆ‡æ¢å®‰è£…æ—¶å¯èƒ½ä¼šæŠ¥é”™ç­¾åä¸åŒ¹é…ï¼Œæ­¤æ—¶éœ€è¦å…ˆå¸è½½å‰ä¸€ä¸ªç‰ˆæœ¬å†å°è¯•å®‰è£…

### ä»è®¾å¤‡ä¸Šè®¿é—®å¼€å‘æœåŠ¡å™¨

> åœ¨å¯ç”¨å¼€å‘æœåŠ¡å™¨ï¼ˆå®˜æ–¹åç§° `metro` ï¼Œä½†æˆ‘ä»¬æ›´å¸¸ç§°ä¹‹ä¸º `Packager` ï¼‰çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„è¿­ä»£ä¿®æ”¹åº”ç”¨ï¼Œç„¶ååœ¨è®¾å¤‡ä¸Šç«‹å³æŸ¥çœ‹ç»“æœ

> è¯‘æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹æ¨¡æ‹Ÿå™¨å¯ä»¥è‡ªåŠ¨æ¢æµ‹å®¿ä¸»æœº `ip` å¹¶è¿æ¥ï¼Œåªæœ‰ `Android 5.0` ä»¥ä¸‹ç‰ˆæœ¬çš„æ‰‹æœºéœ€è¦æŒ‰ä¸‹æ–‡è¯´æ˜æ¥æ‰‹åŠ¨æ“ä½œ
>> ä½†æŸäº›æƒ…å½¢ä¸‹å¯èƒ½ä¹Ÿæ— æ³•æ­£å¸¸è¿æ¥ï¼Œè¯·æ³¨æ„å»[ã€è®ºå›çš„æ±‚åŠ©ä¸“åŒºã€‘](http://bbs.reactnative.cn/category/4/)æŸ¥çœ‹æ˜¯å¦æœ‰äººé­é‡åŒç±»å‹çš„é—®é¢˜ï¼ˆä¸åŒæ—¶æœŸä¸åŒç‰ˆæœ¬å¯èƒ½æ˜¯ä¸åŒçš„é—®é¢˜ï¼‰
>>> æœ‰äº›æ–‡ç« ä¼šæåˆ° `react-native bundle` å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæŠŠ `JavaScript` æ–‡ä»¶æ‰“åŒ…å†…ç½®åˆ°åº”ç”¨ä¸­ï¼Œä»è€Œä¸éœ€è¦è¿æ¥ `Packager` ï¼Œä½†è¿™å¹¶æ²¡æœ‰è§£å†³é—®é¢˜
>>>> æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¿…é¡»ä½¿ç”¨åˆ° `Packager` ï¼Œå¦åˆ™æ— æ³•åˆ·æ–°ä»£ç 

æŒ‰ç…§ä¸‹é¢æè¿°çš„ä»»æ„ä¸€ç§æ–¹æ³•æ¥ä½¿ä½ çš„è®¾å¤‡å¯ä»¥è®¿é—®åˆ°è¿è¡Œåœ¨ç”µè„‘ä¸Šçš„å¼€å‘æœåŠ¡å™¨ï¼š

#### `Android 5.0` åŠä»¥ä¸Š

ä½¿ç”¨ `adb reverse` å‘½ä»¤

> æ³¨æ„ï¼šè¿™ä¸ªé€‰é¡¹åªèƒ½åœ¨ `5.0` ä»¥ä¸Šç‰ˆæœ¬( `API 21+` )çš„å®‰å“è®¾å¤‡ä¸Šä½¿ç”¨

é¦–å…ˆæŠŠä½ çš„è®¾å¤‡é€šè¿‡ `USB` æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘ä¸Šï¼Œå¹¶å¼€å¯ `USB` è°ƒè¯•ï¼ˆå…³äºå¦‚ä½•å¼€å¯ `USB` è°ƒè¯•ï¼Œå‚è§ä¸Šé¢çš„ç« èŠ‚ï¼‰ï¼š

* è¿è¡Œ `adb reverse tcp:8081 tcp:8081`

* ä¸éœ€è¦æ›´å¤šé…ç½®ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ `Reload JS` å’Œå…¶å®ƒçš„å¼€å‘é€‰é¡¹äº†

#### `Android 5.0` ä»¥ä¸‹

é€šè¿‡ `Wi-Fi` è¿æ¥ä½ çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨

* å¯ä»¥é€šè¿‡ `Wi-Fi` è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨

  * ä½ é¦–å…ˆéœ€è¦ä½¿ç”¨ `USB` çº¿åœ¨ä½ çš„è®¾å¤‡ä¸Šå®‰è£…åº”ç”¨ç¨‹åº

  * ä½†ä¸€æ—¦å®Œæˆäº†è¿™äº›æ“ä½œï¼Œæ‚¨å°±å¯ä»¥æŒ‰ç…§è¿™äº›è¯´æ˜è¿›è¡Œæ— çº¿è°ƒè¯•

  * åœ¨ç»§ç»­ä¹‹å‰ï¼Œæ‚¨éœ€è¦å¼€å‘æœºå™¨çš„å½“å‰ `IP` åœ°å€

* æ‚¨å¯ä»¥åœ¨ç³»ç»Ÿ `é¦–é€‰é¡¹` â†’ `ç½‘ç»œ` ä¸­æ‰¾åˆ° `IP` åœ°å€

  * é¦–å…ˆç¡®ä¿ä½ çš„ç”µè„‘å’Œæ‰‹æœºè®¾å¤‡åœ¨åŒä¸€ä¸ª `Wi-Fi` ç¯å¢ƒä¸‹

  * åœ¨è®¾å¤‡ä¸Šè¿è¡Œä½ çš„ `React Native` åº”ç”¨ï¼›å’Œæ‰“å¼€å…¶å®ƒ `App` ä¸€æ ·æ“ä½œ

  * ä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ª `çº¢å±` é”™è¯¯æç¤ºï¼šè¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸‹é¢çš„æ­¥éª¤ä¼šè§£å†³è¿™ä¸ªæŠ¥é”™

  * æ‘‡æ™ƒè®¾å¤‡ï¼Œæˆ–è€…è¿è¡Œ `adb shell input keyevent 82` ï¼Œå¯ä»¥æ‰“å¼€ `å¼€å‘è€…èœå•`

  * ç‚¹å‡» `Dev Settings` -> `Debug server host for device`

  * è¾“å…¥ä½ ç”µè„‘çš„ `IP` åœ°å€å’Œç«¯å£å·ï¼ˆè­¬å¦‚ `10.0.1.1:8081` ï¼‰

    * åœ¨ `Mac` ä¸Šï¼Œä½ å¯ä»¥åœ¨ `ç³»ç»Ÿè®¾ç½® - ç½‘ç»œ` é‡Œæ‰¾æŸ¥è¯¢ä½ çš„ `IP` åœ°å€

    * åœ¨ `Windows` ä¸Šï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦å¹¶è¾“å…¥ `ipconfig` æ¥æŸ¥è¯¢ä½ çš„ `IP` åœ°å€

    * åœ¨ `Linux` ä¸Šä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥ `ifconfig` æ¥æŸ¥è¯¢ä½ çš„ `IP` åœ°å€

  * å›åˆ° `å¼€å‘è€…èœå•` ç„¶åé€‰æ‹© `Reload JS`

ç°åœ¨å¯ä»¥ä»[ã€`å¼€å‘äººå‘˜èœå•`ã€‘](https://reactnative.cn/docs/debugging#accessing-the-in-app-developer-menu)å¯ç”¨å®æ—¶é‡æ–°åŠ è½½ï¼Œæ¯å½“æ‚¨çš„ `javascript` ä»£ç æ›´æ”¹æ—¶ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°†é‡æ–°åŠ è½½

### ä¸ºç”Ÿäº§æ„å»ºåº”ç”¨ç¨‹åº

> ä½ å·²ç»ç”¨ `React native` æ„å»ºäº†ä¸€ä¸ªå¾ˆæ£’çš„åº”ç”¨ç¨‹åºï¼Œä½ ç°åœ¨å¾ˆæƒ³æŠŠå®ƒæ”¾åœ¨æ¸¸æˆå•†åº—é‡Œ

è¿™ä¸€è¿‡ç¨‹ä¸å…¶ä»–ä»»ä½•æœ¬åœ°Androidåº”ç”¨ç¨‹åºç›¸åŒï¼Œè¿˜è¦è€ƒè™‘ä¸€äº›é¢å¤–çš„å› ç´ [ã€æŒ‰ç…§ç”Ÿæˆå·²ç­¾å `APK` çš„æŒ‡å—äº†è§£æ›´å¤šä¿¡æ¯ã€‘](https://reactnative.cn/docs/signed-apk-android)

## æ›´æ–°

æ—¶åˆ»å°† `React Native` æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥è·å¾—æ›´å¤š `API` ã€è§†å›¾ã€å¼€å‘è€…å·¥å…·ä»¥åŠå…¶ä»–ä¸€äº›å¥½ä¸œè¥¿

> è¯‘æ³¨ï¼šå®˜æ–¹å¼€å‘ä»»åŠ¡ç¹é‡ï¼Œäººæ‰‹ç´§ç¼ºï¼Œå‡ ä¹ä¸ä¼šå¯¹æ—§ç‰ˆæœ¬æä¾›ç»´æŠ¤æ”¯æŒï¼Œæ‰€ä»¥å³ä¾¿æ›´æ–°å¯èƒ½å¸¦æ¥ä¸€äº›å…¼å®¹ä¸Šçš„å˜æ›´ï¼Œä½†å»ºè®®å¼€å‘è€…è¿˜æ˜¯å°½ä¸€åˆ‡å¯èƒ½ç¬¬ä¸€æ—¶é—´æ›´æ–°

ç”±äºä¸€ä¸ªå®Œæ•´çš„ `React Native` é¡¹ç›®æ˜¯ç”± `Android` é¡¹ç›®ã€`iOS` é¡¹ç›®å’Œ `JavaScript` é¡¹ç›®ç»„æˆçš„ï¼Œä¸”éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ª `npm` åŒ…ä¸­ï¼Œæ‰€ä»¥å‡çº§å¯èƒ½ä¼šæœ‰ä¸€äº›éº»çƒ¦

* ä½ å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨ `react-native info` å‘½ä»¤æŸ¥çœ‹å½“å‰çš„ç‰ˆæœ¬

* ä»¥ä¸‹æ˜¯ç›®å‰æ‰€éœ€çš„å‡çº§æ­¥éª¤ï¼š

  * [ã€è‹±æ–‡æ›´æ–°æ—¥å¿—ç‚¹è¿™é‡ŒæŸ¥çœ‹ã€‘](https://github.com/facebook/react-native/releases)

  * [ã€ä¸­æ–‡æ›´æ–°æ—¥å¿—ç‚¹è¿™é‡ŒæŸ¥çœ‹ã€‘](http://bbs.reactnative.cn/category/1)

### å¦‚æœä½ å½“å‰çš„ç‰ˆæœ¬å¤§äºç­‰äº `0.59`

> åŸºäº `Git` å‡çº§

[ã€ `react native cli` ã€‘](https://github.com/react-native-community/react-native-cli)é™„å¸¦äº† `å‡çº§` å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æä¾›äº†ä¸€æ­¥æ“ä½œï¼Œä»¥æœ€å°‘çš„å†²çªå‡çº§æºæ–‡ä»¶ï¼Œæ„Ÿè°¢[ã€ `rn-diff-purge` ã€‘](https://github.com/react-native-community/rn-diff-purge)é¡¹ç›®

* ç¡®ä¿æ‚¨çš„é¡¹ç›®ä½¿ç”¨ `Git`

  * æ­¤æ­¥éª¤ä»…é€‚ç”¨äºè¿˜æœªä½¿ç”¨ `Git` çš„é¡¹ç›®

  * å¦‚æœä½ ç”¨çš„è¯å°±è·³è¿‡å®ƒ

  * å¦‚æœæ‚¨çš„é¡¹ç›®è¿˜æœªä½¿ç”¨ `Git` ï¼Œåˆå§‹åŒ–å®ƒå¹¶æäº¤ï¼š

    ```
    git init
    git add .
    git commit -m "upgrade RN"
    ```

  * å‡çº§å®Œæˆå¹¶è§£å†³å†²çªåï¼Œå¯ä»¥åˆ é™¤ `.git` ç›®å½•

* è¿è¡Œå‡çº§å‘½ä»¤

  * è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„è¿‡ç¨‹ï¼š

    ```
    react-native upgrade
    ```

  * æ‚¨å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šä¸€ä¸ª `React Native` ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œè¦å‡çº§åˆ° `0.59.0-rc.0` ï¼Œè¯·è¿è¡Œï¼š

    ```
    react-native upgrade 0.59.0-rc.0
    ```

  * è¯¥é¡¹ç›®ä½¿ç”¨ `git apply` è¿›è¡Œå‡çº§ï¼Œå¹¶è¿›è¡Œä¸‰å‘åˆå¹¶

    * è¿™å°±æ˜¯å¯èƒ½å‘ç”Ÿçš„åŸå› ï¼Œä½ éœ€è¦è§£å†³ä¸€äº›å†²çª

* è§£å†³å†²çª

  * çªæ–‡ä»¶åŒ…æ‹¬åˆ†éš”ç¬¦ï¼Œè¿™äº›åˆ†éš”ç¬¦å¯ä»¥å¾ˆæ¸…æ¥šåœ°è¯´æ˜æ›´æ”¹çš„æ¥æºï¼Œä¾‹å¦‚ï¼š

    ```
    13B07F951A680F5B00A75B9A /* Release */ = {
      isa = XCBuildConfiguration;
      buildSettings = {
        ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
    <<<<<<< ours
        CODE_SIGN_IDENTITY = "iPhone Developer";
        FRAMEWORK_SEARCH_PATHS = (
          "$(inherited)",
          "$(PROJECT_DIR)/HockeySDK.embeddedframework",
          "$(PROJECT_DIR)/HockeySDK-iOS/HockeySDK.embeddedframework",
        );
    =======
        CURRENT_PROJECT_VERSION = 1;
    >>>>>>> theirs
        HEADER_SEARCH_PATHS = (
          "$(inherited)",
          /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include,
          "$(SRCROOT)/../node_modules/react-native/React/**",
          "$(SRCROOT)/../node_modules/react-native-code-push/ios/CodePush/**",
        );
    ```

    * æ‚¨å¯ä»¥å°† `ours` è§†ä¸º `æ‚¨çš„å›¢é˜Ÿ` ï¼Œå°† `theirs` è§†ä¸º `React Native å¼€å‘å›¢é˜Ÿ`

### å…¶ä»–ç‰ˆæœ¬

å¦‚æœä½ å½“å‰çš„ç‰ˆæœ¬ä½äº `0.59` ï¼Œ æˆ–è€…æƒ³é™çº§åˆ° `0.59` ä»¥ä¸‹ï¼Œ æˆ–ä¸Šè¿°å‡çº§æ–¹æ³•å¯¹ä½ æ— æ•ˆï¼š

#### æ›´æ–° `react-native` çš„ `node` ä¾èµ–åŒ…

è¯·ä½¿ç”¨ `npm info react-native` å‘½ä»¤æŸ¥çœ‹å…¶å½“å‰æœ€æ–°ç‰ˆæœ¬

* æ‰“å¼€é¡¹ç›®ç›®å½•ä¸‹çš„ `package.json` æ–‡ä»¶

* ç„¶ååœ¨ `dependencies` æ¨¡å—ä¸‹æ‰¾åˆ° `react-native`

* å°†å½“å‰ç‰ˆæœ¬å·æ”¹åˆ°ä½ æ‰€éœ€è¦çš„å·²ç»å‘å¸ƒçš„ç‰ˆæœ¬

* ç„¶ååœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š

```
$ npm install
```

> æ³¨æ„ï¼š`react-native` ä¾èµ–äºç‰¹å®šç‰ˆæœ¬çš„ï¼Œé«˜äºæˆ–ä½äºæŸä¸ªèŒƒå›´éƒ½ä¸å¯ä»¥
>> æœ¬æ–‡æ— æ³•åœ¨è¿™é‡Œåˆ—å‡ºæ‰€æœ‰ `react native` å’Œå¯¹åº”çš„ `react` æ¨¡å—ç‰ˆæœ¬è¦æ±‚
>>> åªèƒ½æé†’è¯»è€…å…ˆå°è¯•æ‰§è¡Œ `npm install` ï¼Œç„¶åæ³¨æ„è§‚å¯Ÿå®‰è£…è¿‡ç¨‹ä¸­çš„æŠ¥é”™ä¿¡æ¯ï¼Œä¾‹å¦‚ `require react@æŸ.æŸ.æŸç‰ˆæœ¬, but none was installed`
>>>> ç„¶åæ ¹æ®è¿™æ ·çš„æç¤ºï¼Œæ‰§è¡Œ `npm install react@æŸ.æŸ.æŸç‰ˆæœ¬`

#### å‡çº§é¡¹ç›®æ¨¡æ¿æ–‡ä»¶

æ–°ç‰ˆæœ¬çš„ `npm` åŒ…é€šå¸¸è¿˜ä¼šåŒ…å«ä¸€äº›åŠ¨æ€ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯åœ¨è¿è¡Œ `react-native init` åˆ›å»ºæ–°é¡¹ç›®æ—¶ç”Ÿæˆçš„ï¼Œæ¯”å¦‚ `iOS` å’Œ `Android` çš„é¡¹ç›®æ–‡ä»¶

* ä¸ºäº†ä½¿è€é¡¹ç›®çš„é¡¹ç›®æ–‡ä»¶ä¹Ÿèƒ½å¾—åˆ°æ›´æ–°ï¼ˆä¸é‡æ–° `init` ï¼‰ï¼Œä½ éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š

```
$ react-native upgrade
```

> è¯‘æ³¨ï¼šå¦‚æœä½ æœ‰ä¿®æ”¹åŸç”Ÿä»£ç ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ `upgrade` å‡çº§å‰ï¼Œ`å…ˆå¤‡ä»½ï¼Œå†è¦†ç›–`
>> è¦†ç›–å®Œæˆåï¼Œä½¿ç”¨æ¯”å¯¹å·¥å…·æ‰¾å‡ºå·®å¼‚ï¼Œå°†ä½ ä¹‹å‰ä¿®æ”¹çš„ä»£ç é€æ­¥æ¬è¿åˆ°æ–°æ–‡ä»¶ä¸­

è¿™ä¸€å‘½ä»¤ä¼šæ£€æŸ¥æœ€æ–°çš„é¡¹ç›®æ¨¡æ¿ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

* å¦‚æœæ˜¯æ–°æ·»åŠ çš„æ–‡ä»¶ï¼Œåˆ™ç›´æ¥åˆ›å»º

* å¦‚æœæ–‡ä»¶å’Œå½“å‰ç‰ˆæœ¬çš„æ–‡ä»¶ç›¸åŒï¼Œåˆ™è·³è¿‡

* å¦‚æœæ–‡ä»¶å’Œå½“å‰ç‰ˆæœ¬çš„æ–‡ä»¶ä¸åŒï¼Œåˆ™ä¼šæç¤ºä½ ä¸€äº›é€‰é¡¹ï¼š

  * æŸ¥çœ‹ä¸¤è€…çš„ä¸åŒï¼Œé€‰æ‹©ä¿ç•™ä½ çš„ç‰ˆæœ¬æˆ–æ˜¯ç”¨æ–°çš„æ¨¡æ¿è¦†ç›–

  * ä½ å¯ä»¥æŒ‰ä¸‹ `h` é”®æ¥æŸ¥çœ‹æ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤

### æ‰‹åŠ¨å‡çº§

> å‡çº§è¿‡ç¨‹å¾€å¾€ä¼šç¢°åˆ°å¾ˆå¤šé—®é¢˜ï¼Œå°¤å…¶æ¶‰åŠåˆ°ä¼—å¤šç¬¬ä¸‰æ–¹æ—¶ï¼Œå¤„ç†èµ·æ¥å°¤ä¸ºè´¹æ—¶è´¹åŠ›

æ­¤æ—¶å»ºè®®å¯ä»¥å°è¯•ç›´æ¥ `init` ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œç„¶åæŠŠç°æœ‰é¡¹ç›®çš„ `JavaScript` ä»£ç è¿›è¡Œæ‰‹åŠ¨è¿ç§»

## åŸç”Ÿæ¨¡å—é…ç½®

> æœ¬æœºæ¨¡å—é€šå¸¸ä½œä¸º `npm` åŒ…åˆ†å‘ï¼Œé™¤äº†é€šå¸¸çš„ `javascript` ä¹‹å¤–ï¼Œæ¯ä¸ªå¹³å°è¿˜å°†åŒ…å«ä¸€äº›æœ¬æœºä»£ç 
>> è¦äº†è§£æœ‰å…³ `npm` åŒ…çš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°[ã€æœ¬æŒ‡å—ã€‘](https://docs.npmjs.com/getting-started/publishing-npm-packages)å¾ˆæœ‰ç”¨

è¦ä½¿ç”¨æœ¬æœºæ¨¡å—çš„åŸºæœ¬é¡¹ç›®ç»“æ„è¿›è¡Œè®¾ç½®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…· `react native create library`

* ä½ å¯ä»¥ç»§ç»­æ·±å…¥ç ”ç©¶å®ƒçš„è¿ä½œæ–¹å¼

* å¯¹äºæˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦ï¼š

  ```
  $ npm install -g react-native-create-library
  $ react-native-create-library MyLibrary
  ```

  * å…¶ä¸­ `mylibrary` æ˜¯æ–°æ¨¡å—çš„åç§°

  * å®Œæˆæ­¤æ“ä½œåï¼Œæ‚¨å°†å¯¼èˆªåˆ° `mylibrary` æ–‡ä»¶å¤¹

  * å¹¶é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œå®‰è£… `npm` åŒ…ï¼Œä½¿å…¶åœ¨æœ¬åœ°å¯ä¾›æ‚¨çš„è®¡ç®—æœºä½¿ç”¨ï¼š

    ```
    $ npm install
    ```

* å®Œæˆåï¼Œæ‚¨å¯ä»¥è½¬åˆ°æ‚¨çš„ä¸» `React` åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹

  * é€šè¿‡æ‰§è¡Œ `react native init myapp` åˆ›å»º

* å°†æ–°åˆ›å»ºçš„æ¨¡å—ä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ° `package.json` ä¸­

* è¿è¡Œ `npm` å®‰è£…ï¼Œå°†å…¶ä»æœ¬åœ° `npm` å­˜å‚¨åº“ä¸­å¸¦æ¥

ä¹‹åï¼Œæ‚¨å°†èƒ½å¤Ÿç»§ç»­ä½¿ç”¨æœ¬æœºæ¨¡å— `iOS` æˆ–æœ¬æœºæ¨¡å— `Android` æ¥æ·»åŠ ä¸€äº›ä»£ç 

> å¯ä»¥é˜…è¯» `mylibrary` ç›®å½•ä¸­çš„ `README.md` æ–‡ä»¶ï¼Œä»¥è·å–æœ‰å…³å¦‚ä½•åŒ…å«é¡¹ç›®çš„å¹³å°ç‰¹å®šè¯´æ˜

## å¤šå¹³å°æ”¯æŒ

`React Native` ä¸ä»…é€‚ç”¨äº `Android` å’Œ `iOS` ï¼Œè¿˜æä¾›ç¤¾åŒºæ”¯æŒçš„é¡¹ç›®ï¼Œå¯å°†å…¶åº”ç”¨äºå…¶ä»–å¹³å°ï¼Œå¦‚ï¼š

* [ã€ `React Native Windows` ã€‘](https://github.com/Microsoft/react-native-windows)

  å¯¹å¾®è½¯çš„é€šç”¨ `Windows` å¹³å°ï¼ˆ `UWP` ï¼‰å’Œ `Windows` æ¼”ç¤ºåŸºé‡‘ä¼šï¼ˆ `WPF` ï¼‰ä½œå‡ºæœ¬åœ°æ”¯æŒ

* [ã€ `React Native DOM` ã€‘](https://github.com/vincentriemer/react-native-dom)

  ä¸€ä¸ªå®éªŒæ€§çš„ã€å…¨é¢çš„å“åº”ç½‘ç»œæœ¬åœ°ç«¯å£

  ä¸è¦ä¸å…·æœ‰ä¸åŒç›®æ ‡çš„[ã€ `React Native Web` ã€‘](https://github.com/necolas/react-native-web)æ··æ·†

* [ã€ `React Native Desktop` ã€‘](https://github.com/status-im/react-native-desktop)

  ä¸€ä¸ªæ—¨åœ¨é€šè¿‡ `Qt's QML` å°†æœ¬åœ°ååº”å¼•å…¥æ¡Œé¢çš„é¡¹ç›®

  ä¸å†ç»´æŠ¤çš„[ã€ `React Native Ubuntu` ã€‘](https://github.com/CanonicalLtd/react-native/)åˆ†æ”¯

* [ã€ `React Native macOS` ã€‘](https://github.com/ptmt/react-native-macos)

  é’ˆå¯¹ `macOS` å’Œ `Cocoa` çš„ `React Native` å®éªŒæ€§åˆ†æ”¯

### åˆ›å»ºè‡ªå·±çš„ `React Native` å¹³å°

> ç°åœ¨ï¼Œä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ª `React Native` å¹³å°çš„è¿‡ç¨‹å¹¶æ²¡æœ‰å¾ˆå¥½åœ°è®°å½•ä¸‹æ¥

å³å°†åˆ°æ¥çš„é‡æ–°æ¶æ„[ã€ `fabric` ã€‘](https://facebook.github.io/react-native/blog/2018/06/14/state-of-react-native-2018)çš„ç›®æ ‡ä¹‹ä¸€æ˜¯ä½¿ç»´æŠ¤å¹³å°æ›´å®¹æ˜“

#### `Building`

> ä» `React Native 0.57` å¼€å§‹ï¼Œæ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ `React Native` çš„ `javascript` æ‰“åŒ…å·¥å…·[ã€ `metro` ã€‘](https://facebook.github.io/metro/)æ³¨å†Œæ‚¨çš„ `React Native` å¹³å°
>> è¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡ `--platform` æ¥è¿›è¡Œ `react-native` æ‰“åŒ…ï¼Œå®ƒå°†æŸ¥æ‰¾åç¼€ä¸º `.example.js` çš„ `javascript` æ–‡ä»¶

è¦åœ¨ `RNPM` ä¸­æ³¨å†Œå¹³å°ï¼Œæ¨¡å—çš„åç§°å¿…é¡»ä¸ä»¥ä¸‹æ¨¡å¼ä¹‹ä¸€åŒ¹é…ï¼š

* `react-native-example`

  å®ƒå°†æœç´¢ä» `react native-` å¼€å§‹çš„æ‰€æœ‰é¡¶çº§æ¨¡å—

* `@org/react-native-example`

  å®ƒå°†æœç´¢ä»¥ `react native-` å¼€å¤´çš„æ¨¡å—

  åœ¨ä»»ä½•èŒƒå›´å†…

* `@react-native-example/module`

  å®ƒå°†åœ¨ä½œç”¨åŸŸä¸‹çš„æ‰€æœ‰æ¨¡å—ä¸­æœç´¢ä»¥ `@react native-` å¼€å¤´çš„åç§°

æ‚¨çš„ `package.json` ä¸­ä¹Ÿå¿…é¡»æœ‰è¿™æ ·çš„æ¡ç›®ï¼š

```jsx
{
  "rnpm": {
    "haste": {
      "providesModuleNodeModules": ["react-native-example"],
      "platforms": ["example"]
    }
  }
}
```

* `providesmodulenodemodules`

  æ˜¯å°†æ·»åŠ åˆ°å¿«é€Ÿæ¨¡å—æœç´¢è·¯å¾„çš„æ¨¡å—æ•°ç»„

* `platforms`

  æ˜¯å°†æ·»åŠ ä¸ºæœ‰æ•ˆå¹³å°çš„å¹³å°åç¼€æ•°ç»„

## ä»æºä»£ç ç¼–è¯‘ `React Native`

å¦‚æœä½ æƒ³æå‰åˆå¹¶å®˜æ–¹çš„ä¿®å¤è¡¥ä¸ï¼Œå°è¯•è¿˜æ²¡å‘å¸ƒçš„æœ€æ–°ç‰¹æ€§ï¼Œæˆ–è€…æ·»åŠ ä¸€äº›ä½ è‡ªå·±çš„åŸç”Ÿä»£ç ï¼Œé‚£ä¹ˆå°±éœ€è¦è‡ªå·±ä»æºä»£ç ç¼–è¯‘ `React Native`

### `Android`

#### é¢„å¤‡æ¡ä»¶

åœ¨ `Android Studio` çš„ `SDK Manager` ä¸­å®‰è£…ä»¥ä¸‹ç»„ä»¶ï¼š

* `Android SDK version 28`

  ç¼–è¯‘ `SDK` ç‰ˆæœ¬å·åœ¨ `build.gradle` ä¸­å¯ä»¥æ‰¾åˆ°

* `SDK build tools version 28.0.3`

  ç¼–è¯‘å·¥å…·ç‰ˆæœ¬å·åœ¨ `build.gradle` ä¸­å¯ä»¥æ‰¾åˆ°

* `Android Support Repository >= 28`

* `Android NDK`

  ä¸‹è½½åŠå®‰è£…æŒ‡å—è¯·çœ‹åæ–‡

#### å°† `Gradle` æŒ‡å‘ä½ çš„å®‰å“ `SDK`

ç¬¬ä¸€æ­¥ï¼šåœ¨å‘½ä»¤è¡Œé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡

> æ³¨æ„ï¼šå¯¹äºä¸åŒçš„ `shell` å‘½ä»¤è¡Œï¼Œé…ç½®æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œè¯·æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©ï¼Œä¾‹å¦‚ï¼š

> `bash`
>> `.bash_profile` æˆ– `.bashrc`

> `zsh`
>> `.zprofile` æˆ– `.zshrc`

> `ksh`
>> `.profile` æˆ– `$ENV`

* åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š

  * è¯·å¡«å†™è‡ªå·±çš„å®é™…è·¯å¾„

```jsx
export ANDROID_SDK=/Users/your_unix_name/android-sdk-macosx
export ANDROID_NDK=/Users/your_unix_name/android-ndk/android-ndk-r17c
```

ç¬¬äºŒæ­¥ï¼šåœ¨é¡¹ç›®ç›®å½•çš„ `android` ç›®å½•ä¸‹åˆ›å»º `local.properties` æ–‡ä»¶

* æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

  * æ³¨æ„ï¼š`windows` ä¸‹è·¯å¾„éœ€è¦ä½¿ç”¨ååŒæ–œæ 

```
ndk.dir=æŒ‡å‘android ndkç›®å½•çš„ç»å¯¹è·¯å¾„
```

`Android NDK` çš„ä¸‹è½½é“¾æ¥

> `0.57` ä¹‹å‰ä½¿ç”¨ `r10e` ç‰ˆæœ¬

* [ã€ `Mac OS (64-bit)` ã€‘](http://dl.google.com/android/repository/android-ndk-r17c-darwin-x86_64.zip)

* [ã€ `Linux (64-bit)` ã€‘](http://dl.google.com/android/repository/android-ndk-r17c-linux-x86_64.zip)

* [ã€ `Windows (64-bit)` ã€‘](http://dl.google.com/android/repository/android-ndk-r17c-windows-x86_64.zip)

* [ã€ `Windows (32-bit)` ã€‘](http://dl.google.com/android/repository/android-ndk-r17c-windows-x86.zip)

å®‰è£…è¯´æ˜è¯·å‚è€ƒ[ã€å®˜æ–¹æ–‡æ¡£ã€‘](https://developer.android.com/ndk/index.html)

### ç¼–è¯‘æºä»£ç 

#### ä¸‹è½½ `react-native` æºä»£ç 

* é¦–å…ˆï¼Œåœ¨ä½ çš„åˆ†æ”¯ä»£ç ä¸­å®‰è£… `react-native`

  * ä¾‹å¦‚ä»å®˜æ–¹åœ°å€å®‰è£…ä¸»å¹²ç‰ˆæœ¬ï¼š

  ```
  npm install --save github:facebook/react-native#master
  ```

* æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠä»“åº“å…‹éš†åˆ°ä½ çš„ `node_modules` ç›®å½•

  * ç„¶åè¿è¡Œ `npm install` è¿›è¡Œå®‰è£…

#### æ·»åŠ  `gradle` ä¾èµ–

åœ¨ `android/build.gradle` ä¸­æ·»åŠ  `gradle-download-task` ä¾èµ–

```
...
  dependencies {
    classpath 'com.android.tools.build:gradle:3.2.1'
    classpath 'de.undercouch:gradle-download-task:3.4.3'

    // æ³¨æ„ï¼šä¸è¦æŠŠä½ çš„åº”ç”¨çš„ä¾èµ–æ”¾åœ¨è¿™é‡Œï¼›
    // å®ƒä»¬åº”è¯¥æ”¾åœ¨å„è‡ªæ¨¡å—çš„build.gradleæ–‡ä»¶ä¸­
  }
...
```

#### æ·»åŠ ï¼š`ReactAndroid` é¡¹ç›®

* åœ¨ `android/settings.gradle` ä¸­æ·»åŠ ï¼š`ReactAndroid` é¡¹ç›®

```
...
include ':ReactAndroid'

project(':ReactAndroid').projectDir = new File(
  rootProject.projectDir, '../node_modules/react-native/ReactAndroid')
...
```

* ä¿®æ”¹ä½ çš„ `android/app/build.gradle` æ–‡ä»¶ï¼Œä½¿ç”¨ï¼š`ReactAndroid` æ›¿æ¢é¢„ç¼–è¯‘åº“

  * ä¾‹å¦‚ç”¨ `implementation project(':ReactAndroid')` æ›¿æ¢ `implementation 'com.facebook.react:react-native:+'`

```
...
dependencies {
  implementation fileTree(dir: 'libs', include: ['*.jar'])
  implementation 'com.android.support:appcompat-v7:${rootProject.ext.supportLibVersion}'

  implementation project(':ReactAndroid')

  ...
}
...
```

#### è®©ç¬¬ä¸‰æ–¹æ¨¡å—ä½¿ç”¨ä½ çš„åˆ†æ”¯

> å¦‚æœä½ ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ `React Native` æ¨¡å—ï¼Œä½ éœ€è¦é‡å†™å®ƒä»¬çš„ä¾èµ–ä»¥é¿å…å®ƒä»¬ä»ç„¶æ‰“åŒ…å®˜æ–¹çš„é¢„ç¼–è¯‘åº“
>> å¦åˆ™å½“ä½ ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ - `Error: more than one library with package name 'com.facebook.react'`
>>> é”™è¯¯ï¼šæœ‰å‡ ä¸ªé‡åçš„ `com.facebook.react` çš„åŒ…

ä¿®æ”¹ä½ çš„ `android/app/build.gradle` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```
configurations.all {
  exclude group: 'com.facebook.react', module: 'react-native'
}
```

#### åœ¨ Android Studio ä¸­ç¼–è¯‘

åœ¨ `Android Studio` æ¬¢è¿é¡µä¸­é€‰æ‹© `Import project` ï¼Œéšåé€‰æ‹©æ‚¨åº”ç”¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹

* æ‚¨è¿˜éœ€è¦ä½¿ç”¨ `Run` æŒ‰é’®æ¥åœ¨è®¾å¤‡ä¸Šè¿è¡Œæ‚¨çš„ `app`

  > è¯‘æ³¨ï¼š`Android Studio` ä¸­ç»¿è‰²çš„è¿è¡ŒæŒ‰é’®

* æ­¤å¤– `Android Studio` ä¸ä¼šè‡ªåŠ¨å¼€å¯æœåŠ¡

  > ä½ è¿˜éœ€è¦é€šè¿‡ `npm start` æ¥å¯åŠ¨å¼€å‘æœåŠ¡

#### å…¶ä»–æ³¨æ„äº‹é¡¹

> ä»æºç è¿›è¡Œç¼–è¯‘å°†ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€æ¬¡ç¼–è¯‘ï¼Œéœ€è¦ä¸‹è½½æ¥è¿‘ `200M` çš„æ–‡ä»¶ç„¶åç¼–è¯‘åŸç”Ÿä»£ç 
>> æ¯æ¬¡ä½ åœ¨è‡ªå·±çš„ä»“åº“æ›´æ–° `react-native` ç‰ˆæœ¬æ—¶ï¼Œæ„å»ºçš„ç›®å½•å¯èƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½éœ€è¦é‡æ–°ä¸‹è½½

ä¸ºäº†é¿å…æ„å»ºç›®å½•è¢«åˆ ï¼Œä½ éœ€è¦ç¼–è¾‘ `~/.gradle/init.gradle` æ–‡ä»¶æ¥ä¿®æ”¹æ„å»ºç›®å½•è·¯å¾„

```
gradle.projectsLoaded {
    rootProject.allprojects {
        buildDir = "/path/to/build/directory/${rootProject.name}/${project.name}"
    }
}
```

#### æ•…éšœæ’é™¤

Qï¼š`ndk build` ä¸­çš„ `Gradle build` å¤±è´¥

Aï¼šè¯·å‚è§ä¸Šé¢æœ‰å…³ `local.properties` æ–‡ä»¶çš„éƒ¨åˆ†

### æµ‹è¯•æ‚¨çš„æ›´æ”¹

å¦‚æœæ‚¨å¯¹ `React Native` è¿›è¡Œäº†æ›´æ”¹å¹¶æäº¤äº†æ‹‰è¯·æ±‚ï¼Œåˆ™æ‰€æœ‰æµ‹è¯•éƒ½å°†æ ¹æ®æ‹‰è¯·æ±‚è‡ªåŠ¨è¿è¡Œ

> è¦åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•ï¼Œè¯·å‚é˜…[ã€è¿è¡Œæµ‹è¯•ã€‘](https://reactnative.cn/docs/testing)

### ä½¿æ›´æ”¹å¯ç”¨

è¯·å‚é˜…[ã€å‘å¸ƒæ‚¨è‡ªå·±ç‰ˆæœ¬çš„ `react native` ã€‘](https://reactnative.cn/docs/publishing-forks)ï¼Œä»¥è·å–ä½¿æ‚¨çš„æ›´æ”¹å¯ç”¨äºæ‚¨å’Œå…¶ä»–åº”ç”¨ç¨‹åºé¡¹ç›®çš„å‡ ä¸ªé€‰é¡¹

## å‘å¸ƒè‡ªå·±å®šåˆ¶çš„ `React Native` åŒ…

### `TL;DR`

æœ‰ä¸€ä¸ª `Docker` æ˜ åƒå¯ä»¥å¸®åŠ©æ‚¨æ„å»ºæ‰€éœ€çš„Androidæºä»£ç ï¼Œè€Œæ— éœ€å®‰è£…ä»»ä½•å…¶ä»–å·¥å…·

> é™¤äº†[ã€ `Docker` ã€‘](https://docs.docker.com/install/)ä¹‹å¤–ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªå®Œå…¨åŠŸèƒ½çš„ `React Native` åˆ†æ”¯å‘è¡Œç‰ˆæäº¤ç»™ `Git` åˆ†æ”¯

ä» `React Native` çš„[ã€ `repo` ã€‘](https://github.com/facebook/react-native)åˆ†æ”¯è¿è¡Œæ­¤å‡½æ•°

```
git checkout -d release/my-react-native-release
docker run --rm --name rn-build -v $PWD:/pwd -w /pwd reactnativecommunity/react-native-android /bin/sh -c "./gradlew installArchives"
git add android --force
git commit -a -m 'my react native forked release'
git push
```

åœ¨ `app` é¡¹ç›®çš„ `package.json` ä¸­å®‰è£…

```
"dependencies": {
  ...
  "react-native": "myName/react-native#release/my-react-native-release"
}
```

### ç†è®ºåŸºç¡€

ä½¿ç”¨ `React Native` çš„å»ºè®®æ–¹æ³•æ˜¯å§‹ç»ˆæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

* åœ¨æ—§ç‰ˆæœ¬ä¸Šä¸æä¾›æ”¯æŒ

  * å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè´¡çŒ®è€…ä¼šå§‹ç»ˆè¦æ±‚æ‚¨åœ¨æŸ¥çœ‹ç‰¹å®šé—®é¢˜ä¹‹å‰å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

* ä½†æ˜¯ï¼Œæœ‰æ—¶æ‚¨ä¼šæš‚æ—¶åœç•™åœ¨æ—§çš„ `React Native` ç‰ˆæœ¬ä¸Š

  * ä½†æ˜¯æ‚¨è¿«åˆ‡éœ€è¦ä»è¾ƒæ–°ç‰ˆæœ¬ï¼ˆé”™è¯¯ä¿®å¤ï¼‰ä¸­è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œè€Œæ— éœ€ç«‹å³è¿›è¡Œå®Œå…¨å‡çº§

  * æ ¹æ®å®šä¹‰ï¼Œè¿™ç§æƒ…å†µåº”è¯¥æ˜¯çŸ­æš‚çš„ï¼Œä¸€æ—¦æœ‰æ—¶é—´ï¼ŒçœŸæ­£çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

è€ƒè™‘åˆ° `React Native` çš„çŸ­æš‚åˆ†æ”¯çš„ç›®æ ‡ï¼Œæ‚¨å¯ä»¥å‘å¸ƒè‡ªå·±çš„ `React Native` ç‰ˆæœ¬

* `Facebook/React Native` å­˜å‚¨åº“åŒ…å«ç›´æ¥ç”¨ä½œ `Git` ä¾èµ–é¡¹æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä½† `Android React Native` åº“äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆ `.aar` ï¼‰é™¤å¤–

## å…¶ä»–å†…å®¹å¯è‡ªè¡Œå‰å¾€å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹

* [ã€ `Building` ã€‘](https://reactnative.cn/docs/publishing-forks/#building)

* [ã€æµ‹è¯•æ‚¨çš„æ›´æ”¹ã€‘](https://reactnative.cn/docs/testing/#Testing%20your%20Changes)

* [ã€ä½¿ç”¨æŒ‡å—( `iOS` )ã€‘](https://reactnative.cn/docs/native-modules-ios/#åŸç”Ÿæ¨¡å—)

* [ã€ä½¿ç”¨æŒ‡å—( `Android` )ã€‘](https://reactnative.cn/docs/native-modules-android/#åŸç”Ÿæ¨¡å—)


# ç»„ä»¶

## `ActivityIndicator`

[ã€ æŸ¥çœ‹å®˜æ–¹ `ActivityIndicator` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/activityindicator/)

æ˜¾ç¤ºä¸€ä¸ªåœ†å½¢çš„ `loading` æç¤ºç¬¦å·

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `animating`

  æ˜¯å¦è¦æ˜¾ç¤ºæŒ‡ç¤ºå™¨åŠ¨ç”»ï¼Œé»˜è®¤ä¸º `true` `è¡¨ç¤ºæ˜¾ç¤ºï¼Œfalse` åˆ™éšè—

* `color`

  æ»šè½®çš„å‰æ™¯é¢œè‰²ï¼ˆé»˜è®¤ä¸ºç°è‰²ï¼‰

* `size`

  æŒ‡ç¤ºå™¨çš„å¤§å°ï¼Œé»˜è®¤ä¸º `small`

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `small`
  * `large`
  * å…·ä½“çš„ `number` æ•°å€¼

  > ç›®å‰åªèƒ½åœ¨ `Android` ä¸Šè®¾å®šå…·ä½“çš„æ•°å€¼

* `hidesWhenStopped`

  åœ¨ `animating` ä¸º `false` çš„æ—¶å€™ï¼Œæ˜¯å¦è¦éšè—æŒ‡ç¤ºå™¨ï¼ˆé»˜è®¤ä¸º `true` ï¼‰

  > å¦‚æœ `animating` å’Œ `hidesWhenStopped` éƒ½ä¸º `false` ï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªé™æ­¢çš„æŒ‡ç¤ºå™¨

## `Button`

[ã€ æŸ¥çœ‹å®˜æ–¹ `Button` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/button/)

ä¸€ä¸ªç®€å•çš„è·¨å¹³å°çš„æŒ‰é’®ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›ç®€å•çš„å®šåˆ¶

![å›¾ç‰‡](https://reactnative.cn/docs/assets/buttonExample.png)

* è¿™ä¸ªç»„ä»¶çš„æ ·å¼æ˜¯å›ºå®šçš„

* æ‰€ä»¥å¦‚æœå®ƒçš„å¤–è§‚å¹¶ä¸æ€ä¹ˆæ­é…ä½ çš„è®¾è®¡

* é‚£ä½ éœ€è¦ä½¿ç”¨ä»¥ä¸‹ç»„ä»¶ä¹‹ä¸€æ¥å®šåˆ¶è‡ªå·±æ‰€éœ€è¦çš„æŒ‰é’®ï¼š

  * `TouchableOpacity` ç»„ä»¶

  * æˆ–æ˜¯ `TouchableNativeFeedback` ç»„ä»¶

* è§†é¢‘æ•™ç¨‹[ã€å¦‚ä½•åˆ¶ä½œä¸€ä¸ªæŒ‰é’®ã€‘](http://v.youku.com/v_show/id_XMTQ5OTE3MjkzNg==.html?f=26822355&from=y1.7-1.3)è®²è¿°äº†å®Œæ•´çš„è¿‡ç¨‹

  * æˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨ `github.com` ç½‘ç«™ä¸Šæœç´¢ `react native button` æ¥çœ‹çœ‹ç¤¾åŒºå…¶ä»–äººçš„ä½œå“

ç¤ºä¾‹ï¼š

```jsx
import { Button } from 'react-native';
...

<Button
  onPress={onPressLearnMore}
  title="Learn More"
  color="#841584"
  accessibilityLabel="Learn more about this purple button"
/>
```

### æŸ¥çœ‹å±æ€§ `Props`

* `onPress`

  ç”¨æˆ·ç‚¹å‡»æ­¤æŒ‰é’®æ—¶æ‰€è°ƒç”¨çš„å¤„ç†å‡½æ•°

* `title`

  æŒ‰é’®å†…æ˜¾ç¤ºçš„æ–‡æœ¬

* `accessibilityLabel`

  ç”¨äºç»™æ®‹éšœäººå£«æ˜¾ç¤ºçš„æ–‡æœ¬ï¼ˆæ¯”å¦‚è¯»å±åº”ç”¨å¯èƒ½ä¼šè¯»å–è¿™ä¸€å†…å®¹ï¼‰

* `color`

  æ–‡æœ¬çš„é¢œè‰²( `iOS` )

  æˆ–æ˜¯æŒ‰é’®çš„èƒŒæ™¯è‰²( `Android` )

* `disabled`

  è®¾ç½®ä¸º `true` æ—¶æ­¤æŒ‰é’®å°†ä¸å¯ç‚¹å‡»ï¼Œé»˜è®¤ä¸º `false`

* `testID`

  ç”¨æ¥åœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®šä½æ­¤è§†å›¾

* `hasTVPreferredFocus`

  ï¼ˆä»…é™ `Apple TV` ï¼‰`TV` é¦–é€‰ç„¦ç‚¹ï¼ˆæœ‰å…³è§†å›¾ç»„ä»¶ï¼Œè¯·å‚é˜…æ–‡æ¡£ï¼‰

  > ä»…é™ `iOS` å¹³å°

## `DatePickerIOS`

[ã€ æŸ¥çœ‹å®˜æ–¹ `DatePickerIOS` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/datepickerios/)

> ä½¿ç”¨ `DatePickerIOS` æ¥åœ¨ `iOS` å¹³å°ä¸Šæ¸²æŸ“ä¸€ä¸ª **`æ—¥æœŸ/æ—¶é—´é€‰æ‹©å™¨`**

è¿™æ˜¯ä¸€ä¸ªå—çº¦æŸçš„( `Controlled` )ç»„ä»¶ï¼š

* æ‰€ä»¥ä½ å¿…é¡»ç›‘å¬ `onDateChange` å›è°ƒå‡½æ•°å¹¶ä¸”åŠæ—¶æ›´æ–° `date` å±æ€§æ¥ä½¿å¾—ç»„ä»¶æ›´æ–°

* å¦åˆ™ç”¨æˆ·çš„ä¿®æ”¹ä¼šç«‹åˆ»è¢«æ’¤é”€æ¥ç¡®ä¿å½“å‰æ˜¾ç¤ºå€¼å’Œ `props.date` ä¸€è‡´

ç¤ºä¾‹ï¼š

```jsx
import React, { Component } from 'react'
import {
  DatePickerIOS,
  View,
  StyleSheet,
} from 'react-native'

export default class App extends Component {
  constructor(props) {
    super(props);
    this.state = { chosenDate: new Date() };

    this.setDate = this.setDate.bind(this);
  }

  setDate(newDate) {
    this.setState({chosenDate: newDate})
  }

  render() {
    return (
      <View style={styles.container}>
        <DatePickerIOS
          date={this.state.chosenDate}
          onDateChange={this.setDate}
        />
      </View>
    )
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center'
  },
})
```

![å›¾ç‰‡](https://reactnative.cn/docs/assets/DatePickerIOS/example.gif)

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `date`

  å½“å‰è¢«é€‰ä¸­çš„æ—¥æœŸ

* `onDateChange`

  æ—¥æœŸ/æ—¶é—´å˜åŒ–çš„ç›‘å¬å‡½æ•°

  å½“ç”¨æˆ·ä¿®æ”¹æ—¥æœŸæˆ–æ—¶é—´æ—¶è°ƒç”¨æ­¤å›è°ƒå‡½æ•°

  å”¯ä¸€çš„å‚æ•°æ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œè¡¨ç¤ºæ–°çš„æ—¥æœŸå’Œæ—¶é—´

* `maximumDate`

  å¯é€‰çš„æœ€å¤§æ—¥æœŸ

  é™åˆ¶å¯é€‰çš„æ—¥æœŸ/æ—¶é—´èŒƒå›´

  æœ€å¤§æ—¥æœŸè®¾ç½®ä¸º `2017å¹´12æœˆ31æ—¥` çš„ç¤ºä¾‹ï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/DatePickerIOS/maximumDate.gif)

* `minimumDate`

  å¯é€‰çš„æœ€å°æ—¥æœŸ

  é™åˆ¶å¯é€‰çš„æ—¥æœŸ/æ—¶é—´èŒƒå›´

* `minuteInterval`

  å¯é€‰çš„æœ€å°çš„åˆ†é’Ÿå•ä½

  å¯é€‰å€¼èŒƒå›´ï¼š`1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30`

  `MinuteInterval` è®¾ç½®ä¸º `10` çš„ç¤ºä¾‹ï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/DatePickerIOS/minuteInterval.png)

* `mode`

  é€‰æ‹©å™¨æ¨¡å¼

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `date`
  * `time`
  * `datetime`

  æ¨¡å¼è®¾ç½®ä¸º **`æ—¥æœŸ`** ã€**`æ—¶é—´`** å’Œ **`æ—¥æœŸæ—¶é—´`** çš„ç¤ºä¾‹ï¼š

![å›¾ç‰‡](https://reactnative.cn/docs/assets/DatePickerIOS/mode.png)

* `locale`

  æ—¥æœŸé€‰å–å™¨çš„åŒºåŸŸè®¾ç½®

  å€¼å¿…é¡»æ˜¯åŒºåŸŸè®¾ç½® `ID`

* `timeZoneOffsetInMinutes`

  æ—¶åŒºå·®ï¼Œå•ä½æ˜¯åˆ†é’Ÿ

  > é»˜è®¤æƒ…å†µä¸‹ï¼Œé€‰æ‹©å™¨ä¼šé€‰æ‹©è®¾å¤‡çš„é»˜è®¤æ—¶åŒº
  >> é€šè¿‡æ­¤å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªæ—¶åŒº
  >>> ä¸¾ä¸ªä¾‹å­ï¼Œè¦ä½¿ç”¨åŒ—äº¬æ—¶é—´ï¼ˆä¸œå…«åŒºï¼‰ï¼Œå¯ä»¥ä¼ é€’ `8 * 60`

## `DrawerLayoutAndroid`

[ã€ æŸ¥çœ‹å®˜æ–¹ `DrawerLayoutAndroid` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/drawerlayoutandroid/)

> å°è£…äº† `Android` å¹³å° `DrawerLayout` çš„ `React` ç»„ä»¶

æŠ½å±‰ï¼ˆé€šå¸¸ç”¨äºå¯¼èˆªåˆ‡æ¢ï¼‰æ˜¯é€šè¿‡ `renderNavigationView` æ–¹æ³•æ¸²æŸ“çš„

* å¹¶ä¸” `DrawerLayoutAndroid` çš„ç›´æ¥å­è§†å›¾ä¼šæˆä¸ºä¸»è§†å›¾ï¼ˆç”¨äºæ”¾ç½®å†…å®¹ï¼‰

å¯¼èˆªè§†å›¾ä¸€å¼€å§‹åœ¨å±å¹•ä¸Šå¹¶ä¸å¯è§

* ä¸è¿‡å¯ä»¥ä» `drawerPosition` æŒ‡å®šçš„çª—å£ä¾§é¢æ‹–æ‹½å‡ºæ¥

* å¹¶ä¸”æŠ½å±‰çš„å®½åº¦å¯ä»¥ä½¿ç”¨ `drawerWidth` å±æ€§æ¥æŒ‡å®š

> è¯‘æ³¨ï¼šæ­¤ç»„ä»¶ä»…èƒ½åœ¨ `Android` ä¸Šä½¿ç”¨
>> æˆ‘ä»¬æ¨èä½¿ç”¨è·¨å¹³å°çš„ `react-navigation` ä¸­çš„ `DrawerNavigation` æ¥ä»£æ›¿æ­¤ç»„ä»¶

ç¤ºä¾‹ï¼š

```jsx
render: function() {
  var navigationView = (
    <View style={{flex: 1, backgroundColor: '#fff'}}>
      <Text style={{margin: 10, fontSize: 15, textAlign: 'left'}}>I'm in the Drawer!</Text>
    </View>
  );
  return (
    <DrawerLayoutAndroid
      drawerWidth={300}
      drawerPosition={DrawerLayoutAndroid.positions.Left}
      renderNavigationView={() => navigationView}>
      <View style={{flex: 1, alignItems: 'center'}}>
        <Text style={{margin: 10, fontSize: 15, textAlign: 'right'}}>Hello</Text>
        <Text style={{margin: 10, fontSize: 15, textAlign: 'right'}}>World!</Text>
      </View>
    </DrawerLayoutAndroid>
  );
},
```

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `renderNavigationView`

  è¢«æ‹‰å…¥çš„å¯¼èˆªè§†å›¾çš„å†…å®¹

* `onDrawerClose`

  å¯¼èˆªè§†å›¾è¢«å…³é—­åçš„å›è°ƒå‡½æ•°

* `drawerPosition`

  è®¾ç½®å¯¼èˆªè§†å›¾ä»å±å¹•çš„å“ªä¸€è¾¹æ‹‰å…¥

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `DrawerConsts.DrawerPosition.Left`
  * `DrawerConsts.DrawerPosition.Right`

* `drawerWidth`

  è®¾ç½®å¯¼èˆªè§†å›¾ä»çª—å£è¾¹ç¼˜æ‹‰å…¥çš„è§†å›¾çš„å®½åº¦

* `keyboardDismissMode`

  è®¾ç½®æ‹–åŠ¨è¿‡ç¨‹ä¸­æ˜¯å¦éšè—è½¯é”®ç›˜

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `none`

    (é»˜è®¤)æ‹–åŠ¨æ—¶ä¸éšè—è½¯é”®ç›˜

  * `on-drag`

    æ‹–åŠ¨æ—¶éšè—è½¯é”®ç›˜

* `drawerLockMode`

  è®¾ç½®å¯¼èˆªè§†å›¾çš„é”å®šæ¨¡å¼

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `unlocked`

    (é»˜è®¤)ä¸é”å®šï¼Œå¯¼èˆªè§†å›¾å¯ä»¥å“åº”æ‰“å¼€å’Œå…³é—­æ“ä½œ

  * `locked-closed`

    å¯¼èˆªè§†å›¾ä¿æŒå…³é—­ï¼Œä¸èƒ½ç”¨æ‰‹åŠ¿æ‰“å¼€

  * `locked-open`

    å¯¼èˆªè§†å›¾ä¿æŒæ‰“å¼€ï¼Œä¸èƒ½ç”¨æ‰‹åŠ¿å…³é—­ï¼Œä½†ä»ç„¶å¯ä»¥é€šè¿‡ç¨‹åºæ‰“å¼€æˆ–å…³é—­

    `openDrawer` / `closeDrawer`

* `onDrawerOpen`

  å¯¼èˆªè§†å›¾è¢«æ‰“å¼€åçš„å›è°ƒå‡½æ•°

* `onDrawerSlide`

  å¯¼èˆªè§†å›¾å‘ç”Ÿäº¤äº’æ—¶çš„å›è°ƒå‡½æ•°

* `onDrawerStateChanged`

  å¯¼èˆªè§†å›¾çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶çš„å›è°ƒå‡½æ•°

  å¯é€‰å€¼èŒƒå›´ï¼š

  * `idle`

  å¯¼èˆªè§†å›¾æ²¡æœ‰å‘ç”Ÿä»»ä½•äº¤äº’

  * `dragging`

  å¯¼èˆªè§†å›¾æ­£åœ¨å‘ç”Ÿäº¤äº’

  * `settling`

  å¯¼èˆªè§†å›¾æ­£åœ¨å‘ç”Ÿäº¤äº’ï¼Œå¹¶ä¸”å¯¼èˆªè§†å›¾æ­£åœ¨å®Œæˆå…¶å…³é—­æˆ–æ‰“å¼€çš„åŠ¨ç”»

* `drawerBackgroundColor`

  è®¾ç½®å¯¼èˆªè§†å›¾çš„èƒŒæ™¯é¢œè‰²

  > é»˜è®¤å€¼ä¸ºç™½è‰²

  å¦‚æœä½ æƒ³è®¾ç½®å¯¼èˆªè§†å›¾çš„ä¸é€æ˜åº¦ï¼Œè¯·ä½¿ç”¨ `rgba` ï¼Œä¾‹å¦‚ï¼š

  ```
  return (
  <DrawerLayoutAndroid drawerBackgroundColor="rgba(0,0,0,0.5)">
  </DrawerLayoutAndroid>
  );
  ```

* `statusBarBackgroundColor`

  ä½¿æŠ½å±‰å æ»¡æ•´ä¸ªå±å¹•ï¼Œå¹¶è®¾ç½®çŠ¶æ€æ é¢œè‰²(æ”¯æŒ `API21+` / å®‰å“ç³»ç»Ÿ `5.0` ä»¥ä¸Š)ä½¿å¯¼èˆªè§†å›¾å æ»¡æ•´ä¸ªå±å¹•ï¼Œå¹¶è®¾ç½®çŠ¶æ€æ èƒŒæ™¯ï¼Œå…è®¸ä»–åœ¨çŠ¶æ€æ ä¸Šæ‰“å¼€

### æŸ¥çœ‹æ–¹æ³•

* `openDrawer()`

  æ‰“å¼€å¯¼èˆªè§†å›¾

* `closeDrawer()`

  å…³é—­å¯¼èˆªè§†å›¾

## `FlatList`

[ã€ æŸ¥çœ‹å®˜æ–¹ `FlatList` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/flatlist/)

é«˜æ€§èƒ½çš„ç®€å•åˆ—è¡¨ç»„ä»¶ï¼Œæ”¯æŒä¸‹é¢è¿™äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼š

* å®Œå…¨è·¨å¹³å°
* æ”¯æŒæ°´å¹³å¸ƒå±€æ¨¡å¼
* è¡Œç»„ä»¶æ˜¾ç¤ºæˆ–éšè—æ—¶å¯é…ç½®å›è°ƒäº‹ä»¶
* æ”¯æŒå•ç‹¬çš„å¤´éƒ¨ç»„ä»¶
* æ”¯æŒå•ç‹¬çš„å°¾éƒ¨ç»„ä»¶
* æ”¯æŒè‡ªå®šä¹‰è¡Œé—´åˆ†éš”çº¿
* æ”¯æŒä¸‹æ‹‰åˆ·æ–°
* æ”¯æŒä¸Šæ‹‰åŠ è½½
* æ”¯æŒè·³è½¬åˆ°æŒ‡å®šè¡Œï¼ˆ `ScrollToIndex` ï¼‰

å¦‚æœéœ€è¦åˆ†ç»„/ç±»/åŒºï¼ˆ `section` ï¼‰ï¼Œè¯·ä½¿ç”¨[ã€ `<SectionList>` ã€‘](https://reactnative.cn/docs/sectionlist/)

ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š

```jsx
<FlatList
  data={[{key: 'a'}, {key: 'b'}]}
  renderItem={({item}) => <Text>{item.key}</Text>}
/>
```

ä¸‹é¢æ˜¯ä¸€ä¸ªè¾ƒå¤æ‚çš„ä¾‹å­ï¼š

* å…¶ä¸­æ¼”ç¤ºäº†å¦‚ä½•åˆ©ç”¨ `PureComponent` æ¥è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½å’Œå‡å°‘ `bug` äº§ç”Ÿçš„å¯èƒ½

* ä»¥ä¸‹å†…å®¹éœ€è¦ä½ æ·±åˆ»ç†è§£ï¼š

  * `shouldComponentUpdate` çš„æœºåˆ¶

  * `Component` å’Œ `PureComponent` çš„ä¸åŒ

```jsx
class MyListItem extends React.PureComponent {
  _onPress = () => {
    this.props.onPressItem(this.props.id);
  };

  render() {
    const textColor = this.props.selected ? "red" : "black";
    return (
      <TouchableOpacity onPress={this._onPress}>
        <View>
          <Text style={{ color: textColor }}>
            {this.props.title}
          </Text>
        </View>
      </TouchableOpacity>
    );
  }
}

class MultiSelectList extends React.PureComponent {
  state = {selected: (new Map(): Map<string, boolean>)};

  _keyExtractor = (item, index) => item.id;

  _onPressItem = (id: string) => {
    // updater functions are preferred for transactional updates
    this.setState((state) => {
      // copy the map rather than modifying state.
      const selected = new Map(state.selected);
      selected.set(id, !selected.get(id)); // toggle
      return {selected};
    });
  };

  _renderItem = ({item}) => (
    <MyListItem
      id={item.id}
      onPressItem={this._onPressItem}
      selected={!!this.state.selected.get(item.id)}
      title={item.title}
    />
  );

  render() {
    return (
      <FlatList
        data={this.props.data}
        extraData={this.state}
        keyExtractor={this._keyExtractor}
        renderItem={this._renderItem}
      />
    );
  }
}
```

* å¯¹äº `MyListItem` ç»„ä»¶æ¥è¯´

  * å…¶ `onPressItem` å±æ€§ä½¿ç”¨ç®­å¤´å‡½æ•°è€Œé `bind` çš„æ–¹å¼è¿›è¡Œç»‘å®š

  * ä½¿å…¶ä¸ä¼šåœ¨æ¯æ¬¡åˆ—è¡¨é‡æ–° `render` æ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°

  * ä»è€Œä¿è¯äº† `props` çš„ä¸å˜æ€§

    * å½“ç„¶å‰ææ˜¯ `id` `selected` å’Œ `title` ä¹Ÿæ²¡å˜

  * ä¸ä¼šè§¦å‘è‡ªèº«æ— è°“çš„é‡æ–° `render`

  * æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ˜¯ç”¨ `bind` æ¥ç»‘å®š `onPressItem`

    * æ¯æ¬¡éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°

    * å¯¼è‡´ `props` åœ¨ `===` æ¯”è¾ƒæ—¶è¿”å› `false`

    * ä»è€Œè§¦å‘è‡ªèº«çš„ä¸€æ¬¡ä¸å¿…è¦çš„é‡æ–° `render`

* ç»™ `FlatList` æŒ‡å®š `extraData={this.state}` å±æ€§

  * æ˜¯ä¸ºäº†ä¿è¯ `state.selected` å˜åŒ–æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®è§¦å‘ `FlatList` çš„æ›´æ–°

  * å¦‚æœä¸æŒ‡å®šæ­¤å±æ€§ï¼Œåˆ™ `FlatList` ä¸ä¼šè§¦å‘æ›´æ–°

  * å› ä¸ºå®ƒæ˜¯ä¸€ä¸ª `PureComponent` ï¼Œå…¶ `props` åœ¨ `===` æ¯”è¾ƒä¸­æ²¡æœ‰å˜åŒ–åˆ™ä¸ä¼šè§¦å‘æ›´æ–°

* `keyExtractor` å±æ€§æŒ‡å®šä½¿ç”¨ `id` ä½œä¸ºåˆ—è¡¨æ¯ä¸€é¡¹çš„ `key`

æœ¬ç»„ä»¶å®è´¨æ˜¯åŸºäº `<VirtualizedList>` ç»„ä»¶çš„å°è£…ï¼Œç»§æ‰¿äº†å…¶æ‰€æœ‰ `props`

* ä¹ŸåŒ…æ‹¬æ‰€æœ‰ `<ScrollView>` çš„ `props`ï¼Œä½†åœ¨æœ¬æ–‡æ¡£ä¸­æ²¡æœ‰åˆ—å‡º

æ­¤å¤–è¿˜æœ‰ä¸‹é¢è¿™äº›éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼š

* å½“æŸè¡Œæ»‘å‡ºæ¸²æŸ“åŒºåŸŸä¹‹å¤–åï¼Œå…¶å†…éƒ¨çŠ¶æ€å°†ä¸ä¼šä¿ç•™

  * è¯·ç¡®ä¿ä½ åœ¨è¡Œç»„ä»¶ä»¥å¤–çš„åœ°æ–¹ä¿ç•™äº†æ•°æ®

* æœ¬ç»„ä»¶ç»§æ‰¿è‡ª `PureComponent` è€Œéé€šå¸¸çš„ `Component`

  * è¿™æ„å‘³ç€å¦‚æœå…¶ `props` åœ¨æµ…æ¯”è¾ƒä¸­æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“

  * æ‰€ä»¥è¯·å…ˆæ£€æŸ¥ä½ çš„ `renderItem` å‡½æ•°æ‰€ä¾èµ–çš„ `props` æ•°æ®

    * åŒ…æ‹¬ `data` å±æ€§ä»¥åŠå¯èƒ½ç”¨åˆ°çš„çˆ¶ç»„ä»¶çš„ `state`

  * å¦‚æœæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹

    * `Object` æˆ–è€…æ•°ç»„éƒ½æ˜¯å¼•ç”¨ç±»å‹

  * åˆ™éœ€è¦å…ˆä¿®æ”¹å…¶å¼•ç”¨åœ°å€

    * æ¯”å¦‚å…ˆå¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ `Object` æˆ–è€…æ•°ç»„ä¸­

  * ç„¶åå†ä¿®æ”¹å…¶å€¼ï¼Œå¦åˆ™ç•Œé¢å¾ˆå¯èƒ½ä¸ä¼šåˆ·æ–°

  > è¯‘æ³¨ï¼šè¿™ä¸€æ®µä¸äº†è§£çš„æœ‹å‹å»ºè®®å…ˆå­¦ä¹ ä¸‹[ã€ `js` ä¸­çš„åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‘](https://segmentfault.com/a/1190000002789651)

* ä¸ºäº†ä¼˜åŒ–å†…å­˜å ç”¨åŒæ—¶ä¿æŒæ»‘åŠ¨çš„æµç•…ï¼Œåˆ—è¡¨å†…å®¹ä¼šåœ¨å±å¹•å¤–å¼‚æ­¥ç»˜åˆ¶

  * è¿™æ„å‘³ç€å¦‚æœç”¨æˆ·æ»‘åŠ¨çš„é€Ÿåº¦è¶…è¿‡æ¸²æŸ“çš„é€Ÿåº¦ï¼Œåˆ™ä¼šå…ˆçœ‹åˆ°ç©ºç™½çš„å†…å®¹

  * è¿™æ˜¯ä¸ºäº†ä¼˜åŒ–ä¸å¾—ä¸ä½œå‡ºçš„å¦¥åï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´ç›¸åº”çš„å‚æ•°ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨è®¾æ³•æŒç»­æ”¹è¿›

* é»˜è®¤æƒ…å†µä¸‹æ¯è¡Œéƒ½éœ€è¦æä¾›ä¸€ä¸ªä¸é‡å¤çš„ `key` å±æ€§

  * ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª `keyExtractor` å‡½æ•°æ¥ç”Ÿæˆ `key`

æœ¬ç»„ä»¶å¦‚æœåµŒå¥—åœ¨å…¶ä»–åŒæ»šåŠ¨æ–¹å‘çš„ `FlatList` ä¸­ï¼Œåˆ™ä¸ä¼šç»§æ‰¿[ã€ `ScrollView` çš„ `Props` ã€‘](https://reactnative.cn/docs/scrollview#props)

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `ScrollView props` ã€‘](https://reactnative.cn/docs/scrollview#props)

  `ScrollView` çš„å±æ€§

* [ã€ `VirtualizedList props` ã€‘](https://reactnative.cn/docs/virtualizedlist#props)

  `VirtualizedList` çš„å±æ€§

* `renderItem`

  ä»dataä¸­æŒ¨ä¸ªå–å‡ºæ•°æ®å¹¶æ¸²æŸ“åˆ°åˆ—è¡¨ä¸­

  ```jsx
  renderItem({ item: Object, index: number, separators: { highlight: Function, unhighlight: Function, updateProps: Function(select: string, newProps: Object) } }) => ?React.Element
  ```

  > å¦‚æœéœ€è¦ï¼Œæä¾›å…¶ä»–å…ƒæ•°æ®ï¼ˆå¦‚ **`ç´¢å¼•`** ï¼‰ï¼Œä»¥åŠæ›´é€šç”¨çš„ `separaters.updateprops` å‡½æ•°
  >> è¯¥å‡½æ•°å…è®¸æ‚¨è®¾ç½®å¸Œæœ›æ›´æ”¹å‰å¯¼åˆ†éš”ç¬¦æˆ–å°¾éšåˆ†éš”ç¬¦å‘ˆç°çš„ä»»ä½•å±æ€§
  >>> ä»¥é˜²æ›´å¸¸è§çš„ **`çªå‡ºæ˜¾ç¤º`** å’Œ **`å–æ¶ˆçªå‡ºæ˜¾ç¤º`** ï¼ˆè®¾ç½®çªå‡ºæ˜¾ç¤ºï¼šå¸ƒå°”å±æ€§ï¼‰ä¸è¶³ä»¥æ»¡è¶³æ‚¨çš„ä½¿ç”¨éœ€æ±‚

  ç¤ºä¾‹ï¼š

  ```jsx
  <FlatList
    ItemSeparatorComponent={Platform.OS !== 'android' && ({highlighted}) => (
      <View style={[style.separator, highlighted && {marginLeft: 0}]} />
    )}
    data={[{title: 'Title Text', key: 'item1'}]}
    renderItem={({item, separators}) => (
      <TouchableHighlight
        onPress={() => this._onPress(item)}
        onShowUnderlay={separators.highlight}
        onHideUnderlay={separators.unhighlight}>
        <View style={{backgroundColor: 'white'}}>
          <Text>{item.title}</Text>
        </View>
      </TouchableHighlight>
    )}
  />
  ```

* `data`

  ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œ`data` å±æ€§ç›®å‰åªæ”¯æŒæ™®é€šæ•°ç»„

  å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–ç‰¹æ®Šæ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ `immutable` æ•°ç»„ï¼Œè¯·ç›´æ¥ä½¿ç”¨æ›´åº•å±‚çš„ `VirtualizedList` ç»„ä»¶

* `ItemSeparatorComponent`

  è¡Œä¸è¡Œä¹‹é—´çš„åˆ†éš”çº¿ç»„ä»¶

  ä¸ä¼šå‡ºç°åœ¨ç¬¬ä¸€è¡Œä¹‹å‰å’Œæœ€åä¸€è¡Œä¹‹å

  > é»˜è®¤æƒ…å†µä¸‹ï¼Œæä¾› `highlighted` å’Œ `LeadingItem` å±æ€§

  * `renderItem` æä¾› `separators.highligh` / `unhighlight` ï¼Œå®ƒå°†æ›´æ–° `highlighted` çš„å±æ€§

  * ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ `separaters.updateprops` æ·»åŠ è‡ªå®šä¹‰å±æ€§

* `ListEmptyComponent`

  åˆ—è¡¨ä¸ºç©ºæ—¶æ¸²æŸ“è¯¥ç»„ä»¶

  å¯ä»¥æ˜¯ `React Component` , ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª `render` å‡½æ•°ï¼Œæˆ–è€…æ¸²æŸ“å¥½çš„ `element`

* `ListFooterComponent`

  å°¾éƒ¨ç»„ä»¶

  å¯ä»¥æ˜¯ `React Component` , ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª `render` å‡½æ•°ï¼Œæˆ–è€…æ¸²æŸ“å¥½çš„ `element`

* `ListHeaderComponent`

  å¤´éƒ¨ç»„ä»¶

  å¯ä»¥æ˜¯ `React Component` , ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª `render` å‡½æ•°ï¼Œæˆ–è€…æ¸²æŸ“å¥½çš„ `element`

* `columnWrapperStyle`

  å¦‚æœè®¾ç½®äº†å¤šåˆ—å¸ƒå±€

  å³å°† `numColumns` å€¼è®¾ä¸ºå¤§äº `1` çš„æ•´æ•°

  åˆ™å¯ä»¥é¢å¤–æŒ‡å®šæ­¤æ ·å¼ä½œç”¨åœ¨æ¯è¡Œå®¹å™¨ä¸Š

* `extraData`

  å¦‚æœæœ‰é™¤ `data` ä»¥å¤–çš„æ•°æ®ç”¨åœ¨åˆ—è¡¨ä¸­ï¼ˆä¸è®ºæ˜¯ç”¨åœ¨renderItemè¿˜æ˜¯å¤´éƒ¨æˆ–è€…å°¾éƒ¨ç»„ä»¶ä¸­ï¼‰ï¼Œè¯·åœ¨æ­¤å±æ€§ä¸­æŒ‡å®š

  åŒæ—¶æ­¤æ•°æ®åœ¨ä¿®æ”¹æ—¶ä¹Ÿéœ€è¦å…ˆä¿®æ”¹å…¶å¼•ç”¨åœ°å€ï¼ˆæ¯”å¦‚å…ˆå¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ Object æˆ–è€…æ•°ç»„ä¸­ï¼‰ï¼Œç„¶åå†ä¿®æ”¹å…¶å€¼ï¼Œå¦åˆ™ç•Œé¢å¾ˆå¯èƒ½ä¸ä¼šåˆ·æ–°

* `getItemLayout`

  ```jsx
  (data, index) => {length: number, offset: number, index: number}
  ```

  `getItemLayout` æ˜¯ä¸€ä¸ªå¯é€‰çš„ä¼˜åŒ–ï¼Œç”¨äºé¿å…åŠ¨æ€æµ‹é‡å†…å®¹å°ºå¯¸çš„å¼€é”€ï¼Œä¸è¿‡å‰ææ˜¯ä½ å¯ä»¥æå‰çŸ¥é“å†…å®¹çš„é«˜åº¦

  å¦‚æœä½ çš„è¡Œé«˜æ˜¯å›ºå®šçš„ï¼Œ`getItemLayout` ç”¨èµ·æ¥å°±æ—¢é«˜æ•ˆåˆç®€å•ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š

  ```jsx
  getItemLayout={(data, index) => (
    {length: ITEM_HEIGHT, offset: ITEM_HEIGHT * index, index}
  )}
  ```

  å¯¹äºå…ƒç´ è¾ƒå¤šçš„åˆ—è¡¨ï¼ˆå‡ ç™¾è¡Œï¼‰æ¥è¯´ï¼Œæ·»åŠ  `getItemLayout` å¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½

  > æ³¨æ„ï¼šå¦‚æœä½ æŒ‡å®šäº† `ItemSeparatorComponent` ï¼Œè¯·æŠŠåˆ†éš”çº¿çš„å°ºå¯¸ä¹Ÿè€ƒè™‘åˆ° `offset` çš„è®¡ç®—ä¹‹ä¸­

* `horizontal`

  è®¾ç½®ä¸º `true` åˆ™å˜ä¸ºæ°´å¹³å¸ƒå±€æ¨¡å¼

* `initialNumToRender`

  æŒ‡å®šä¸€å¼€å§‹æ¸²æŸ“çš„å…ƒç´ æ•°é‡ï¼Œæœ€å¥½åˆšåˆšå¤Ÿå¡«æ»¡ä¸€ä¸ªå±å¹•ï¼Œè¿™æ ·ä¿è¯äº†ç”¨æœ€çŸ­çš„æ—¶é—´ç»™ç”¨æˆ·å‘ˆç°å¯è§çš„å†…å®¹

  > æ³¨æ„ï¼šè¿™ç¬¬ä¸€æ‰¹æ¬¡æ¸²æŸ“çš„å…ƒç´ ä¸ä¼šåœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­è¢«å¸è½½ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·æ‰§è¡Œè¿”å›é¡¶éƒ¨çš„æ“ä½œæ—¶ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“é¦–æ‰¹å…ƒç´ 

* `initialScrollIndex`

  å¼€å§‹æ—¶å±å¹•é¡¶ç«¯çš„å…ƒç´ æ˜¯åˆ—è¡¨ä¸­çš„ç¬¬ `initialScrollIndex` ä¸ªå…ƒç´ , è€Œä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ 

  å¦‚æœè®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œåˆ™ç¬¬ä¸€æ‰¹ `initialNumToRender` èŒƒå›´å†…çš„å…ƒç´ ä¸ä¼šå†ä¿ç•™åœ¨å†…å­˜é‡Œï¼Œè€Œæ˜¯ç›´æ¥ç«‹åˆ»æ¸²æŸ“ä½äº `initialScrollIndex` ä½ç½®çš„å…ƒç´ 

  éœ€è¦å…ˆè®¾ç½® `getItemLayout` å±æ€§

* `inverted`

  ç¿»è½¬æ»šåŠ¨æ–¹å‘

  å®è´¨æ˜¯å°† `scale` å˜æ¢è®¾ç½®ä¸º `-1`

* `keyExtractor`

  ```jsx
  (item: object, index: number) => string;
  ```

  æ­¤å‡½æ•°ç”¨äºä¸ºç»™å®šçš„ `item` ç”Ÿæˆä¸€ä¸ªä¸é‡å¤çš„ `key`

  `Key` çš„ä½œç”¨æ˜¯ä½¿ `React` èƒ½å¤ŸåŒºåˆ†åŒç±»å…ƒç´ çš„ä¸åŒä¸ªä½“ï¼Œä»¥ä¾¿åœ¨åˆ·æ–°æ—¶èƒ½å¤Ÿç¡®å®šå…¶å˜åŒ–çš„ä½ç½®ï¼Œå‡å°‘é‡æ–°æ¸²æŸ“çš„å¼€é”€

  > è‹¥ä¸æŒ‡å®šæ­¤å‡½æ•°ï¼Œåˆ™é»˜è®¤æŠ½å– `item.key` ä½œä¸º `key` å€¼
  >> è‹¥ `item.key` ä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æ•°ç»„ä¸‹æ ‡


* `numColumns`

  å¤šåˆ—å¸ƒå±€åªèƒ½åœ¨éæ°´å¹³æ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œå³å¿…é¡»æ˜¯ `horizontal={false}`

  æ­¤æ—¶ç»„ä»¶å†…å…ƒç´ ä¼šä»å·¦åˆ°å³ä»ä¸Šåˆ°ä¸‹æŒ‰ `Z` å­—å½¢æ’åˆ—ï¼Œç±»ä¼¼å¯ç”¨äº† `flexWrap` çš„å¸ƒå±€

  > ç»„ä»¶å†…å…ƒç´ å¿…é¡»æ˜¯ç­‰é«˜çš„
  >> æš‚æ—¶è¿˜æ— æ³•æ”¯æŒç€‘å¸ƒæµå¸ƒå±€

* `onEndReached`

  ```
  (info: {distanceFromEnd: number}) => void
  ```

  å½“åˆ—è¡¨è¢«æ»šåŠ¨åˆ°è·ç¦»å†…å®¹æœ€åº•éƒ¨ä¸è¶³ `onEndReachedThreshold` çš„è·ç¦»æ—¶è°ƒç”¨

* `onEndReachedThreshold`

  å†³å®šå½“è·ç¦»å†…å®¹æœ€åº•éƒ¨è¿˜æœ‰å¤šè¿œæ—¶è§¦å‘ `onEndReached` å›è°ƒ

  > æ³¨æ„ï¼šæ­¤å‚æ•°æ˜¯ä¸€ä¸ªæ¯”å€¼è€Œéåƒç´ å•ä½
  >> æ¯”å¦‚ï¼Œ`0.5` è¡¨ç¤ºè·ç¦»å†…å®¹æœ€åº•éƒ¨çš„è·ç¦»ä¸ºå½“å‰åˆ—è¡¨å¯è§é•¿åº¦çš„ä¸€åŠæ—¶è§¦å‘

* `onRefresh`

  ```jsx
  () => void
  ```

  å¦‚æœè®¾ç½®äº†æ­¤é€‰é¡¹ï¼Œåˆ™ä¼šåœ¨åˆ—è¡¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªæ ‡å‡†çš„ `RefreshControl` æ§ä»¶ï¼Œä»¥ä¾¿å®ç° **`ä¸‹æ‹‰åˆ·æ–°`** çš„åŠŸèƒ½

  åŒæ—¶ä½ éœ€è¦æ­£ç¡®è®¾ç½® `refreshing` å±æ€§

* `onViewableItemsChanged`

  ```jsx
  (info: {
      viewableItems: array,
      changed: array,
    }) => void
  ```

  åœ¨å¯è§è¡Œå…ƒç´ å˜åŒ–æ—¶è°ƒç”¨

  å¯è§èŒƒå›´å’Œå˜åŒ–é¢‘ç‡ç­‰å‚æ•°çš„é…ç½®è¯·è®¾ç½® `viewabilityConfig` å±æ€§

* `progressViewOffset`

  å½“éœ€è¦åœ¨æŒ‡å®šçš„åç§»å¤„æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥è®¾ç½®è¿™ä¸ªå€¼

* `legacyImplementation`

  å¯èƒ½æ²¡æœ‰å®Œæ•´çš„åŠŸèƒ½å¥‡å¶æ ¡éªŒï¼Œç”¨äºè°ƒè¯•å’Œæ€§èƒ½æ¯”è¾ƒ

* `refreshing`

  åœ¨ç­‰å¾…åŠ è½½æ–°æ•°æ®æ—¶å°†æ­¤å±æ€§è®¾ä¸º `true` ï¼Œåˆ—è¡¨å°±ä¼šæ˜¾ç¤ºå‡ºä¸€ä¸ªæ­£åœ¨åŠ è½½çš„ç¬¦å·

* `removeClippedSubviews`

  å¯¹äºå¤§åˆ—è¡¨å¯ç”¨æœ¬å±æ€§å¯èƒ½å¯ä»¥æé«˜æ€§èƒ½

  > æ³¨æ„ï¼šæœ‰äº›æƒ…å†µä¸‹ä¼šæœ‰ `bug`
  >> æ¯”å¦‚å†…å®¹æ— æ³•æ˜¾ç¤º
  >>> è¯·è°¨æ…ä½¿ç”¨

* `viewabilityConfig`

  è¯·å‚è€ƒ `ViewabilityHelper.js` çš„æºç æ¥äº†è§£å…·ä½“çš„é…ç½®

  `viewabilityConfig` é‡‡ç”¨ `viewabilityConfig` ç±»å‹ï¼Œä¸ºå…·æœ‰ä»¥ä¸‹å±æ€§çš„å¯¹è±¡é…ç½® `viewabilityConfig`

  å±æ€§|å¿…å¡«|ç±»å‹
  -|-|-
  minimumViewTime|å¦|æ•°å€¼
  viewAreaCoveragePercentThreshold|å¦|æ•°å€¼
  itemVisiblePercentThreshold|å¦|æ•°å€¼
  waitForInteraction|å¦|å¸ƒå°”

  è‡³å°‘éœ€è¦ä¸€ä¸ª `ViewAreaCoveragePercentThreshold` æˆ– `ItemVisiblePercentThreshold`

  è¿™éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­å®Œæˆï¼Œä»¥é¿å…ä»¥ä¸‹é”™è¯¯ï¼ˆ[ã€ `ref` ã€‘](https://github.com/facebook/react-native/issues/17408)ï¼‰ï¼š

  ```jsx
  Error: Changing viewabilityConfig on the fly is not supported`
  ```

  ```jsx
  constructor (props) {
    super(props)

    this.viewabilityConfig = {
        waitForInteraction: true,
        viewAreaCoveragePercentThreshold: 95
    }
  }
  ```

  ```jsx
  <FlatList
    viewabilityConfig={this.viewabilityConfig}
  ...
  ```

  * `minimumViewTime`

  åœ¨æ¿€æ´»å¯è§†æ€§å›è°ƒä¹‹å‰ï¼Œå¿…é¡»å¯¹é¡¹è¿›è¡Œç‰©ç†å¯è§†çš„æœ€çŸ­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

  é«˜æ•°å­—æ„å‘³ç€ä¸åœæ­¢æ»šåŠ¨å†…å®¹ä¸ä¼šå°†å†…å®¹æ ‡è®°ä¸ºå¯æŸ¥çœ‹

  * `viewAreaCoveragePercentThreshold`

  éƒ¨åˆ†è¢«é®æŒ¡é¡¹ç›®å¿…é¡»è¦†ç›–çš„è§†åŒºç™¾åˆ†æ¯”ï¼Œè®¡ä¸º **`å¯è§†`** ï¼Œ`0-100`

  å®Œå…¨å¯è§çš„é¡¹ç›®æ€»æ˜¯è¢«è®¤ä¸ºæ˜¯å¯è§†çš„

  å€¼ä¸º `0` è¡¨ç¤ºè§†åŒºä¸­çš„å•ä¸ªåƒç´ ä½¿é¡¹ç›®å¯è§ï¼Œå€¼ä¸º `100` æ„å‘³ç€ä¸€ä¸ªé¡¹ç›®å¿…é¡»æ˜¯å®Œå…¨å¯è§çš„ï¼Œæˆ–è€…è¦†ç›–æ•´ä¸ªè§†åŒºæ‰èƒ½ç®—æ˜¯å¯è§çš„

  * `itemVisiblePercentThreshold`

  ç±»ä¼¼äº `viewAreaPercentThreshold` ï¼Œä½†è€ƒè™‘çš„æ˜¯å¯è§é¡¹çš„ç™¾åˆ†æ¯”ï¼Œè€Œä¸æ˜¯å®ƒæ‰€è¦†ç›–çš„å¯è§†åŒºåŸŸçš„åˆ†æ•°

  * `waitForInteraction`

  åœ¨ç”¨æˆ·æ»šåŠ¨æˆ–åœ¨å‘ˆç°åè°ƒç”¨ `recordInteraction` ä¹‹å‰ï¼Œä¸è®¤ä¸ºä»»ä½•å†…å®¹æ˜¯å¯æŸ¥çœ‹çš„

* `viewabilityConfigCallbackPairs`

  **`å¯æŸ¥çœ‹æ€§é…ç½®`** / **`å¯æŸ¥çœ‹é¡¹å·²æ›´æ”¹`** å¯¹çš„åˆ—è¡¨

  å½“æ»¡è¶³ç›¸åº”çš„ `ViewabilityConfig` æ¡ä»¶æ—¶ï¼Œå°†è°ƒç”¨ç‰¹å®šçš„ `onViewableItemsChanged`

  è¯·å‚è€ƒ[ã€ `ViewabilityHelper.js` ã€‘](https://github.com/facebook/react-native/blob/master/Libraries/Lists/ViewabilityHelper.js)çš„æºç æ¥äº†è§£å…·ä½“çš„é…ç½®

### æŸ¥çœ‹æ–¹æ³•

* `scrollToEnd()`

  ```jsx
  scrollToEnd([params]);
  ```

  æ»šåŠ¨åˆ°åº•éƒ¨

  å¦‚æœä¸è®¾ç½® `getItemLayout` å±æ€§çš„è¯ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒå¡

  `params` å¯é€‰çš„å±æ€§åŠå€¼ï¼š

  * `animated`

    å€¼ä¸º `boolean` ç±»å‹

    æ»šåŠ¨æ—¶åˆ—è¡¨æ˜¯å¦åº”è¿›è¡ŒåŠ¨ç”»ï¼Œé»˜è®¤ä¸º `true`

* `scrollToIndex()`

  ```jsx
  scrollToIndex(params);
  ```

  å°†ä½äºæŒ‡å®šä½ç½®çš„å…ƒç´ æ»šåŠ¨åˆ°å¯è§†åŒºçš„æŒ‡å®šä½ç½®ï¼š

  * å½“ `viewPosition` ä¸º `0` æ—¶å°†å®ƒæ»šåŠ¨åˆ°å±å¹•é¡¶éƒ¨

  * ä¸º `1` æ—¶å°†å®ƒæ»šåŠ¨åˆ°å±å¹•åº•éƒ¨

  * ä¸º `0.5` æ—¶å°†å®ƒæ»šåŠ¨åˆ°å±å¹•ä¸­å¤®

  > æ³¨æ„ï¼šå¦‚æœä¸è®¾ç½® `getItemLayout` å±æ€§çš„è¯ï¼Œæ— æ³•è·³è½¬åˆ°å½“å‰æ¸²æŸ“åŒºåŸŸä»¥å¤–çš„ä½ç½®

  `params` å¯é€‰çš„å‚æ•°ï¼š

  * `animated`

    å€¼ä¸º `boolean` ç±»å‹

    æ»šåŠ¨æ—¶åˆ—è¡¨æ˜¯å¦åº”è¿›è¡ŒåŠ¨ç”»ï¼Œé»˜è®¤ä¸º `true`

  * `index`

    å€¼ä¸º `number` ç±»å‹

    è¦æ»šåŠ¨åˆ°çš„ç´¢å¼•ï¼Œå¿…å¡«é¡¹

  * `viewOffset`

    å€¼ä¸º `number` ç±»å‹

    ç”¨äºåç§»æœ€ç»ˆç›®æ ‡ä½ç½®çš„å›ºå®šåƒç´ æ•°ï¼Œå¿…å¡«é¡¹

  * `viewPosition`

    å€¼ä¸º `number` ç±»å‹

    å€¼ `0` å°†ç´¢å¼•æŒ‡å®šçš„é¡¹æ”¾åœ¨é¡¶éƒ¨ï¼Œ`1` æ”¾åœ¨åº•éƒ¨ï¼Œ`0.5` æ”¾åœ¨ä¸­é—´

* `scrollToItem()`

  ```jsx
  scrollToItem(params);
  ```

  è¿™ä¸ªæ–¹æ³•ä¼šé¡ºåºéå†å…ƒç´ 

  > å°½å¯èƒ½ä½¿ç”¨ `scrollToIndex` ä»£æ›¿
  >> æ³¨æ„ï¼šå¦‚æœä¸è®¾ç½® `getItemLayout` å±æ€§çš„è¯ï¼Œæ— æ³•è·³è½¬åˆ°å½“å‰æ¸²æŸ“åŒºåŸŸä»¥å¤–çš„ä½ç½®

  `params` å¯é€‰çš„å‚æ•°ï¼š

  * `animated`

    å€¼ä¸º `boolean` ç±»å‹

    æ»šåŠ¨æ—¶åˆ—è¡¨æ˜¯å¦åº”è¿›è¡ŒåŠ¨ç”»ï¼Œé»˜è®¤ä¸º `true`

  * `item`

    å€¼ä¸º `object` ç±»å‹

    è¦æ»šåŠ¨åˆ°çš„é¡¹ç›®ï¼Œå¿…å¡«é¡¹

  * `viewPosition`

    å€¼ä¸º `number` ç±»å‹

    å€¼ `0` å°†ç´¢å¼•æŒ‡å®šçš„é¡¹æ”¾åœ¨é¡¶éƒ¨ï¼Œ`1` æ”¾åœ¨åº•éƒ¨ï¼Œ`0.5` æ”¾åœ¨ä¸­é—´

* `scrollToOffset()`

  ```jsx
  scrollToOffset(params);
  ```

  æ»šåŠ¨åˆ—è¡¨åˆ°æŒ‡å®šçš„åç§»ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ï¼Œç­‰åŒäº `ScrollView` çš„ `scrollTo` æ–¹æ³•

  `params` å¯é€‰çš„å‚æ•°ï¼š

  * `offset`

    å€¼ä¸º `number` ç±»å‹

    æ»šåŠ¨åˆ°çš„åç§»é‡

    * å¦‚æœ `horizontal` ä¸ºçœŸï¼Œåˆ™åç§»é‡ä¸º `x-value`

    * åœ¨ä»»ä½•å…¶ä»–æƒ…å†µä¸‹ï¼Œåç§»é‡ä¸º `y-value` ï¼Œå¿…å¡«é¡¹

  * `animated`

    å€¼ä¸º `boolean` ç±»å‹

    æ»šåŠ¨æ—¶åˆ—è¡¨æ˜¯å¦åº”è¿›è¡ŒåŠ¨ç”»ï¼Œé»˜è®¤ä¸º `true`

* `recordInteraction()`

  ```jsx
  recordInteraction();
  ```

  ä¸»åŠ¨é€šçŸ¥åˆ—è¡¨å‘ç”Ÿäº†ä¸€ä¸ªäº‹ä»¶ï¼Œä»¥ä½¿åˆ—è¡¨é‡æ–°è®¡ç®—å¯è§†åŒºåŸŸ

  * æ¯”å¦‚è¯´å½“ `waitForInteractions` ä¸º `true` å¹¶ä¸”ç”¨æˆ·æ²¡æœ‰æ»šåŠ¨åˆ—è¡¨æ—¶

  * ä¸€èˆ¬åœ¨ç”¨æˆ·ç‚¹å‡»äº†åˆ—è¡¨é¡¹æˆ–å‘ç”Ÿäº†å¯¼èˆªåŠ¨ä½œæ—¶è°ƒç”¨

* `flashScrollIndicators`

  ```jsx
  flashScrollIndicators();
  ```

  çŸ­æš‚åœ°æ˜¾ç¤ºæ»šåŠ¨æŒ‡ç¤ºå™¨

## `Image`

[ã€ æŸ¥çœ‹å®˜æ–¹ `Image` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/image/)

> ç”¨äºæ˜¾ç¤ºå¤šç§ä¸åŒç±»å‹å›¾ç‰‡çš„ `React` ç»„ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œå›¾ç‰‡ã€é™æ€èµ„æºã€ä¸´æ—¶çš„æœ¬åœ°å›¾ç‰‡ã€ä»¥åŠæœ¬åœ°ç£ç›˜ä¸Šçš„å›¾ç‰‡ï¼ˆå¦‚ç›¸å†Œï¼‰ç­‰

ä¸‹é¢çš„ä¾‹å­åˆ†åˆ«æ¼”ç¤ºäº†å¦‚ä½•æ˜¾ç¤ºä»æœ¬åœ°ç¼“å­˜ã€ç½‘ç»œç”šè‡³æ˜¯ä»¥ `data:` çš„ `base64 uri` å½¢å¼æä¾›çš„å›¾ç‰‡ï¼š

> è¯·æ³¨æ„ï¼šå¯¹äºç½‘ç»œå’Œ `base64` æ•°æ®çš„å›¾ç‰‡éœ€è¦æ‰‹åŠ¨æŒ‡å®šå°ºå¯¸ï¼

```jsx
import React, { Component } from 'react';
import { AppRegistry, View, Image } from 'react-native';

export default class DisplayAnImage extends Component {
  render() {
    return (
      <View>
        <Image
          source={require('/react-native/img/favicon.png')}
        />
        <Image
          style={{width: 50, height: 50}}
          source={{uri: 'https://facebook.github.io/react-native/docs/assets/favicon.png'}}
        />
        <Image
          style={{width: 66, height: 58}}
          source={{uri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg=='}}
        />
      </View>
    );
  }
}
```

ä½ å¯ä»¥ç»™å›¾ç‰‡æ·»åŠ  `style` å±æ€§ï¼š

```jsx
import React, { Component } from 'react';
import { AppRegistry, View, Image, StyleSheet } from 'react-native';

const styles = StyleSheet.create({
  stretch: {
    width: 50,
    height: 200
  }
});

export default class DisplayAnImageWithStyle extends Component {
  render() {
    return (
      <View>
        <Image
          style={styles.stretch}
          source={require('/react-native/img/favicon.png')}
        />
      </View>
    );
  }
}
```

### åœ¨ `Android` ä¸Šæ”¯æŒ `GIF` å’Œ `WebP` æ ¼å¼å›¾ç‰‡

> é»˜è®¤æƒ…å†µä¸‹ `Android` æ˜¯ä¸æ”¯æŒ `GIF` å’Œ `WebP` æ ¼å¼çš„

ä½ éœ€è¦åœ¨ `android/app/build.gradle` æ–‡ä»¶ä¸­æ ¹æ®éœ€è¦æ‰‹åŠ¨æ·»åŠ ä»¥ä¸‹æ¨¡å—ï¼š

```jsx
dependencies {
  // å¦‚æœä½ éœ€è¦æ”¯æŒAndroid4.0(API level 14)ä¹‹å‰çš„ç‰ˆæœ¬
  compile 'com.facebook.fresco:animated-base-support:1.10.0'

  // å¦‚æœä½ éœ€è¦æ”¯æŒGIFåŠ¨å›¾
  compile 'com.facebook.fresco:animated-gif:1.10.0'

  // å¦‚æœä½ éœ€è¦æ”¯æŒWebPæ ¼å¼ï¼ŒåŒ…æ‹¬WebPåŠ¨å›¾
  compile 'com.facebook.fresco:animated-webp:1.10.0'
  compile 'com.facebook.fresco:webpsupport:1.10.0'

  // å¦‚æœåªéœ€è¦æ”¯æŒWebPæ ¼å¼è€Œä¸éœ€è¦åŠ¨å›¾
  compile 'com.facebook.fresco:webpsupport:1.10.0'
}
```

### æŸ¥çœ‹å±æ€§ `Props`

* `style`

  * [ã€å¸ƒå±€å±æ€§ã€‘](https://reactnative.cn/docs/layout-props#props)

    é¡µé¢å¸ƒå±€æ—¶çš„å±æ€§

  * [ã€é˜´å½±å±æ€§ã€‘](https://reactnative.cn/docs/shadow-props#props)

    é¡µé¢å¸ƒå±€æ—¶çš„é˜´å½±æ ·å¼å±æ€§

  * [ã€åŠ¨ç”»å˜æ¢ `Transforms` ã€‘](https://reactnative.cn/docs/transforms#props)

    `Transforms` çš„å±æ€§

  * `borderTopRightRadius: number`

  * `backfaceVisibility: enum('visible', 'hidden')`

  * `borderBottomLeftRadius: number`

  * `borderBottomRightRadius: number`

  * `borderColor`: [ã€ `color` ã€‘](https://reactnative.cn/docs/colors)

  * `borderRadius: number`

  * `borderTopLeftRadius: number`

  * `backgroundColor: color`

  * `borderWidth: number`

  * `opacity: number`

  * `overflow: enum('visible', 'hidden')`

  * `resizeMode: Object.keys(ImageResizeMode)`

  * `tintColor`: [ã€ `color` ã€‘](https://reactnative.cn/docs/colors)

    ä¸ºæ‰€æœ‰éé€æ˜çš„åƒç´ æŒ‡å®šä¸€ä¸ªé¢œè‰²

  * `overlayColor: string (Android)`

    å½“å›¾ç‰‡æœ‰åœ†è§’çš„æ—¶å€™ï¼ŒæŒ‡å®šä¸€ä¸ªé¢œè‰²ç”¨äºå¡«å……åœ†è§’å¤„çš„ç©ºç™½

    è™½ç„¶ä¸€èˆ¬æƒ…å†µä¸‹åœ†è§’å¤„æ˜¯é€æ˜çš„ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒAndroid å¹¶ä¸æ”¯æŒåœ†è§’é€æ˜ï¼Œæ¯”å¦‚ï¼š

    * æŸäº› `resize` æ¨¡å¼æ¯”å¦‚ `contain`
    * `GIF` åŠ¨ç”»

    å¸¸è§çš„ç”¨æ³•å°±æ˜¯åœ¨ä¸èƒ½åœ†è§’é€æ˜æ—¶ï¼Œè®¾ç½® `overlayColor` å’ŒèƒŒæ™¯è‰²ä¸€è‡´

    [ã€è¯¦ç»†è¯´æ˜å¯ç‚¹å‡»å‰å¾€è¿›è¡Œå‚è€ƒã€‘](http://frescolib.org/rounded-corners-and-circles.md)

* `blurRadius`

  æ¨¡ç³ŠåŠå¾„ï¼šä¸ºå›¾ç‰‡æ·»åŠ ä¸€ä¸ªæŒ‡å®šåŠå¾„çš„æ¨¡ç³Šæ»¤é•œ

* `onLayout`

  å½“å…ƒç´ åŠ è½½æˆ–è€…å¸ƒå±€æ”¹å˜çš„æ—¶å€™è°ƒç”¨

  å‚æ•°ä¸º `{nativeEvent: {layout: {x, y, width, height}}}`

* `onLoad`

  åŠ è½½æˆåŠŸå®Œæˆæ—¶è°ƒç”¨æ­¤å›è°ƒå‡½æ•°

* `onLoadEnd`

  åŠ è½½ç»“æŸåï¼Œä¸è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè°ƒç”¨æ­¤å›è°ƒå‡½æ•°

* `onLoadStart`

  åŠ è½½å¼€å§‹æ—¶è°ƒç”¨

  ç¤ºä¾‹ï¼š`onLoadStart={(e) => this.setState({loading: true})}`

* `resizeMode`

  å†³å®šå½“ç»„ä»¶å°ºå¯¸å’Œå›¾ç‰‡å°ºå¯¸ä¸æˆæ¯”ä¾‹çš„æ—¶å€™å¦‚ä½•è°ƒæ•´å›¾ç‰‡çš„å¤§å°ï¼š

  * `cover`

    åœ¨ä¿æŒå›¾ç‰‡å®½é«˜æ¯”çš„å‰æä¸‹ç¼©æ”¾å›¾ç‰‡ï¼Œç›´åˆ°å®½åº¦å’Œé«˜åº¦éƒ½å¤§äºç­‰äºå®¹å™¨è§†å›¾çš„å°ºå¯¸

    * å¦‚æœå®¹å™¨æœ‰ `padding` å†…è¡¬çš„è¯ï¼Œåˆ™ç›¸åº”å‡å»

    > è¯‘æ³¨ï¼šè¿™æ ·å›¾ç‰‡å®Œå…¨è¦†ç›–ç”šè‡³è¶…å‡ºå®¹å™¨ï¼Œå®¹å™¨ä¸­ä¸ç•™ä»»ä½•ç©ºç™½
    >> ä½†å›¾ç‰‡å¾ˆå¯èƒ½åªå±•ç¤ºäº†éƒ¨åˆ†å†…å®¹

  * `contain`

    åœ¨ä¿æŒå›¾ç‰‡å®½é«˜æ¯”çš„å‰æä¸‹ç¼©æ”¾å›¾ç‰‡ï¼Œç›´åˆ°å®½åº¦å’Œé«˜åº¦éƒ½å°äºç­‰äºå®¹å™¨è§†å›¾çš„å°ºå¯¸

    * å¦‚æœå®¹å™¨æœ‰ `padding` å†…è¡¬çš„è¯ï¼Œåˆ™ç›¸åº”å‡å»

    > è¯‘æ³¨ï¼šè¿™æ ·å›¾ç‰‡å®Œå…¨è¢«åŒ…è£¹åœ¨å®¹å™¨ä¸­ï¼Œå®¹å™¨ä¸­å¯èƒ½ç•™æœ‰ç©ºç™½

  * `stretch`

    æ‹‰ä¼¸å›¾ç‰‡ä¸”ä¸ç»´æŒå®½é«˜æ¯”ï¼Œç›´åˆ°å®½é«˜éƒ½åˆšå¥½å¡«æ»¡å®¹å™¨

  * `repeat`

    é‡å¤å¹³é“ºå›¾ç‰‡ç›´åˆ°å¡«æ»¡å®¹å™¨

    > å›¾ç‰‡ä¼šç»´æŒåŸå§‹å°ºå¯¸ï¼Œä½†æ˜¯å½“å°ºå¯¸è¶…è¿‡å®¹å™¨æ—¶ä¼šåœ¨ä¿æŒå®½é«˜æ¯”çš„å‰æä¸‹ç¼©æ”¾åˆ°èƒ½è¢«å®¹å™¨åŒ…è£¹

  * `center`

    å±…ä¸­ä¸æ‹‰ä¼¸

* `source`

  å›¾ç‰‡æºæ•°æ®ï¼ˆè¿œç¨‹ URL åœ°å€æˆ–æœ¬åœ°æ•°æ®ï¼‰

  * æ­¤å±æ€§è¿˜å¯ä»¥åŒ…å«å¤šä¸ªè¿œç¨‹ `URL` ï¼Œä¸å®ƒä»¬çš„å®½åº¦å’Œé«˜åº¦ä¸€èµ·æŒ‡å®šï¼Œå¹¶ä¸”å¯èƒ½ä¸ `scale/other uri` å‚æ•°ä¸€èµ·æŒ‡å®š

  * ç„¶åï¼Œ`React Native` å°†æ ¹æ®å›¾åƒå®¹å™¨çš„æµ‹é‡å¤§å°é€‰æ‹©è¦æ˜¾ç¤ºçš„æœ€ä½³ `uri`

  * å¯ä»¥æ·»åŠ ä¸€ä¸ªç¼“å­˜å±æ€§æ¥æ§åˆ¶ç½‘ç»œè¯·æ±‚ä¸æœ¬åœ°ç¼“å­˜çš„äº¤äº’æ–¹å¼

  ç›®å‰åŸç”Ÿæ”¯æŒçš„å›¾ç‰‡æ ¼å¼æœ‰ï¼š

  * `png`
  * `jpg`
  * `jpeg`
  * `bmp`
  * `gif`
  * `webp` (ä»… `Android` )
  * `psd` (ä»… `iOS` )

* `loadingIndicatorSource`

  ç±»ä¼¼äº `source` ï¼Œè¡¨ç¤ºåœ¨çœŸæ­£å›¾ç‰‡åœ¨åŠ è½½è¿‡ç¨‹ä¸­æ‰€æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œåœ¨åŠ è½½ç½‘ç»œå›¾ç‰‡çš„åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨

  > å¯ä»¥æ¥å—ç”± `require('./image.jpg')` è¿”å›çš„æ•°å­—

* `onError`

  å½“åŠ è½½é”™è¯¯çš„æ—¶å€™è°ƒç”¨æ­¤å›è°ƒå‡½æ•°

  å‚æ•°ä¸º `{nativeEvent: {error}}`

* `testID`

  ä¸€ä¸ªå”¯ä¸€çš„èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨æ¥åœ¨è‡ªåŠ¨æµ‹è¯•è„šæœ¬ä¸­æ ‡è¯†è¿™ä¸ªå…ƒç´ 

* `resizeMethod`

  å½“å›¾ç‰‡å®é™…å°ºå¯¸å’Œå®¹å™¨æ ·å¼å°ºå¯¸ä¸ä¸€è‡´æ—¶ï¼Œå†³å®šä»¥æ€æ ·çš„ç­–ç•¥æ¥è°ƒæ•´å›¾ç‰‡çš„å°ºå¯¸

  > é»˜è®¤ä¸º `auto`

  * `auto`

    ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥åœ¨ `resize` å’Œ `scale` ä¸­è‡ªåŠ¨å†³å®š

  * `resize`

    åœ¨å›¾ç‰‡è§£ç ä¹‹å‰ï¼Œä½¿ç”¨è½¯ä»¶ç®—æ³•å¯¹å…¶åœ¨å†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹

    å½“å›¾ç‰‡å°ºå¯¸æ¯”å®¹å™¨å°ºå¯¸å¤§å¾—å¤šæ—¶ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨æ­¤é€‰é¡¹

  * `scale`

    å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾

    å’Œ `resize` ç›¸æ¯”ï¼Œ`scale` é€Ÿåº¦æ›´å¿«ï¼ˆä¸€èˆ¬æœ‰ç¡¬ä»¶åŠ é€Ÿï¼‰ï¼Œè€Œä¸”å›¾ç‰‡è´¨é‡æ›´ä¼˜

    åœ¨å›¾ç‰‡å°ºå¯¸æ¯”å®¹å™¨å°ºå¯¸å°æˆ–è€…åªæ˜¯ç¨å¤§ä¸€ç‚¹æ—¶ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨æ­¤é€‰é¡¹

  [ã€å…³äº `resize` å’Œ `scale` çš„è¯¦ç»†è¯´æ˜ã€‘](http://frescolib.org/docs/resizing.html)

* `accessibilityLabel`

  è®¾ç½®ä¸€æ®µæ–‡å­—

  å½“ç”¨æˆ·ä¸å›¾ç‰‡äº¤äº’æ—¶ï¼Œè¯»å±å™¨ï¼ˆæ— éšœç¢åŠŸèƒ½ï¼‰ä¼šæœ—è¯»ä½ æ‰€è®¾ç½®çš„è¿™æ®µæ–‡å­—

* `accessible`

  å½“æ­¤å±æ€§ä¸º `true` æ—¶ï¼Œè¡¨ç¤ºæ­¤å›¾ç‰‡æ˜¯ä¸€ä¸ªå¯ç”¨äº†æ— éšœç¢åŠŸèƒ½çš„å…ƒç´ 

* `capInsets`

  å½“å›¾ç‰‡è¢«ç¼©æ”¾çš„æ—¶å€™ï¼Œ`capInsets` æŒ‡å®šçš„è§’ä¸Šçš„å°ºå¯¸ä¼šè¢«å›ºå®šè€Œä¸è¿›è¡Œç¼©æ”¾ï¼Œè€Œä¸­é—´å’Œè¾¹ä¸Šå…¶ä»–çš„éƒ¨åˆ†åˆ™ä¼šè¢«æ‹‰ä¼¸

  è¿™åœ¨åˆ¶ä½œä¸€äº›å¯å˜å¤§å°çš„åœ†è§’æŒ‰é’®ã€é˜´å½±ã€ä»¥åŠå…¶å®ƒèµ„æºçš„æ—¶å€™éå¸¸æœ‰ç”¨

  > è¯‘æ³¨ï¼šè¿™å°±æ˜¯å¸¸è¯´çš„ä¹å®«æ ¼æˆ–è€… `.9` å›¾
  >> äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è§[ã€è‹¹æœå®˜æ–¹æ–‡æ¡£ã€‘](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/index.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets)

* `defaultSource`

  åœ¨è¯»å–å›¾ç‰‡æ—¶é»˜è®¤æ˜¾ç¤ºçš„å›¾ç‰‡

  å¦‚æœä¼ é€’çš„æ˜¯å¯¹è±¡ï¼Œä¸€èˆ¬çš„ç»“æ„ä¼šæ˜¯è¿™æ · `{uri: string, width: number, height: number, scale: number}`

  * `uri`

    æ˜¯ä¸€ä¸ªè¡¨ç¤ºå›¾ç‰‡çš„èµ„æºæ ‡è¯†çš„å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ˜¯ï¼š

    * ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶è·¯å¾„

    * æˆ–æ˜¯ä¸€ä¸ªé™æ€èµ„æºå¼•ç”¨

      ä½¿ç”¨ `require(ç›¸å¯¹è·¯å¾„)` æ¥å¼•ç”¨

  * `width, height`

    å¦‚æœä½ çŸ¥é“å›¾ç‰‡çš„å°ºå¯¸ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®š

    è¿™ä¸€å°ºå¯¸ä¼šè¢«ç”¨ä½œ `<Image/>` ç»„ä»¶çš„é»˜è®¤å°ºå¯¸

  * `scale`

    å›¾ç‰‡çš„ç¼©æ”¾ç³»æ•°

    > é»˜è®¤æ˜¯ `1.0` ï¼Œæ„å‘³ç€æ¯ä¸€ä¸ªå›¾ç‰‡åƒç´ éƒ½å¯¹åº”ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆ `DIP` ï¼‰

  * `number`

    é™æ€å›¾ç‰‡å¼•ç”¨è¯­æ³• `require('./image.jpg')` æ‰€è¿”å›çš„èµ„æº `id`

  > æ³¨æ„ï¼š åœ¨ `Android` çš„ `debug` ç‰ˆæœ¬ä¸Šæœ¬å±æ€§ä¸ä¼šç”Ÿæ•ˆï¼ˆä½†åœ¨ `release` ç‰ˆæœ¬ä¸­ä¼šç”Ÿæ•ˆï¼‰

* `onPartialLoad`

  å¦‚æœå›¾ç‰‡æœ¬èº«æ”¯æŒé€æ­¥åŠ è½½ï¼Œåˆ™é€æ­¥åŠ è½½çš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨æ­¤æ–¹æ³•

  > `é€æ­¥åŠ è½½` çš„å…·ä½“å®šä¹‰ä¸å…·ä½“çš„æ ‡å‡†å’Œå®ç°æœ‰å…³

* `onProgress`

  åœ¨åŠ è½½è¿‡ç¨‹ä¸­ä¸æ–­è°ƒç”¨

  å‚æ•°ä¸º `{nativeEvent: {loaded, total}}`

* `fadeDuration`

  > ä»… `Android` å¯ç”¨

  å‘å£°æŒç»­æ—¶é—´

  > é»˜è®¤ä¸º300æ¯«ç§’

* `progressiveRenderingEnabled`

  æ¸è¿›å¼æ¸²æŸ“

  å¦‚æœä¸ºçœŸï¼Œåˆ™å¯ç”¨æ¸è¿›å¼ `jpeg` æµ

  > ä»… `Android` å¯ç”¨

### æŸ¥çœ‹æ–¹æ³•

* `getSize()`

  ```jsx
  Image.getSize(uri, success, [failure]);
  ```

  åœ¨æ˜¾ç¤ºå›¾ç‰‡å‰è·å–å›¾ç‰‡çš„å®½é«˜(ä»¥åƒç´ ä¸ºå•ä½)

  > å¦‚æœå›¾ç‰‡åœ°å€ä¸æ­£ç¡®æˆ–ä¸‹è½½å¤±è´¥,æ­¤æ–¹æ³•ä¹Ÿä¼šå¤±è´¥

  * è¦è·å–å›¾ç‰‡çš„å°ºå¯¸,é¦–å…ˆéœ€è¦åŠ è½½æˆ–ä¸‹è½½å›¾ç‰‡(åŒæ—¶ä¼šè¢«ç¼“å­˜èµ·æ¥)

  * è¿™æ„å‘³ç€ç†è®ºä¸Šä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥é¢„åŠ è½½å›¾ç‰‡

  * è™½ç„¶æ­¤æ–¹æ³•å¹¶æ²¡æœ‰é’ˆå¯¹è¿™ä¸€ç”¨æ³•è¿›è¡Œä¼˜åŒ–ï¼Œè€Œä¸”å°†æ¥å¯èƒ½ä¼šæ¢ä¸€äº›å®ç°æ–¹æ¡ˆä½¿å¾—å¹¶ä¸éœ€è¦å®Œæ•´ä¸‹è½½å›¾ç‰‡å³å¯è·å–å°ºå¯¸

  * æ‰€ä»¥æ›´å¥½çš„é¢„åŠ è½½æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸‹é¢é‚£ä¸ªä¸“é—¨çš„é¢„åŠ è½½æ–¹æ³•

  > æ­¤æ–¹æ³•ä¸èƒ½ç”¨äºé™æ€å›¾ç‰‡èµ„æº

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  uri|string|æ˜¯|å›¾ç‰‡åœ°å€
  success|function|æ˜¯|æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›å›¾ç‰‡å®½é«˜æ•°æ®
  failure|function|å¦|å¤±è´¥çš„å›è°ƒå‡½æ•°

* `getSizeWithHeaders()`

  ```jsx
  Image.getSizeWithHeaders(uri, headers, success, [failure]);
  ```

  åœ¨æ˜¾ç¤ºå›¾åƒä¹‹å‰æ£€ç´¢å›¾åƒçš„å®½åº¦å’Œé«˜åº¦ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰ï¼Œä»¥ä¾¿ä¸ºè¯·æ±‚æä¾›æ ‡é¢˜

  > å¦‚æœæ‰¾ä¸åˆ°å›¾åƒæˆ–æ— æ³•ä¸‹è½½ï¼Œæ­¤æ–¹æ³•å¯èƒ½ä¼šå¤±è´¥

  ä¸ºäº†æ£€ç´¢å›¾åƒç»´åº¦ï¼Œå¯èƒ½é¦–å…ˆéœ€è¦åŠ è½½æˆ–ä¸‹è½½å›¾åƒï¼Œç„¶åå°†å…¶ç¼“å­˜

  * è¿™æ„å‘³ç€ï¼ŒåŸåˆ™ä¸Šï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥é¢„åŠ è½½å›¾åƒ

  * ä½†å®ƒå¹¶æ²¡æœ‰ä¸ºæ­¤ç›®çš„è¿›è¡Œä¼˜åŒ–ï¼Œå°†æ¥å¯èƒ½ä¼šä»¥ **`ä¸å®Œå…¨åŠ è½½ / ä¸‹è½½`** å›¾åƒæ•°æ®çš„æ–¹å¼å®ç°

  > ä¸€ä¸ªé€‚å½“çš„ï¼Œæ”¯æŒçš„é¢„åŠ è½½å›¾åƒçš„æ–¹æ³•å°†ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ `API` æä¾›
  >> æ­¤æ–¹æ³•ä¸é€‚ç”¨äºé™æ€å›¾åƒèµ„æº

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  uri|string|æ˜¯|å›¾ç‰‡åœ°å€
  headers|object|æ˜¯|è¯·æ±‚çš„å¤´éƒ¨
  success|function|æ˜¯|æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›å›¾ç‰‡å®½é«˜æ•°æ®
  failure|function|å¦|å¤±è´¥çš„å›è°ƒå‡½æ•°

* `prefetch()`

  ```jsx
  Image.prefetch(url);
  ```

  é¢„åŠ è½½ä¸€ä¸ªè¿œç¨‹å›¾ç‰‡(å°†å…¶ä¸‹è½½åˆ°æœ¬åœ°ç£ç›˜ç¼“å­˜)

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  uri|string|æ˜¯|å›¾ç‰‡åœ°å€

* `abortPrefetch()`

  > ä»… `Android` å¯ç”¨

  ```jsx
  Image.abortPrefetch(requestId);
  ```

  ä¸­æ–­é¢„åŠ è½½æ“ä½œ

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  requestId|number|æ˜¯|å›¾ç‰‡åœ°å€ prefetch() è¿”å›çš„ id

* `queryCache()`

  ```jsx
  Image.queryCache(urls);
  ```

  æŸ¥è¯¢å›¾ç‰‡ç¼“å­˜çŠ¶æ€

  æ ¹æ®å›¾ç‰‡ `URL` åœ°å€è¿”å›ç¼“å­˜çŠ¶æ€ï¼š

  * æ¯”å¦‚ `disk` ï¼ˆç¼“å­˜åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼‰

  * æˆ–æ˜¯ `memory` ï¼ˆç¼“å­˜åœ¨å†…å­˜ä¸­ï¼‰

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  urls|array|æ˜¯|è¦æŸ¥è¯¢ç¼“å­˜çŠ¶æ€çš„å›¾ç‰‡ URL æ•°ç»„

* `resolveAssetSource()`

  ```jsx
  Image.resolveAssetSource(source);
  ```

  å°†èµ„æºå¼•ç”¨è§£æä¸ºå…·æœ‰å±æ€§ `uri` `width` å’Œ `height`

  å‚æ•°ï¼š

  åç§°|ç±»å‹|å¿…å¡«|è¯´æ˜
  -|-|-|-
  source|number, object|æ˜¯|é™æ€å›¾ç‰‡å¼•ç”¨è¯­æ³• require('./image.jpg') æ‰€è¿”å›çš„èµ„æº id æˆ–æ˜¯ä¸€ä¸ª ImageSource

  > `ImageSource` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ç»“æ„ä¸º `{ uri: '<http location || file path>' }`

## `ImageBackground`

[ã€ æŸ¥çœ‹å®˜æ–¹ `ImageBackground` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/imagebackground/)

> ç†Ÿæ‚‰ `Web` çš„å¼€å‘äººå‘˜çš„ä¸€ä¸ªå¸¸è§åŠŸèƒ½è¯·æ±‚æ˜¯`background-image`

è¦å¤„ç†æ­¤ç”¨ä¾‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸ `<image>` å…·æœ‰ç›¸åŒå±æ€§çš„ `<imagebackground>` ç»„ä»¶ï¼Œå¹¶å‘å…¶æ·»åŠ è¦åœ¨å…¶ä¸Šåˆ†å±‚çš„ä»»ä½•å­çº§

* åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¸æƒ³ä½¿ç”¨ `<imagebackground>` ï¼Œå› ä¸ºå®ç°éå¸¸ç®€å•

* æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[ã€ `<imagebackground>` çš„æºä»£ç ã€‘](https://github.com/facebook/react-native/blob/master/Libraries/Image/ImageBackground.js)ï¼Œå¹¶åœ¨éœ€è¦æ—¶åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰ç»„ä»¶

* è¯·æ³¨æ„ï¼Œå¿…é¡»æŒ‡å®šä¸€äº›å®½åº¦å’Œé«˜åº¦æ ·å¼å±æ€§

ç¤ºä¾‹ï¼š

```jsx
return (
  <ImageBackground source={...} style={{width: '100%', height: '100%'}}>
    <Text>Inside</Text>
  </ImageBackground>
);
```

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `Image props` ã€‘](https://reactnative.cn/docs/image#props)

  `Image` çš„å±æ€§

* `style`

  [ã€è§†å›¾æ ·å¼ã€‘](https://reactnative.cn/docs/view-style-props)

* `imageStyle`

  [ã€å›¾ç‰‡æ ·å¼ã€‘](https://reactnative.cn/docs/image-style-props)

* `imageRef`

  å…è®¸è®¾ç½®å¯¹å†…éƒ¨ `Image` ç»„ä»¶çš„å¼•ç”¨

  [ã€å‚è€ƒèµ„æ–™ï¼š`Refs and the DOM` ã€‘](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#___gatsby)

## `KeyboardAvoidingView`

[ã€ æŸ¥çœ‹å®˜æ–¹ `KeyboardAvoidingView` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/keyboardavoidingview/)

> æœ¬ç»„ä»¶ç”¨äºè§£å†³ä¸€ä¸ªå¸¸è§çš„å°´å°¬é—®é¢˜ï¼šæ‰‹æœºä¸Šå¼¹å‡ºçš„é”®ç›˜å¸¸å¸¸ä¼šæŒ¡ä½å½“å‰çš„è§†å›¾

æœ¬ç»„ä»¶å¯ä»¥è‡ªåŠ¨æ ¹æ®é”®ç›˜çš„ä½ç½®ï¼Œè°ƒæ•´è‡ªèº«çš„ `position` æˆ–åº•éƒ¨çš„ `padding` ï¼Œä»¥é¿å…è¢«é®æŒ¡ï¼Œç”¨æ³•ï¼š

```jsx
import { KeyboardAvoidingView } from 'react-native';

<KeyboardAvoidingView style={styles.container} behavior="padding" enabled>
  ... åœ¨è¿™é‡Œæ”¾ç½®éœ€è¦æ ¹æ®é”®ç›˜è°ƒæ•´ä½ç½®çš„ç»„ä»¶ ...
</KeyboardAvoidingView>
```

![å›¾ç‰‡](https://reactnative.cn/docs/assets/KeyboardAvoidingView/example.gif)

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `keyboardVerticalOffset`

  æœ‰æ—¶å€™åº”ç”¨ç¦»å±å¹•é¡¶éƒ¨è¿˜æœ‰ä¸€äº›è·ç¦»ï¼ˆæ¯”å¦‚çŠ¶æ€æ ç­‰ç­‰ï¼‰ï¼Œåˆ©ç”¨æ­¤å±æ€§æ¥è¡¥å¿ä¿®æ­£è¿™æ®µè·ç¦»

* `behavior`

  > æ³¨æ„ï¼š`Android` å’Œ `iOS` åœ¨æ­¤å±æ€§ä¸Šè¡¨ç°å¹¶ä¸ä¸€è‡´
  >> `Android` å¯èƒ½ä¸æŒ‡å®šæ­¤å±æ€§æ›´å¥½ï¼Œè€Œ `iOS` å¯èƒ½ç›¸å

* `contentContainerStyle`

  å¦‚æœè®¾å®š `behavior` å€¼ä¸º `position` ï¼Œåˆ™ä¼šç”Ÿæˆä¸€ä¸ª `View` ä½œä¸ºå†…å®¹å®¹å™¨

  æ­¤å±æ€§ç”¨äºæŒ‡å®šæ­¤å†…å®¹å®¹å™¨çš„æ ·å¼

* `enabled`

  æ˜¯å¦å¯ç”¨ `KeyboardAvoidingView`

  > é»˜è®¤ä¸º `true`

## `MaskedViewIOS`

[ã€ æŸ¥çœ‹å®˜æ–¹ `MaskedViewIOS` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/maskedviewios/)

æ¸²æŸ“ä¸€ä¸ªå¸¦è’™ç‰ˆçš„è§†å›¾ï¼Œè’™ç‰ˆå…ƒç´ åœ¨ `maskElement` è¿™ä¸ª `prop` ä¸­æŒ‡å®š

```jsx
import React from 'react';
import { MaskedViewIOS, Text, View } from 'react-native';

class MyMaskedView extends React.Component {
  render() {
    return (
      // å†³å®šè’™ç‰ˆçš„å½¢çŠ¶
      <MaskedViewIOS
        style={{ flex: 1, flexDirection: 'row', height: '100%' }}
        maskElement={
          <View style={{
            // è’™ç‰ˆçš„æ•ˆæœä¸å…¶æœ¬èº«é€æ˜åº¦ç›¸åã€‚å…ˆè®¾ç½®æ•´ä¸ªèƒŒæ™¯é€æ˜ï¼Œè¡¨ç¤ºå®Œå…¨ç›–ä½è’™ç‰ˆåº•ä¸‹çš„å…ƒç´ ï¼Œä¸æ˜¾ç¤ºå‡ºæ¥ã€‚
            backgroundColor: 'transparent',
            flex: 1,
            justifyContent: 'center',
            alignItems: 'center',
          }}>
            <Text style={{
              fontSize: 60,
              // æ–‡å­—ä¸é€æ˜ï¼Œè¡¨ç¤ºæ–‡å­—éƒ¨åˆ†ç›–ä½çš„å…ƒç´ ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚
              color: 'black',
              fontWeight: 'bold',
            }}>
              Basic Mask
            </Text>
          </View>
        }
      >
        { /* è¢«ç›–åœ¨è’™ç‰ˆä¹‹ä¸‹çš„å…ƒç´ ã€‚å¯ä»¥æ”¾ç½®ä»»æ„å…ƒç´ ï¼Œä¾‹å¦‚å›¾ç‰‡ç­‰ã€‚ */ }
        <View style={{ flex: 1, height: '100%', backgroundColor: '#324376' }} />
        <View style={{ flex: 1, height: '100%', backgroundColor: '#F5DD90' }} />
        <View style={{ flex: 1, height: '100%', backgroundColor: '#F76C5E' }} />
      </MaskedViewIOS>
    );
  }
}
```

ä¸‹é¢çš„æˆªå›¾åˆ†åˆ«æ¼”ç¤ºäº†æŠŠä»¥ä¸‹ç»„ä»¶æ”¾åœ¨è’™ç‰ˆä¸‹çš„æ•ˆæœ

* `<View>`
* `<Text>`
* `<Image>`

> åŸºæœ¬ä¸Šä½ å¯ä»¥æŠŠä»»ä½•ç»„ä»¶æ”¾åœ¨è’™ç‰ˆä¸‹

![å›¾ç‰‡](https://reactnative.cn/docs/assets/MaskedViewIOS/example.png)

ç”± `maskElement` æ‰€æŒ‡å®šçš„è§†å›¾çš„ `alpha` é€šé“å€¼ï¼ˆé€æ˜åº¦ï¼‰å†³å®šäº†è¢«ç›–ä½çš„è§†å›¾å¯ä»¥é€å‡ºçš„ç¨‹åº¦

* å®Œå…¨ä¸é€æ˜æˆ–éƒ¨åˆ†é€æ˜çš„åƒç´ ä¼šä½¿å¾—è’™ç‰ˆä¸‹çš„å†…å®¹æ˜¾ç¤ºå‡ºæ¥

* è€Œå®Œå…¨é€æ˜çš„åƒç´ åˆ™ä¼šç›–ä½è’™ç‰ˆä¸‹çš„å†…å®¹

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `maskElement`

  æ©è”½å…ƒç´ 

## `Modal`

[ã€ æŸ¥çœ‹å®˜æ–¹ `Modal` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/modal/)

`Modal` ç»„ä»¶æ˜¯ä¸€ç§ç®€å•çš„è¦†ç›–åœ¨å…¶ä»–è§†å›¾ä¹‹ä¸Šæ˜¾ç¤ºå†…å®¹çš„æ–¹å¼

```jsx
import React, { Component } from "react";
import { Modal, Text, TouchableHighlight, View } from "react-native";

class ModalExample extends Component {
  state = {
    modalVisible: false
  };

  setModalVisible(visible) {
    this.setState({ modalVisible: visible });
  }

  render() {
    return (
      <View style={{ marginTop: 22 }}>
        <Modal
          animationType="slide"
          transparent={false}
          visible={this.state.modalVisible}
          onRequestClose={() => {
            alert("Modal has been closed.");
          }}
        >
          <View style={{ marginTop: 22 }}>
            <View>
              <Text>Hello World!</Text>

              <TouchableHighlight
                onPress={() => {
                  this.setModalVisible(!this.state.modalVisible);
                }}
              >
                <Text>Hide Modal</Text>
              </TouchableHighlight>
            </View>
          </View>
        </Modal>

        <TouchableHighlight
          onPress={() => {
            this.setModalVisible(true);
          }}
        >
          <Text>Show Modal</Text>
        </TouchableHighlight>
      </View>
    );
  }
}
```

### æŸ¥çœ‹å±æ€§ `Props`

* `visible`

  å†³å®š `modal` æ˜¯å¦æ˜¾ç¤º

* `supportedOrientations`

  ç”¨äºæŒ‡å®šåœ¨è®¾å¤‡åˆ‡æ¢æ¨ªç«–å±æ–¹å‘æ—¶ï¼Œ`modal` ä¼šåœ¨å“ªäº›å±å¹•æœå‘ä¸‹è·Ÿéšæ—‹è½¬

  * åœ¨ `iOS` ä¸Šï¼Œé™¤äº†æœ¬å±æ€§å¤–ï¼Œè¿˜ä¼šå—åˆ°åº”ç”¨çš„ `Info.plist` æ–‡ä»¶ä¸­ `UISupportedInterfaceOrientations` çš„é™åˆ¶

  * å¦‚æœè¿˜è®¾ç½®äº† `presentationStyle` å±æ€§ä¸º `pageSheet` æˆ– `formSheet` ï¼Œåˆ™åœ¨ `iOS` ä¸Šæœ¬å±æ€§å°†è¢«å¿½ç•¥

* `onRequestClose`

  å›è°ƒå‡½æ•°ï¼Œä¼šåœ¨ç”¨æˆ·æŒ‰ä¸‹ `Android` è®¾å¤‡ä¸Šçš„åé€€æŒ‰é”®æˆ–æ˜¯ `Apple TV` ä¸Šçš„èœå•é”®æ—¶è§¦å‘

  > è¯·åŠ¡å¿…æ³¨æ„æœ¬å±æ€§åœ¨ `Android` å¹³å°ä¸Šä¸ºå¿…å¡«
  >> ä¸”ä¼šåœ¨ `modal` å¤„äºå¼€å¯çŠ¶æ€æ—¶é˜»æ­¢ `BackHandler` äº‹ä»¶

* `onShow`

  å›è°ƒå‡½æ•°ï¼Œä¼šåœ¨ `modal` æ˜¾ç¤ºæ—¶è°ƒç”¨

* `transparent`

  æ˜¯æŒ‡èƒŒæ™¯æ˜¯å¦é€æ˜

  > é»˜è®¤ä¸ºç™½è‰²
  >> å°†è¿™ä¸ªå±æ€§è®¾ä¸º `true` çš„æ—¶å€™å¼¹å‡ºä¸€ä¸ªé€æ˜èƒŒæ™¯å±‚çš„ `modal`

* `animationType`

  æŒ‡å®šäº† `modal` çš„åŠ¨ç”»ç±»å‹ï¼š

  * `slide`

    ä»åº•éƒ¨æ»‘å…¥æ»‘å‡º

  * `fade`

    æ·¡å…¥æ·¡å‡º

  * `none`

    æ²¡æœ‰åŠ¨ç”»ï¼Œç›´æ¥è¹¦å‡ºæ¥

  > é»˜è®¤å€¼ä¸º `none`

* `hardwareAccelerated`

  > ä»… `Android` å¯ç”¨

  å†³å®šæ˜¯å¦å¼ºåˆ¶å¯ç”¨ç¡¬ä»¶åŠ é€Ÿæ¥ç»˜åˆ¶å¼¹å‡ºå±‚

* `onDismiss`

  > ä»… `iOS` å¯ç”¨

  å›è°ƒå‡½æ•°ï¼Œä¼šåœ¨ `modal` è¢«å…³é—­æ—¶è°ƒç”¨

* `onOrientationChange`

  > ä»… `iOS` å¯ç”¨

  å›è°ƒå‡½æ•°ï¼Œæ¨¡æ€çª—æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå½“è®¾å¤‡æ–¹å‘å‘ç”Ÿæ›´æ”¹æ—¶è°ƒç”¨

  > æä¾›çš„è®¾å¤‡æ–¹å‘ä»…ä¸º **`ç«–å±`** æˆ– **`æ¨ªå±`**
  >> æ— è®ºå½“å‰æ–¹å‘å¦‚ä½•ï¼Œä¹Ÿä¼šåœ¨åˆå§‹æ¸²æŸ“æ—¶è°ƒç”¨æ­¤å›è°ƒæ–¹æ³•

* `presentationStyle`

  > ä»… `iOS` å¯ç”¨

  å†³å®š `modal`ï¼ˆåœ¨è¾ƒå¤§å±å¹•çš„è®¾å¤‡æ¯”å¦‚ `iPad` æˆ–æ˜¯ `Plus` æœºå‹ï¼‰å¦‚ä½•å±•ç°

  * `fullScreen`

    å®Œå…¨ç›–æ»¡å±å¹•

  * `pageSheet`

    ç«–ç›´æ–¹å‘å‡ ä¹ç›–æ»¡ï¼Œæ°´å¹³å±…ä¸­ï¼Œå·¦å³ç•™å‡ºä¸€å®šç©ºç™½ï¼ˆä»…ç”¨äºå¤§å±è®¾å¤‡ï¼‰

  * `formSheet`

    ç«–ç›´å’Œæ°´å¹³éƒ½å±…ä¸­ï¼Œå››å‘¨éƒ½ç•™å‡ºä¸€å®šç©ºç™½ï¼ˆä»…ç”¨äºå¤§å±è®¾å¤‡ï¼‰

  * `overFullScreen`

    å®Œå…¨ç›–æ»¡å±å¹•ï¼ŒåŒæ—¶å…è®¸é€æ˜

  > é»˜è®¤ä¼šæ ¹æ® `transparent` å±æ€§è€Œè®¾ç½®ä¸ºï¼š
  > * `overFullScreen`
  > * æˆ–æ˜¯ `fullScreen`

  [ã€æ›´å¤šç»†èŠ‚è¯·å‚é˜…ã€‘](https://developer.apple.com/reference/uikit/uimodalpresentationstyle)

* `animated`

  > å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æœªè¿›è¡Œè¯´æ˜ï¼Œè¯·è‡ªè¡Œäº†è§£

## `Picker`

[ã€ æŸ¥çœ‹å®˜æ–¹ `Picker` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/picker/)

> æœ¬ç»„ä»¶å¯ä»¥åœ¨ `iOS` å’Œ `Android` ä¸Šæ¸²æŸ“åŸç”Ÿçš„é€‰æ‹©å™¨

ç”¨ä¾‹ï¼š

```jsx
<Picker
  selectedValue={this.state.language}
  style={{ height: 50, width: 100 }}
  onValueChange={(itemValue, itemIndex) => this.setState({language: itemValue})}>
  <Picker.Item label="Java" value="java" />
  <Picker.Item label="JavaScript" value="js" />
</Picker>
```

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `onValueChange`

  æŸä¸€é¡¹è¢«é€‰ä¸­æ—¶æ‰§è¡Œæ­¤å›è°ƒ

  è°ƒç”¨æ—¶å¸¦æœ‰å¦‚ä¸‹å‚æ•°ï¼š

  * `itemValue`

    è¢«é€‰ä¸­é¡¹çš„ `value` å±æ€§

  * `itemPosition`

    è¢«é€‰ä¸­é¡¹åœ¨ `picker` ä¸­çš„ç´¢å¼•ä½ç½®

* `selectedValue`

  é»˜è®¤é€‰ä¸­çš„å€¼ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•´æ•°

* `style`

  æ ·å¼å±æ€§

* `testID`

  ç”¨äºåœ¨ç«¯å¯¹ç«¯æµ‹è¯•ä¸­å®šä½æ­¤è§†å›¾

* `enabled`

  > ä»… `Android` å¯ç”¨

  å¦‚æœè®¾ä¸º `false` ï¼Œåˆ™ä¼šç¦ç”¨æ­¤é€‰æ‹©å™¨

* `mode`

  > ä»… `Android` å¯ç”¨

  åœ¨ `Android` ä¸Šï¼Œå¯ä»¥æŒ‡å®šåœ¨ç”¨æˆ·ç‚¹å‡»é€‰æ‹©å™¨æ—¶ï¼Œä»¥æ€æ ·çš„å½¢å¼å‘ˆç°é€‰é¡¹ï¼š

  * `dialog`

    æ˜¾ç¤ºä¸€ä¸ªæ¨¡æ€å¯¹è¯æ¡†

    > é»˜è®¤é€‰é¡¹

  * `dropdown`

    ä»¥é€‰æ‹©å™¨æ‰€åœ¨ä½ç½®ä¸ºé”šç‚¹å±•å¼€ä¸€ä¸ªä¸‹æ‹‰æ¡†

* `prompt`

  > ä»… `Android` å¯ç”¨

  è®¾ç½®é€‰æ‹©å™¨çš„æç¤ºå­—ç¬¦ä¸²

  åœ¨ `Android` çš„å¯¹è¯æ¡†æ¨¡å¼ä¸­ç”¨ä½œå¯¹è¯æ¡†çš„æ ‡é¢˜

* `itemStyle`

  > ä»… `iOS` å¯ç”¨

  æŒ‡å®šåº”ç”¨åœ¨æ¯é¡¹æ ‡ç­¾ä¸Šçš„æ ·å¼

## `PickerIOS`

[ã€ æŸ¥çœ‹å®˜æ–¹ `PickerIOS` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/pickerios/)

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `itemStyle`

  `Text` æ ·å¼å±æ€§

* `onValueChange`

* `selectedValue`

## `ProgressBarAndroid`

[ã€ æŸ¥çœ‹å®˜æ–¹ `ProgressBarAndroid` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/progressbarandroid/)

å°è£…äº† `Android` å¹³å°ä¸Šçš„ `ProgressBar` çš„ `React` ç»„ä»¶

* è¿™ä¸ªç»„ä»¶å¯ä»¥ç”¨æ¥è¡¨ç¤ºåº”ç”¨æ­£åœ¨åŠ è½½æˆ–è€…æœ‰äº›äº‹æƒ…æ­£åœ¨è¿›è¡Œä¸­

ä¾‹å­ï¼š

```jsx
import React, { Component } from "react";
import {
  ProgressBarAndroid,
  AppRegistry,
  StyleSheet,
  View
} from "react-native";

export default class App extends Component {
  render() {
    return (
      <View style={styles.container}>
        <ProgressBarAndroid />
        <ProgressBarAndroid styleAttr="Horizontal" />
        <ProgressBarAndroid styleAttr="Horizontal" color="#2196F3" />
        <ProgressBarAndroid
          styleAttr="Horizontal"
          indeterminate={false}
          progress={0.5}
        />
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "space-evenly",
    padding: 10
  }
});
```

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `animating`

  æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡

  > é»˜è®¤ä¸º `true` æ˜¾ç¤º

* `color`

  è¿›åº¦æ¡çš„é¢œè‰²

* `indeterminate`

  å†³å®šè¿›åº¦æ¡æ˜¯å¦è¦æ˜¾ç¤ºä¸€ä¸ªä¸ç¡®å®šçš„è¿›åº¦

  > æ³¨æ„è¿™ä¸ªåœ¨ `styleAttr` æ˜¯ `Horizontal` çš„æ—¶å€™å¿…é¡»æ˜¯ `false`

* `progress`

  å½“å‰çš„è¿›åº¦å€¼ï¼ˆåœ¨ `0` åˆ° `1` ä¹‹é—´ï¼‰

* `styleAttr`

  è¿›åº¦æ¡çš„æ ·å¼ï¼Œå¯å–å€¼æœ‰ï¼š

  * `Horizontal`
  * `Normal`
  * `Small`
  * `Large`
  * `Inverse`
  * `SmallInverse`
  * `LargeInverse`

  > é»˜è®¤å€¼ä¸º `Normal`

* `testID`

  ç”¨æ¥åœ¨ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å®šä½è¿™ä¸ªè§†å›¾

## `ProgressViewIOS`

[ã€ æŸ¥çœ‹å®˜æ–¹ `ProgressViewIOS` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/progressviewios/)

ä½¿ç”¨ `ProgressViewIOS` æ¥åœ¨ `iOS` ä¸Šæ¸²æŸ“ä¸€ä¸ª `UIProgressView`

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `progress`

  å½“å‰çš„è¿›åº¦å€¼ï¼ˆ `0` åˆ° `1` ä¹‹é—´ï¼‰

* `progressImage`

  ä¸€ä¸ªå¯ä»¥æ‹‰ä¼¸çš„å›¾ç‰‡ï¼Œç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡

* `progressTintColor`

  è¿›åº¦æ¡æœ¬èº«æŸ“ä¸Šçš„é¢œè‰²

* `progressViewStyle`

  è¿›åº¦æ¡çš„æ ·å¼

* `trackImage`

  ä¸€ä¸ªå¯æ‹‰ä¼¸çš„å›¾ç‰‡ï¼Œç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡åé¢çš„è½¨é“

* `trackTintColor`

  è¿›åº¦æ¡è½¨é“æŸ“ä¸Šçš„é¢œè‰²

## `RefreshControl`

[ã€ æŸ¥çœ‹å®˜æ–¹ `RefreshControl` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/refreshcontrol/)

è¿™ä¸€ç»„ä»¶å¯ä»¥ç”¨åœ¨ `ScrollView` æˆ– `FlatList` å†…éƒ¨ï¼Œä¸ºå…¶æ·»åŠ ä¸‹æ‹‰åˆ·æ–°çš„åŠŸèƒ½

* å½“ `ScrollView` å¤„äºç«–ç›´æ–¹å‘çš„èµ·ç‚¹ä½ç½®ï¼ˆ `scrollY: 0` ï¼‰ï¼Œæ­¤æ—¶ä¸‹æ‹‰ä¼šè§¦å‘ä¸€ä¸ª `onRefresh` äº‹ä»¶

```jsx
class RefreshableList extends Component {
  constructor(props) {
    super(props);
    this.state = {
      refreshing: false,
    };
  }

  _onRefresh = () => {
    this.setState({refreshing: true});
    fetchData().then(() => {
      this.setState({refreshing: false});
    });
  }

  render() {
    return (
      <ScrollView
        refreshControl={
          <RefreshControl
            refreshing={this.state.refreshing}
            onRefresh={this._onRefresh}
          />
        }
        ...
      />
    );
  }
  ...
}
```

> æ³¨æ„ï¼š`refreshing` æ˜¯ä¸€ä¸ªå—æ§å±æ€§
>> æ‰€ä»¥å¿…é¡»åœ¨ `onRefresh` å‡½æ•°ä¸­è®¾ç½®ä¸º `true` ï¼Œå¦åˆ™ `loading` æŒ‡ç¤ºå™¨ä¼šç«‹å³åœæ­¢

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `refreshing`

  è§†å›¾æ˜¯å¦åº”è¯¥åœ¨åˆ·æ–°æ—¶æ˜¾ç¤ºæŒ‡ç¤ºå™¨

* `onRefresh`

  åœ¨è§†å›¾å¼€å§‹åˆ·æ–°æ—¶è°ƒç”¨

* `colors`

  > ä»… `Android` å¯ç”¨

  æŒ‡å®šè‡³å°‘ä¸€ç§é¢œè‰²ç”¨æ¥ç»˜åˆ¶åˆ·æ–°æŒ‡ç¤ºå™¨

* `enabled`

  > ä»… `Android` å¯ç”¨

  æŒ‡å®šæ˜¯å¦è¦å¯ç”¨åˆ·æ–°æŒ‡ç¤ºå™¨

* `progressBackgroundColor`

  > ä»… `Android` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨çš„èƒŒæ™¯è‰²

* `progressViewOffset`

  > ä»… `Android` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨çš„å‚ç›´èµ·å§‹ä½ç½®( `top offset` )

* `size`

  > ä»… `Android` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨çš„å¤§å°ï¼Œå…·ä½“æ•°å€¼å¯å‚é˜… `RefreshControl.SIZE`

* `tintColor`

  > ä»… `iOS` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨çš„é¢œè‰²

* `title`

  > ä»… `iOS` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨ä¸‹æ˜¾ç¤ºçš„æ–‡å­—

* `titleColor`

  > ä»… `iOS` å¯ç”¨

  æŒ‡å®šåˆ·æ–°æŒ‡ç¤ºå™¨ä¸‹æ˜¾ç¤ºçš„æ–‡å­—çš„é¢œè‰²

## `SafeAreaView`

[ã€ æŸ¥çœ‹å®˜æ–¹ `SafeAreaView` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/safeareaview/)

> æœ¬ç»„ä»¶ç›®å‰ä»…æ”¯æŒ `iOS` è®¾å¤‡ä»¥åŠ `iOS 11` æˆ–æ›´é«˜ç‰ˆæœ¬

`SafeAreaView` çš„ç›®çš„æ˜¯åœ¨ä¸€ä¸ª **`å®‰å…¨`** çš„å¯è§†åŒºåŸŸå†…æ¸²æŸ“å†…å®¹

* å…·ä½“æ¥è¯´å°±æ˜¯å› ä¸ºç›®å‰æœ‰ `iPhone X` è¿™æ ·çš„å¸¦æœ‰ **`åˆ˜æµ·`** çš„å…¨é¢å±è®¾å¤‡ï¼Œæ‰€ä»¥éœ€è¦é¿å…å†…å®¹æ¸²æŸ“åˆ°ä¸å¯è§çš„â€œåˆ˜æµ·â€èŒƒå›´å†…

* `SafeAreaView` ä¼šè‡ªåŠ¨æ ¹æ®ç³»ç»Ÿçš„å„ç§å¯¼èˆªæ ã€å·¥å…·æ ç­‰é¢„ç•™å‡ºç©ºé—´æ¥æ¸²æŸ“å†…éƒ¨å†…å®¹

* åªéœ€ç®€å•åœ°æŠŠä½ åŸæœ‰çš„è§†å›¾ç”¨ `SafeAreaView` åŒ…èµ·æ¥ï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ª `flex:1` çš„æ ·å¼

  * å½“ç„¶å¯èƒ½è¿˜éœ€è¦ä¸€äº›å’Œä½ çš„è®¾è®¡ç›¸åŒ¹é…çš„èƒŒæ™¯è‰²

```jsx
<SafeAreaView style={{flex: 1, backgroundColor: '#fff'}}>
  <View style={{ flex: 1 }}>
    <Text>Hello World!</Text>
  </View>
</SafeAreaView>
```

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

## `ScrollView`

[ã€ æŸ¥çœ‹å®˜æ–¹ `ScrollView` æ–‡æ¡£ ã€‘](https://reactnative.cn/docs/scrollview/)

ä¸€ä¸ªå°è£…äº†å¹³å°çš„ `ScrollView`ï¼ˆæ»šåŠ¨è§†å›¾ï¼‰çš„ç»„ä»¶ï¼ŒåŒæ—¶è¿˜é›†æˆäº†è§¦æ‘¸é”å®šçš„ **`å“åº”è€…`** ç³»ç»Ÿ

> æ³¨æ„ï¼š`ScrollView` å¿…é¡»æœ‰ä¸€ä¸ªç¡®å®šçš„é«˜åº¦æ‰èƒ½æ­£å¸¸å·¥ä½œ
>> å› ä¸ºå®ƒå®é™…ä¸Šæ‰€åšçš„å°±æ˜¯å°†ä¸€ç³»åˆ—ä¸ç¡®å®šé«˜åº¦çš„å­ç»„ä»¶è£…è¿›ä¸€ä¸ªç¡®å®šé«˜åº¦çš„å®¹å™¨ï¼ˆé€šè¿‡æ»šåŠ¨æ“ä½œï¼‰

è¦ç»™ `ScrollView` ä¸€ä¸ªç¡®å®šçš„é«˜åº¦çš„è¯ï¼Œè¦ä¹ˆç›´æ¥ç»™å®ƒè®¾ç½®é«˜åº¦ï¼ˆä¸å»ºè®®ï¼‰ï¼Œè¦ä¹ˆç¡®å®šæ‰€æœ‰çš„çˆ¶å®¹å™¨éƒ½æœ‰ç¡®å®šçš„é«˜åº¦

* ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼šç»™ `ScrollView` è®¾ç½® `flex:1` ä»¥ä½¿å…¶è‡ªåŠ¨å¡«å……çˆ¶å®¹å™¨çš„ç©ºä½™ç©ºé—´

* ä½†å‰ææ¡ä»¶æ˜¯æ‰€æœ‰çš„çˆ¶å®¹å™¨æœ¬èº«ä¹Ÿè®¾ç½®äº† `flex` æˆ–è€…æŒ‡å®šäº†é«˜åº¦ï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´æ— æ³•æ­£å¸¸æ»šåŠ¨

* ä½ å¯ä»¥ä½¿ç”¨å…ƒç´ æŸ¥çœ‹å™¨æ¥æŸ¥æ‰¾å…·ä½“å“ªä¸€å±‚é«˜åº¦ä¸æ­£ç¡®

> `ScrollView` å†…éƒ¨çš„å…¶ä»–å“åº”è€…å°šæ— æ³•é˜»æ­¢ `ScrollView` æœ¬èº«æˆä¸ºå“åº”è€…

`ScrollView` å’Œ `FlatList` åº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ

* `ScrollView` ä¼šç®€å•ç²—æš´åœ°æŠŠæ‰€æœ‰å­å…ƒç´ ä¸€æ¬¡æ€§å…¨éƒ¨æ¸²æŸ“å‡ºæ¥

  * å…¶åŸç†æµ…æ˜¾æ˜“æ‡‚ï¼Œä½¿ç”¨ä¸Šè‡ªç„¶ä¹Ÿæœ€ç®€å•

  * ç„¶è€Œè¿™æ ·ç®€å•çš„æ¸²æŸ“é€»è¾‘è‡ªç„¶å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„ä¸è¶³

  * æƒ³è±¡ä¸€ä¸‹ä½ æœ‰ä¸€ä¸ªç‰¹åˆ«é•¿çš„åˆ—è¡¨éœ€è¦æ˜¾ç¤ºï¼Œå¯èƒ½æœ‰å¥½å‡ å±çš„é«˜åº¦

  * åˆ›å»ºå’Œæ¸²æŸ“é‚£äº›å±å¹•ä»¥å¤–çš„JSç»„ä»¶å’ŒåŸç”Ÿè§†å›¾ï¼Œæ˜¾ç„¶å¯¹äºæ¸²æŸ“æ€§èƒ½å’Œå†…å­˜å ç”¨éƒ½æ˜¯ä¸€ç§æå¤§çš„æ‹–ç´¯å’Œæµªè´¹

* `FlatList` ä¼šæƒ°æ€§æ¸²æŸ“å­å…ƒç´ ï¼Œåªåœ¨å®ƒä»¬å°†è¦å‡ºç°åœ¨å±å¹•ä¸­æ—¶å¼€å§‹æ¸²æŸ“

  * è¿™ç§æƒ°æ€§æ¸²æŸ“é€»è¾‘è¦å¤æ‚å¾ˆå¤šï¼Œå› è€Œ `API` åœ¨ä½¿ç”¨ä¸Šä¹Ÿæ›´ä¸ºç¹ç

> é™¤éä½ è¦æ¸²æŸ“çš„æ•°æ®ç‰¹åˆ«å°‘ï¼Œå¦åˆ™ä½ éƒ½åº”è¯¥å°½é‡ä½¿ç”¨ `FlatList` ï¼Œå“ªæ€•å®ƒä»¬ç”¨èµ·æ¥æ›´éº»çƒ¦
>> æ­¤å¤–FlatListè¿˜å¯ä»¥æ–¹ä¾¿åœ°æ¸²æŸ“è¡Œé—´åˆ†éš”çº¿ï¼Œæ”¯æŒå¤šåˆ—å¸ƒå±€ï¼Œæ— é™æ»šåŠ¨åŠ è½½ç­‰ç­‰

### æŸ¥çœ‹å±æ€§ `Props`

* [ã€ `View props` ã€‘](https://reactnative.cn/docs/view/#props)

  `View` çš„å±æ€§

* `alwaysBounceVertical`

  > ä»… `iOS` å¯ç”¨

  å½“æ­¤å±æ€§ä¸º `true` æ—¶ï¼Œå‚ç›´æ–¹å‘å³ä½¿å†…å®¹æ¯”æ»šåŠ¨è§†å›¾æœ¬èº«è¿˜è¦å°ï¼Œä¹Ÿå¯ä»¥å¼¹æ€§åœ°æ‹‰åŠ¨ä¸€æˆª

  > å½“ `horizontal={true}` æ—¶é»˜è®¤å€¼ä¸º `false` ï¼Œå¦åˆ™ä¸º `true`

* `contentContainerStyle`

  è¿™äº›æ ·å¼ä¼šåº”ç”¨åˆ°ä¸€ä¸ªå†…å±‚çš„å†…å®¹å®¹å™¨ä¸Šï¼Œæ‰€æœ‰çš„å­è§†å›¾éƒ½ä¼šåŒ…è£¹åœ¨å†…å®¹å®¹å™¨å†…

  ```jsx
  return (
    <ScrollView contentContainerStyle={styles.contentContainer}>
    </ScrollView>
  );
  ...
  const styles = StyleSheet.create({
    contentContainer: {
      paddingVertical: 20
    }
  });
  ```

* `disableScrollViewPanResponder`

  å¦‚æœä¸º `true` ï¼Œåˆ™ç¦ç”¨ `ScrollView` ä¸Šçš„é»˜è®¤ `JS` å“åº”ç¨‹åºï¼Œå¹¶å°†å¯¹ `ScrollView` å†…éƒ¨è§¦æ‘¸çš„å®Œå…¨æ§åˆ¶æƒç•™ç»™å…¶å­ç»„ä»¶

  å¦‚æœå¯ç”¨äº† `SnapToInterval` ï¼Œè¿™å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸éµå¾ªå…¸å‹çš„è§¦æ‘¸æ¨¡å¼

  ä¸è¦åœ¨æ²¡æœ‰ `SnapToInterval` çš„å¸¸è§„ `ScrollView` ç”¨ä¾‹ä¸Šä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¯¼è‡´åœ¨æ»šåŠ¨æ—¶å‘ç”Ÿæ„å¤–çš„è§¦æ‘¸

  > é»˜è®¤å€¼ä¸º `false`

* `keyboardDismissMode`

  ç”¨æˆ·æ‹–æ‹½æ»šåŠ¨è§†å›¾çš„æ—¶å€™ï¼Œæ˜¯å¦è¦éšè—è½¯é”®ç›˜

  * è·¨å¹³å°å¯ç”¨çš„å€¼:

    * `none`

      é»˜è®¤å€¼ï¼Œæ‹–æ‹½æ—¶ä¸éšè—è½¯é”®ç›˜

    * `on-drag`

      å½“æ‹–æ‹½å¼€å§‹çš„æ—¶å€™éšè—è½¯é”®ç›˜

  * ä»… `iOS` å¯ç”¨çš„å€¼

    * `interactive`

      è½¯é”®ç›˜ä¼´éšæ‹–æ‹½æ“ä½œåŒæ­¥åœ°æ¶ˆå¤±ï¼Œå¹¶ä¸”å¦‚æœå¾€ä¸Šæ»‘åŠ¨ä¼šæ¢å¤é”®ç›˜

    > å®‰å“è®¾å¤‡ä¸Šä¸æ”¯æŒè¿™ä¸ªé€‰é¡¹ï¼Œä¼šè¡¨ç°çš„å’Œ `none` ä¸€æ ·

* `keyboardShouldPersistTaps`

  å¦‚æœå½“å‰ç•Œé¢æœ‰è½¯é”®ç›˜ï¼Œé‚£ä¹ˆç‚¹å‡» `scrollview` åæ˜¯å¦æ”¶èµ·é”®ç›˜ï¼Œå–å†³äºæœ¬å±æ€§çš„è®¾ç½®

  > è¯‘æ³¨ï¼šå¾ˆå¤šäººååº” `TextInput` æ— æ³•è‡ªåŠ¨å¤±å»ç„¦ç‚¹ï¼Œæˆ–éœ€è¦ç‚¹å‡»å¤šæ¬¡åˆ‡æ¢åˆ°å…¶ä»–ç»„ä»¶ç­‰ç­‰é—®é¢˜
  >> å…¶å…³é”®éƒ½æ˜¯éœ€è¦å°† `TextInput` æ”¾åˆ° `ScrollView` ä¸­å†è®¾ç½®æœ¬å±æ€§

  * `never`

    é»˜è®¤å€¼ï¼Œç‚¹å‡» `TextInput` ä»¥å¤–çš„å­ç»„ä»¶ä¼šä½¿å½“å‰çš„è½¯é”®ç›˜æ”¶èµ·

    æ­¤æ—¶å­å…ƒç´ ä¸ä¼šæ”¶åˆ°ç‚¹å‡»äº‹ä»¶

  * `always`

    é”®ç›˜ä¸ä¼šè‡ªåŠ¨æ”¶èµ·ï¼Œ`ScrollView` ä¹Ÿä¸ä¼šæ•æ‰ç‚¹å‡»äº‹ä»¶ï¼Œä½†å­ç»„ä»¶å¯ä»¥æ•è·

  * `handled`

    å½“ç‚¹å‡»äº‹ä»¶è¢«å­ç»„ä»¶æ•è·æ—¶ï¼Œé”®ç›˜ä¸ä¼šè‡ªåŠ¨æ”¶èµ·

    è¿™æ ·åˆ‡æ¢ `TextInput` æ—¶é”®ç›˜å¯ä»¥ä¿æŒçŠ¶æ€

    å¤šæ•°å¸¦æœ‰ `TextInput` çš„æƒ…å†µä¸‹ä½ åº”è¯¥é€‰æ‹©æ­¤é¡¹

  * `false`

    å·²è¿‡æœŸï¼Œè¯·ä½¿ç”¨ `never` ä»£æ›¿

  * `true`

    å·²è¿‡æœŸï¼Œè¯·ä½¿ç”¨ `always` ä»£æ›¿

* `onContentSizeChange`

  æ­¤å‡½æ•°ä¼šåœ¨ `ScrollView` å†…éƒ¨å¯æ»šåŠ¨å†…å®¹çš„è§†å›¾å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨

  è°ƒç”¨å‚æ•°ä¸ºå†…å®¹è§†å›¾çš„å®½å’Œé«˜:

  * `contentWidth`
  * `contentHeight`

  æ­¤æ–¹æ³•æ˜¯é€šè¿‡ç»‘å®šåœ¨å†…å®¹å®¹å™¨ä¸Šçš„ `onLayout` æ¥å®ç°çš„

* `onMomentumScrollBegin`

  æ»šåŠ¨åŠ¨ç”»å¼€å§‹æ—¶è°ƒç”¨æ­¤å‡½æ•°

* `onMomentumScrollEnd`

  æ»šåŠ¨åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨æ­¤å‡½æ•°

* `onScroll`

  åœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œæ¯å¸§æœ€å¤šè°ƒç”¨ä¸€æ¬¡æ­¤å›è°ƒå‡½æ•°

  è°ƒç”¨çš„é¢‘ç‡å¯ä»¥ç”¨ `scrollEventThrottle` å±æ€§æ¥æ§åˆ¶

* `onScrollBeginDrag`

  å½“ç”¨æˆ·å¼€å§‹æ‹–åŠ¨æ­¤è§†å›¾æ—¶è°ƒç”¨æ­¤å‡½æ•°

* `onScrollEndDrag`

  å½“ç”¨æˆ·åœæ­¢æ‹–åŠ¨æ­¤è§†å›¾æ—¶è°ƒç”¨æ­¤å‡½æ•°

* `pagingEnabled`

  å½“å€¼ä¸º `true` æ—¶ï¼Œæ»šåŠ¨æ¡ä¼šåœåœ¨æ»šåŠ¨è§†å›¾çš„å°ºå¯¸çš„æ•´æ•°å€ä½ç½®

  è¿™ä¸ªå¯ä»¥ç”¨åœ¨æ°´å¹³åˆ†é¡µä¸Š

  > é»˜è®¤å€¼ä¸º `false`
  >> æ³¨æ„ï¼šå‚ç›´åˆ†é¡µåœ¨ `Android` ä¸Šä¸æ”¯æŒ

* `refreshControl`

  æŒ‡å®š[ã€ `RefreshControl` ã€‘](https://reactnative.cn/docs/refreshcontrol)ç»„ä»¶ï¼Œç”¨äºä¸º `ScrollView` æä¾›ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½

  > åªèƒ½ç”¨äºå‚ç›´è§†å›¾ï¼Œå³ `horizontal` ä¸èƒ½ä¸º `true`

* `removeClippedSubviews`

  > å®éªŒç‰¹æ€§

  å½“æ­¤å±æ€§ä¸º `true` æ—¶ï¼Œå±å¹•ä¹‹å¤–çš„å­è§†å›¾ä¼šè¢«ç§»é™¤

  * å­è§†å›¾çš„ `overflow` æ ·å¼éœ€è¦è®¾ä¸º `hidden`

  è¿™ä¸ªå¯ä»¥æå‡å¤§åˆ—è¡¨çš„æ»šåŠ¨æ€§èƒ½

  > é»˜è®¤å€¼ä¸º `true`

* `scrollEnabled`

  å½“å€¼ä¸º `false` çš„æ—¶å€™ï¼Œå†…å®¹ä¸èƒ½æ»šåŠ¨ï¼Œé»˜è®¤å€¼ä¸º `true`

  > æ³¨æ„ï¼šå³ä¾¿ç¦æ­¢ç”¨æˆ·æ»šåŠ¨ï¼Œä½ ä¹Ÿä»ç„¶å¯ä»¥è°ƒç”¨ `scrollTo` æ¥æ»šåŠ¨

* `showsHorizontalScrollIndicator`

  å½“æ­¤å±æ€§ä¸º `true` çš„æ—¶å€™ï¼Œæ˜¾ç¤ºä¸€ä¸ªæ°´å¹³æ–¹å‘çš„æ»šåŠ¨æ¡

* `showsVerticalScrollIndicator`

  å½“æ­¤å±æ€§ä¸º `true` çš„æ—¶å€™ï¼Œæ˜¾ç¤ºä¸€ä¸ªå‚ç›´æ–¹å‘çš„æ»šåŠ¨æ¡

* `stickyHeaderIndices`

  ä¸€ä¸ªå­è§†å›¾ä¸‹æ ‡çš„æ•°ç»„ï¼Œç”¨äºå†³å®šå“ªäº›æˆå‘˜ä¼šåœ¨æ»šåŠ¨ä¹‹åå›ºå®šåœ¨å±å¹•é¡¶ç«¯

  ä¸¾ä¸ªä¾‹å­ï¼Œä¼ é€’ `stickyHeaderIndices={[0]}` ä¼šè®©ç¬¬ä¸€ä¸ªæˆå‘˜å›ºå®šåœ¨æ»šåŠ¨è§†å›¾é¡¶ç«¯

  > è¿™ä¸ªå±æ€§ä¸èƒ½å’Œ `horizontal={true}` ä¸€èµ·ä½¿ç”¨

* `endFillColor`

  æœ‰æ—¶å€™æ»šåŠ¨è§†å›¾ä¼šå æ®æ¯”å®é™…å†…å®¹æ›´å¤šçš„ç©ºé—´

  è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ­¤å±æ€§ï¼ŒæŒ‡å®šä»¥æŸç§é¢œè‰²æ¥å¡«å……å¤šä½™çš„ç©ºé—´ï¼Œä»¥é¿å…è®¾ç½®èƒŒæ™¯å’Œåˆ›å»ºä¸å¿…è¦çš„ç»˜åˆ¶å¼€é”€

  > ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸éœ€è¦è¿™ç§é«˜çº§ä¼˜åŒ–æŠ€å·§

* `overScrollMode`

  è¦†ç›–é»˜è®¤çš„ `overScroll` æ¨¡å¼

  å¯é€‰çš„å€¼æœ‰ï¼š

  * `auto`

    é»˜è®¤å€¼ï¼Œå…è®¸ç”¨æˆ·åœ¨å†…å®¹è¶…å‡ºè§†å›¾é«˜åº¦ä¹‹åå¯ä»¥æ»šåŠ¨è§†å›¾

  * `always`

    æ— è®ºå†…å®¹å°ºå¯¸ï¼Œç”¨æˆ·å§‹ç»ˆå¯ä»¥æ»šåŠ¨è§†å›¾

  * `never`

    å§‹ç»ˆä¸å…è®¸ç”¨æˆ·æ»šåŠ¨è§†å›¾

* `scrollPerfTag`
* `DEPRECATED_sendUpdatedChildFrames`
* `alwaysBounceHorizontal`
* `horizontal`
* `automaticallyAdjustContentInsets`
* `bounces`
* `bouncesZoom`
* `canCancelContentTouches`
* `centerContent`
* `contentInset`
* `contentInsetAdjustmentBehavior`
* `contentOffset`
* `decelerationRate`
* `directionalLockEnabled`
* `indicatorStyle`
* `maximumZoomScale`
* `minimumZoomScale`
* `pinchGestureEnabled`
* `scrollEventThrottle`
* `scrollIndicatorInsets`
* `scrollsToTop`
* `snapToAlignment`
* `snapToInterval`
* `snapToOffsets`
* `snapToStart`
* `snapToEnd`
* `zoomScale`
* `nestedScrollEnabled`

### æŸ¥çœ‹æ–¹æ³•

* `scrollTo`
* `scrollToEnd`
* `scrollWithoutAnimationTo`
* `flashScrollIndicators`















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































